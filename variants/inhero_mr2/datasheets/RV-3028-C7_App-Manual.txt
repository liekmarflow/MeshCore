RV-3028-C7

Application Manual

Application
Manual

RV-3028-C7

Extreme Low Power
Real-Time Clock Module
with I2C-Bus Interface

November 2021                          1/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

TABLE OF CONTENTS

1.  OVERVIEW                                                   6

1.1. GENERAL DESCRIPTION                                        6

1.2. APPLICATIONS                                              7

1.3. ORDERING INFORMATION                                        7

2.  BLOCK DIAGRAM                                               8

2.1. PINOUT                                                  9

2.2. PIN DESCRIPTION                                            9

2.3. FUNCTIONAL DESCRIPTION                                      10

2.4. DEVICE PROTECTION DIAGRAM                                   10

3.  REGISTER ORGANIZATION                                         11

3.1. REGISTER CONVENTIONS                                       11

3.2. REGISTER OVERVIEW                                         12

3.3. CLOCK REGISTERS                                           14

3.4. CALENDAR REGISTERS                                        16

3.5. ALARM REGISTERS                                           18

3.6. PERIODIC COUNTDOWN TIMER CONTROL REGISTERS                      20

3.7. STATUS AND CONTROL REGISTERS                                 22

3.8. EVENT CONTROL REGISTER                                     26

3.9. TIME STAMP REGISTERS                                       27

3.10. UNIX TIME REGISTERS                                         30

3.11. RAM REGISTERS                                            31

3.12. PASSWORD REGISTERS                                        32

3.13. EEPROM MEMORY CONTROL REGISTERS                             33

3.14. ID REGISTER                                               35

3.15. CONFIGURATION EEPROM WITH RAM MIRROR REGISTERS                   35

3.15.1. EEPROM RESERVED                                       35

3.15.2. EEPROM PASSWORD ENABLE REGISTER                           35

3.15.3. EEPROM PASSWORD REGISTERS                                36

3.15.4. EEPROM CLKOUT REGISTER                                   37

3.15.5. EEPROM OFFSET REGISTER                                   38

3.15.6. EEPROM BACKUP REGISTER                                   39

3.16. USER EEPROM                                             40

3.17. RESERVED EEPROM                                          40

3.18. REGISTER RESET VALUES SUMMARY                                41

4.  DETAILED FUNCTIONAL DESCRIPTION                                  44

4.1. POWER ON RESET (POR)                                       44

4.2. AUTOMATIC BACKUP SWITCHOVER FUNCTION                          45

4.2.1. SWITCHOVER DISABLED                                     46

November 2021                          2/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.2.2. DIRECT SWITCHING MODE (DSM)                                46

4.2.3. LEVEL SWITCHING MODE (LSM)                                 47

4.3. TRICKLE CHARGER                                           48

4.4. PROGRAMMABLE CLOCK OUTPUT                                  48

4.4.1. CLKOUT FREQUENCY SELECTION                                49

4.4.2. NORMAL CLOCK OUTPUT                                     49

4.4.3. INTERRUPT CONTROLLED CLOCK OUTPUT                          49

4.4.4. SYNCHRONIZED ENABLE/DISABLE                               50

4.4.5. CLOCK OUTPUT SCHEME                                     51

4.5. SETTING AND READING THE TIME                                  52

4.5.1. SETTING THE TIME                                         53

4.5.2. READING THE TIME                                        53

4.6. EEPROM READ/WRITE                                         54

4.6.1. POR REFRESH (ALL CONFIGURATION EEPROM ü°™ RAM)                   54

4.6.2. AUTOMATIC REFRESH (ALL CONFIGURATION EEPROM ü°™ RAM)              54

4.6.3. UPDATE (ALL CONFIGURATION RAM ü°™ EEPROM)                       54

4.6.4. REFRESH (ALL CONFIGURATION EEPROM ü°™ RAM)                      54

4.6.5. WRITE TO ONE EEPROM BYTE (EEDATA (RAM) ü°™ EEPROM)                 55

4.6.6. READ ONE EEPROM BYTE (EEPROM ü°™ EEDATA (RAM))                   55

4.6.7. EEBUSY BIT                                             56

4.6.8. EEPROM READ/WRITE CONDITIONS                               57

4.6.9. USE OF THE CONFIGURATION REGISTERS                           57

4.7. INTERRUPT OUTPUT                                          58

4.7.1. SERVICING INTERRUPTS                                     58

4.7.2. INTERRUPT SCHEME                                       59

4.8. PERIODIC COUNTDOWN TIMER INTERRUPT FUNCTION                      61

4.8.1. PERIODIC COUNTDOWN TIMER DIAGRAM                           62

4.8.2. USE OF THE PERIODIC COUNTDOWN TIMER INTERRUPT                  63

4.8.3. FIRST PERIOD DURATION                                     65

4.8.4. SINGLE MODE (TRPT = 0)                                     65

4.8.5. REPEAT MODE (TRPT = 1)                                     65

4.9. PERIODIC TIME UPDATE INTERRUPT FUNCTION                          66

4.9.1. PERIODIC TIME UPDATE DIAGRAM                               66

4.9.2. USE OF THE PERIODIC TIME UPDATE INTERRUPT                      67

4.10. ALARM INTERRUPT FUNCTION                                    68

4.10.1. ALARM DIAGRAM                                          68

4.10.2. USE OF THE ALARM INTERRUPT                                 69

4.11. EXTERNAL EVENT INTERRUPT FUNCTION                             70

4.11.1. EXTERNAL EVENT DIAGRAM                                   71

November 2021                          3/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.11.2. USE OF THE EXTERNAL EVENT INTERRUPT                          72

4.11.3. EDGE DETECTION (ET = 00)                                    73

4.11.4. LEVEL DETECTION WITH FILTERING (ET ‚â† 00)                          73

4.12. AUTOMATIC BACKUP SWITCHOVER INTERRUPT FUNCTION                   74

4.12.1. AUTOMATIC BACKUP SWITCHOVER DIAGRAM                         75

4.12.2. USE OF THE AUTOMATIC BACKUP SWITCHOVER INTERRUPT                76

4.13. POWER ON RESET INTERRUPT FUNCTION                             77

4.13.1. POWER ON RESET DIAGRAM                                   77

4.13.2. USE OF THE POWER ON RESET INTERRUPT                          78

4.14. TIME STAMP FUNCTION                                        79

4.15. FREQUENCY OFFSET CORRECTION                                 81

4.15.1. EEOFFSET VALUE DETERMINATION                               81

4.15.2. VERIFICATION OF THE CORRECTED TIME ACCURACY                    81

4.16. UNIX TIME COUNTER                                          82

4.16.1. SETTING THE UNIX TIME                                     82

4.16.2. READING THE UNIX TIME                                     84

4.17. RESET BIT FUNCTION                                         85

4.18. USER PROGRAMMABLE PASSWORD                                87

4.18.1. ENABLE/DISABLE WRITE PROTECTION                             87

4.18.2. CHANGING PASSWORD                                      88

4.18.3. FLOWCHART                                            89

5.  I¬≤C INTERFACE                                                90

5.1. BIT TRANSFER                                             90

5.2. START AND STOP CONDITIONS                                    90

5.3. DATA VALID                                               91

5.4. SYSTEM CONFIGURATION                                       91

5.5. ACKNOWLEDGE                                             92

5.6. SLAVE ADDRESS                                            93

5.7. WRITE OPERATION                                           93

5.8. READ OPERATION AT SPECIFIC ADDRESS                             94

5.9. READ OPERATION                                           94

5.10. I¬≤C-BUS IN SWITCHOVER CONDITION                                95

6.  ELECTRICAL SPECIFICATIONS                                      96

6.1. ABSOLUTE MAXIMUM RATINGS                                    96

6.2. OPERATING PARAMETERS                                      97

6.2.1. TYPICAL CHARACTERISTICS                                   99

6.3. OSCILLATOR PARAMETERS                                     100

6.3.1. XTAL FREQUENCY VS. TEMPERATURE CHARACTERISTICS                100

6.4. POWER ON AC ELECTRICAL CHARACTERISTICS                         101

November 2021                          4/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

6.5. I¬≤C-BUS CHARACTERISTICS                                     102

7.  TYPICAL APPLICATION CIRCUITS                                    103

7.1. NO BACKUP SOURCE / EVENT INPUT NOT USED                         103

7.2. NON-RECHARGEABLE BACKUP SOURCE / EVENT INPUT USED (ACTIVE HIGH)        104

7.3. RECHARGEABLE BACKUP SOURCE / EVENT INPUT USED (ACTIVE LOW)           105

7.4. NO BACKUP SOURCE / EVENT INPUT USED (‚ÄúWAKE-UP‚Äù& ‚ÄúPOWER SWITCH‚Äù)        106

8.  PACKAGE                                                  107

8.1. DIMENSIONS AND SOLDER PAD LAYOUT                             107

8.1.1. RECOMMENDED THERMAL RELIEF                               107

8.2. MARKING AND PIN #1 INDEX                                     108

9. MATERIAL COMPOSITION DECLARATION & ENVIRONMENTAL INFORMATION          109

9.1. HOMOGENOUS MATERIAL COMPOSITION DECLARATION                    109

9.2. MATERIAL ANALYSIS & TEST RESULTS                              110

9.3. RECYCLING MATERIAL INFORMATION                               111

9.4. ENVIRONMENTAL PROPERTIES & ABSOLUTE MAXIMUM RATINGS              112

10. SOLDERING INFORMATION                                        113

11. HANDLING PRECAUTIONS FOR MODULES WITH EMBEDDED CRYSTALS             114

12. PACKING & SHIPPING INFORMATION                                  115

13. COMPLIANCE INFORMATION                                       116

14. DOCUMENT REVISION HISTORY                                     116

November 2021                          5/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

RV-3028-C7

Extreme Low Power Real-Time Clock (RTC) Module with I2C-Bus Interface

1. OVERVIEW

‚Ä¢  RTC module with built-in 32.768 kHz ‚ÄúTuning Fork‚Äù crystal oscillator

‚Ä¢  Counters for seconds, minutes, hours, date, month, year and weekday

‚Ä¢  32-bit UNIX Time counter

‚Ä¢  Automatic leap year correction: 2000 to 2099

‚Ä¢  Aging compensation with user programmable EEPROM Offset value (Factory Calibrated value may 
be
changed by the user)

‚Ä¢  Periodic Countdown Timer Interrupt function; interrupt output also in VBACKUP Power 
state

‚Ä¢  Periodic Time Update Interrupt function (seconds, minutes); interrupt output also in VBACKUP 
Power state

‚Ä¢  Alarm Interrupts for weekday or date, hour and minute settings; interrupt output also in VBACKUP 
Power
state

‚Ä¢  External Event Input with Interrupt and Time Stamp function; interrupt output also in VBACKUP 
Power
state

‚Ä¢  Factory calibrated time accuracy: ¬±1 ppm @ 25¬∞C (EEPROM Offset value may be changed by the 
user)

‚Ä¢  32.768 kHz Xtal oscillator frequency accuracy: ¬±5 ppm @ 25¬∞C

‚Ä¢  43 bytes of user EEPROM

‚Ä¢  Configuration registers stored in EEPROM and mirrored in RAM

‚Ä¢  User programmable password for write protection of the time, control and configuration 
registers

‚Ä¢  I2C-bus interface (up to 400 kHz)

‚Ä¢  Programmable Clock Output

o Enable/disable by CLKOE bit

o Enable by an Interrupt function

o 32.768 kHz, 8192 Hz, 1024 Hz, 64 Hz, 32 Hz, 1 Hz

o Periodic countdown timer interrupt as clock output frequency

o Synchronized enable/disable

‚Ä¢  Automatic Backup switchover with Interrupt and Time Stamp function

‚Ä¢  Internal Power On Reset (POR) with Interrupt function

‚Ä¢  Trickle charger

‚Ä¢  Wide Timekeeping voltage range: 1.1 to 5.5 V

‚Ä¢  Wide interface operating voltage: 1.2 to 5.5 V

‚Ä¢  Extreme low current consumption: 45 nA (VDD = 3.0 V, TA = 25¬∞C)

‚Ä¢  Operating temperature range: -40 to +85¬∞C

‚Ä¢  Ultra small and compact C7 package size (3.2 x 1.5 x 0.8 mm), RoHS-compliant and 100% 
lead-free

‚Ä¢  Automotive qualification according to AEC-Q200 available

1.1. GENERAL DESCRIPTION

The RV-3028-C7 is a CMOS real-time clock/calendar module with an automatic backup switchover 
circuit and is
optimized for extreme low power consumption. It provides full RTC function with programmable 
counters, alarm,
selectable interrupt and clock output functions and also a 32-bit UNIX Time counter. The internal 
EEPROM memory
hosts all configuration settings and allows for additional user memory. An EEOffset value allows 
compensating the
frequency deviation of the 32.768 kHz clock. Addresses and data are transmitted via an I2C-bus 
interface for
communication with a host controller. The Address Pointer is incremented automatically after each 
written or read
data byte.

This ultra small RTC module has been specially designed for miniature and cost sensitive high 
volume applications.

November 2021                          6/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

1.2. APPLICATIONS

The RV-3028-C7 RTC module combines key functions with outstanding performance in an ultra small 
ceramic
package:

‚Ä¢  Extreme Low Power consumption

‚Ä¢  Smallest RTC module (embedded XTAL) in an ultra-small 3.2 x 1.5 x 0.8 mm lead-free ceramic 
package

These unique features make this product perfectly suitable for many applications:

‚Ä¢  Communication:  IoT / Wearables / Wireless Sensors and Tags / Handsets

‚Ä¢  Automotive:   M2M / Navigation & Tracking Systems / Dashboard / Tachometers / Engine 
Controller
Car Audio & Entertainment Systems

‚Ä¢  Metering:     E-Meter / Heating Counter / Smart Meters / PV Converter/ Utility metering

‚Ä¢  Outdoor:     ATM & POS systems / Surveillance & Safety systems / Ticketing Systems

‚Ä¢  Medical:     Glucose Meter / Health Monitoring Systems

‚Ä¢  Safety:      Security & Camera Systems / Door Lock & Access Control / Tamper Detection

‚Ä¢  Consumer:    Gambling Machines / TV & Set Top Boxes / White Goods

‚Ä¢  Automation:    PLC / Data Logger / Home & Factory Automation / Industrial and Consumer 
Electronics

1.3. ORDERING INFORMATION

Example:   RV-3028-C7  TA  QC


Code

TA (Standard)

Operating temperature range

-40 to +85¬∞C


Code

QC (Standard)
QA

Qualification
Commercial Grade
Automotive  Grade AEC-Q200

November 2021                          7/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

2. BLOCK DIAGRAM


VBACKUP
VDD
VSS

SCL

SDA

6

7

5

3

I¬≤C-BUS

4 INTERFACE

POWER
CONTROL

RAM

Seconds   00

Minutes
Hours
Weekday
Date
Month
Year

Minutes Alarm
Hours Alarm
Weekday Alarm
Date Alarm

RAM

User RAM 2  20

PW 0

PW 1

PW 2

PW 3
EEADDR
EEDATA
EECMD

ID    28


CLKOUT

INT

EVI

FREQUENCY
OFFSET
COMPENSATION

DIVIDER
XTAL

OSCILLATOR

1

2   INPUT
OUTPUT

CONTROL

8

RESET

SYSTEM
CONTROL
LOGIC

Timer Value 0

Timer Value 1

Timer Status 0

Timer Status 1
Status

Control 1

Control 2
GP Bits
CLKIM

Event Control
Count TS
Seconds TS
Minutes TS
Hours TS
Date TS
Month TS
Year TS
UNIX Time 0

UNIX Time 1

UNIX Time 2

UNIX Time 3

User RAM 1

Configuration EEPROM

with RAM mirror
EEPWE   30

EEPW 0

EEPW 1

0F    EEPW 2

10   EEPW 3

EEPROM Clkout

EEPROM Offset
EEPROM Backup  37

User EEPROM

43 Bytes of
user EEPROM
(00h ‚Äì 2Ah)

1F

November 2021                          8/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

2.1. PINOUT

RV-3028-C7 Package: (top view)


#8         #5

3028

#1   CLKOUT

#2   INT

#3   SCL

#4   SDA

#5   VSS

#6   VBACKUP

#7   VDD


#1         #4

#8   EVI

2.2. PIN DESCRIPTION


Symbol

Pin #

Description


CLKOUT

IÃÖNÃÖÃÖÃÖTÃÖ

SCL
SDA
VSS
VBACKUP
VDD
EVI

Clock Output; push-pull; Normal and Interrupt driven clock output can be activated concurrently:

1.  Normal clock output can be controlled by the CLKOE bit (EEPROM 35h) when CLKF = 0.
When CLKOE is set to 1 (default), the CLKOUT pin drives the square wave on the
CLKOUT pin. When CLKOE bit is set to 0, the CLKOUT pin is LOW.

2.  Interrupt driven clock output can be controlled by interrupt events when CLKOE = 0.
When CLKIE bit (10h) is set to 1 the occurrence of the interrupt selected in the Clock
Interrupt Mask Register (12h) allows the square wave output on the CLKOUT pin. Writing
0  to CLKIE will disable new interrupts from driving square wave on CLKOUT. When

1          CLKF flag is cleared, the CLKOUT pin is LOW.

Depending of the settings in the FD field (EEPROM 35h), the CLKOUT pin can drive the square
wave of 32.768 kHz (default), 8192 Hz, 1024 Hz, 64 Hz, 32 Hz or 1 Hz, or the predefined periodic
countdown timer interrupt. When FD field is 111 the CLKOUT pin is LOW.

When CLKSY bit (EEPROM 35h) set to 1, the enabling and disabling of the clock output is
synchronized. CLKSY has no effect on the timer interrupt signal.

In VBACKUP Power state, the CLKOUT pin is LOW.

Interrupt Output; open-drain; active LOW; requires pull-up resistor when used; used to output

2    Periodic Countdown Timer, Periodic Time Update, Alarm, External Event, Automatic Backup
Switchover and Power On Reset Interrupt signals. Interrupt output also in VBACKUP Power state.

3     I¬≤C Serial Clock Input; requires pull-up resistor. In VBACKUP Power state, the SCL pin is 
disabled.

I¬≤C Serial Data Input-Output; open-drain; requires pull-up resistor. In VBACKUP Power state, the4
SDA  pin is disabled (high impedance).

5     Ground.

6    Backup Supply Voltage. When the backup switchover function is not needed, VBACKUP must be tied
to VSS with a 10 k‚Ñ¶ resistor.

7     Power Supply Voltage.

8     External Event Input; used for interrupt generation, interrupt driven clock output and time 
stamp
function. Remains active also in VBACKUP Power state. This pin should not be left floating.

November 2021                          9/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

2.3. FUNCTIONAL DESCRIPTION

The RV-3028-C7 is an extreme-low power CMOS based Real-Time-Clock Module with embedded 32.768 kHz 
crystal
oscillator. It includes an Automatic Backup switchover function with a Trickle charger where the 
interrupt output pin
INT is also working in VBACKUP Power state. The clock output on CLKOUT pin can be enabled normally 
via

command over I2C interface or can be interrupt driven and synchronized clock output enable/disable 
on CLKOUT pin

can be freely selected. The configuration registers are stored permanently in EEPROM and mirrored 
in RAM in order
that the RTC module is still configured correctly even after power down. For safety against 
inadvertent overwriting
the time, control and configuration registers can be protected by a User Programmable Password. 
Additionally, there
is an EEPROM Offset value customer use for aging correction.

The RV-3028-C7 provides standard Clock & Calendar function including seconds, minutes, hours (12 or 
24 h),
weekdays, date, months, years (with leap year correction) and interrupt functions for the Periodic 
Countdown Timer,
Periodic Time Update, Alarm, External Event, Automatic Backup Switchover and Power On Reset. All is 
accessible
via I2C-bus (2-wire Interface). The interrupt functions and the Time Stamp of the External Event 
function are also
working in VBACKUP Power state. Beside the standard RTC functions a 32-bit UNIX Time counter and 43 
Bytes of
User Memory EEPROM and 2 Bytes of User RAM are provided. A further Byte can be used as User RAM 
when the
Periodic Countdown Timer is not used (Timer Value register 0Ah) and a further Byte when the Alarm 
function is not
used (Alarm register 07h).

The registers are accessed by selecting a register address and then performing read or write 
operations. Multiple
reads or writes can be performed in a single access, with the address automatically incremented 
after each byte by
the Address Pointer. When address is automatically incremented, wrap around occurs from address 3Fh 
to address
00h (see figure below). All registers are designed as addressable 8-bit registers despite the fact 
that not all registers
and bits are implemented.

Handling address registers:


Address
00h
01h
02h
03h

:

3Dh
3Eh
3Fh

auto-
increment

wrap around

2.4. DEVICE PROTECTION DIAGRAM


CLKOUT  ¬π

INT  2

SCL  3

SDA  4

8  EVI

7  VDD

6  VBACKUP

5  VSS

November 2021                         10/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3. REGISTER ORGANIZATION

‚Ä¢  RAM Registers at addresses 00h to 28h are accessed by selecting a register address and then 
performing
read or write operations. Multiple reads or writes may be executed in a single access, with the 
address
automatically incrementing after each byte.

‚Ä¢  The Configuration Registers at addresses 30h to 37h are memorized in EEPROM and mirrored in RAM. 
For
the RAM mirror, multiple reads or writes may be executed in a single access, with the address 
automatically
incrementing after each byte.

‚Ä¢  There are 43 bytes of non-volatile user memory EEPROM at addresses 00h to 2Ah for general 
use.

The following tables summarize the function of each register.

3.1. REGISTER CONVENTIONS

The conventions in this table serve as a key for the register overview and individual register 
diagrams:


Convention
(Conv.)

R
W

Read only. Writing to this register has no effect.
Write only. Returns 0 when read.

Description


R/WP
WP

*WP
Prot.

Read: Always readable. Write: Can be write-protected by password.
Write only. Returns 0 when read. Can be write-protected by password.

EEPW registers: RAM mirror is Write only. Returns 0 when read. EEPROM can be READ when Unlocked.
Protected. Writing to this register has no effect.

November 2021                         11/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.2. REGISTER OVERVIEW

After reset, all registers are set according to Table in section REGISTER RESET VALUES SUMMARY.

Register Definitions; RAM, Address 00h to 3Fh:

Address    Function      Conv.   Bit 7   Bit 6   Bit 5   Bit 4   Bit 3   Bit 2   Bit 1   Bit 0

00h      Seconds       R/WP    ‚óã     40     20     10     8     4     2     1

01h      Minutes       R/WP    ‚óã     40     20     10     8     4     2     1


02h

03h
04h
05h
06h
07h

08h

09h

0Ah
0Bh
0Ch

0Dh

0Eh
0Fh
10h
11h
12h
13h
14h
15h
16h

17h

18h
19h
1Ah

Hours (24 hour)

Hours (12 hour)
Weekday

Date
Month
Year

Minutes Alarm
Hours Alarm (24h)
Hours Alarm (12h)
Weekday Alarm
Date Alarm

Timer Value 0

Timer Value 1

Timer Status 0

Timer Status 1
shadow
Status

Control 1

Control 2
GP Bits

Clock Int. Mask
Event Control
Count TS
Seconds TS
Minutes TS
Hours TS (24h)
Hours TS (12h)
Date TS

Month TS
Year TS

R/WP

R/WP
R/WP
R/WP
R/WP
R/WP

R/WP

R/WP

R/WP
R/WP
R

R

R/WP
R/WP
R/WP
R/WP
R/WP
R/WP
R

R
R

R

R
R
R

‚óã

‚óã

‚óã

‚óã
80

AE_M
AE_H

AE_WD

128

‚óã
128

‚óã

EEbusy
TRPT
TSE

-

-

‚óã
128

‚óã

‚óã

‚óã

‚óã

‚óã
80

‚óã

‚óã

‚óã

‚óã
40

40

‚óã

‚óã
64

‚óã
64

‚óã

CLKF

-
CLKIE
GP6

-
EHL
64

40

40

‚óã

‚óã

‚óã
40

20

AMPM

‚óã
20

‚óã
20

20

20

AMPM

‚óã
20

32

‚óã
32

‚óã

BSF
WADA
UIE
GP5

-

ET

32

20

20

20

AMPM
20

‚óã
20

10

10

‚óã
10

10

10

10

10

10

‚óã
10

16

‚óã
16

‚óã

UF
USEL
TIE
GP4

-

16

10

10

10

10

10

10

10

8

8

‚óã
8

8

8

8

8

8

‚óã
8

8

2048

8

2048

TF
EERD
AIE
GP3
CEIE

‚óã
8

8

8

8

8

8

8

8

4

4

4

4

4

4

4

4

4

4

4

4

1024

4

1024

AF
TE
EIE
GP2
CAIE
TSR
4

4

4

4

4

4

4

4

2

2

2

2

2

2

2

2

2

2

2

2

512

2

512

EVF

12_24

GP1
CTIE
TSOW
2

2

2

2

2

2

2

2

1

1

1

1

1

1

1

1

1

1

1

1

256

1

256

PORF

TD

RESET
GP0
CUIE
TSS

1

1

1

1

1

1

1

1


1Bh
1Ch
1Dh
1Eh
1Fh
20h
21h
22h
23h
24h
25h
26h
27h
28h

29h and 2Ah
2Ch to 2Fh
38h to 3Fh

UNIX Time 0

UNIX Time 1

UNIX Time 2

UNIX Time 3

User RAM 1

User RAM 2

Password 0

Password 1

Password 2

Password 3
EE Address
EE Data

EE Command
ID
RESERVED
RESERVED
RESERVED

R/WP
R/WP
R/WP
R/WP
R/WP
R/WP
W

W
W
W

R/WP
R/WP
WP
R

Prot.
Prot.
Prot.

UNIX 0 [7:0]

UNIX 1 [15:8]

UNIX 2 [23:16]

UNIX 3 [31:24]

RAM 1 data

RAM 2 data

PW 0 [7:0]

PW 1 [15:8]

PW 2 [23:16]

PW 3 [31:24]
EEADDR
EEDATA
EECMD

HID                   VID

RESERVED
RESERVED
RESERVED

‚óã Read only. Always 0.

- Bit not implemented. Will return a 0 when read.

November 2021                         12/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

Register Definitions; Configuration EEPROM with RAM mirror, Address 2Bh and 30h to 37h:


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


2Bh
30h
31h
32h
33h
34h
35h

36h

EEPROM

Reserved
EEPROM PW

Enable

EEPROM

Password 0
EEPROM

Password 1

EEPROM

Password 2
EEPROM

Password 3

EEPROM

Clkout
EEPROM

Offset

R/WP
R/WP

*WP

*WP

*WP

*WP
R/WP

R/WP

RESERVED (Must not be overwritten)
EEPWE

EEPW 0 [7:0]

EEPW 1 [15:8]

EEPW 2 [23:16]

EEPW 3 [31:24]

CLKOE  CLKSY    -     -    PORIE        FD

EEOffset [8:1]


37h

EEPROM

Backup

R/WP

EEOffset
[0]

BSIE

TCE

FEDE

BSM

TCR

- Bit not implemented. Will return a 0 when read.

* EEPW registers: RAM mirror is Write only. Returns 0 when read. EEPROM can be READ when Unlocked.

Register Definitions; User EEPROM, Address 00h to 2Ah:

Address     Function      Conv.   Bit 7   Bit 6   Bit 5   Bit 4   Bit 3   Bit 2   Bit 1   Bit 0


00h to 2Ah

User EEPROM
(43 Bytes)

R/WP

43 Bytes of non-volatile User EEPROM

Register Definitions; Reserved EEPROM, Address 2Ch to 2Fh and 38h to 3Fh:

Address     Function      Conv.   Bit 7   Bit 6   Bit 5   Bit 4   Bit 3   Bit 2   Bit 1   Bit 0


2Ch to 2Fh
38h to 3Fh

Reserved
EEPROM

Reserved
EEPROM

Prot.
Prot.

RESERVED
RESERVED

November 2021                         13/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.3. CLOCK REGISTERS

00h ‚Äì Seconds

This register holds the count of seconds, in two binary coded decimal (BCD) digits. Values will be 
from 00 to 59.
Read: Always readable. Write: Can be write-protected by password.


Address

00h

Bit

Function
Seconds
Reset

Symbol

Conv.

R/WP

Bit 7

‚óã
0

Value

Bit 6

40

0

Bit 5

20

0

Bit 4

10

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7

6:0

‚óã

Seconds

0

00 to 59

Read only. Always 0.

Holds the count of seconds, coded in BCD format.

When writing to the Seconds register an eventual present memorized 1 Hz
update is reset and the prescaler frequencies from 8192 Hz to 1 Hz will be
reset (same effect as RESET BIT FUNCTION).

When writing 1 to the RESET bit (10h) the Seconds register value remains
unchanged.

01h ‚Äì Minutes

This register holds the count of minutes, in two binary coded decimal (BCD) digits. Values will be 
from 00 to 59.
Read: Always readable. Write: Can be write-protected by password.


Address

01h

Bit

Function
Minutes
Reset

Symbol

Conv.

R/WP

Bit 7

‚óã
0

Value

Bit 6

40

0

Bit 5

20

0

Bit 4

10

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7

6:0

‚óã
Minutes

0

00 to 59

Read only. Always 0.

Holds the count of minutes, coded in BCD format.

November 2021                         14/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

02h ‚Äì Hours

This register holds the count of hours, in two binary coded decimal (BCD) digits. If the 12_24 bit 
is cleared (default)
(see STATUS AND CONTROL REGISTERS, 10h ‚Äì Control 2) the values will be from 0 to 23. If the 12_24 
bit is set,
the hour values will range from 1 to 12 and the AMPM bit will be 0 for AM hours and 1 for PM hours.

The value in the Hours register changes automatically between 12 and 24 hour mode when 12_24 bit is 
changed.
The value in the Hours Alarm register (08h) however must be rewritten.

Read: Always readable. Write: Can be write-protected by password.


Address

02h

Function

Hours (24 hour
mode)

‚Äì default value
Hours (12 hour
mode)

Reset

Conv.

R/WP

Bit 7

‚óã

0

Bit 6

‚óã

0

Bit 5

20

AMPM
0

Bit 4

10

10

0

Bit 3

8

8

0

Bit 2

4

4

0

Bit 1

2

2

0

Bit 0

1

1

0

Hours (24 hour mode), 12_24 = 0 ‚Äì default value

Bit      Symbol            Value                 Description

7:6      ‚óã                0   Read only. Always 0.


5:0

Hours (24 hour mode)
‚Äì default value

0 to 23

Holds the count of hours, coded in BCD format.

Hours (12 hour mode), 12_24 = 1

Bit      Symbol            Value                 Description

7:6      ‚óã                0   Read only. Always 0.

0   AM hours.


5

4:0

AMPM

Hours (12 hour mode)

1

1 to 12

PM hours.

Holds the count of hours, coded in BCD format.

Hours values:

24 hour mode          12 hour mode          24 hour mode          12 hour mode

00              12 (AM 12)              12              32 (PM 12)

01              01 (AM 1)              13              21 (PM 1)

02              02 (AM 2)              14              22 (PM 2)

:                 :                 :                 :

10              10 (AM 10)              22              30 (PM 10)

11              11 (AM 11)              23              31 (PM 11)

November 2021                         15/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.4. CALENDAR REGISTERS

03h ‚Äì Weekday

This register holds the current day of the week. Each value represents one weekday that is assigned 
by the user.
Values will range from 0 to 6. The weekday counter is simply a 3-bit counter which counts up to 6 
and then resets to
0.

Read: Always readable. Write: Can be write-protected by password.


Address

03h

Bit

Function
Weekday
Reset

Symbol

Conv.

R/WP

Bit 7

‚óã
0

Value

Bit 6

‚óã
0

Bit 5

‚óã
0

Bit 4

‚óã
0

Bit 3

‚óã
0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7:3

2:0

Weekday

‚óã
Weekday

0

0 to 6

Bit 7

Read only. Always 0.

Holds the weekday counter value.

Bit 6   Bit 5   Bit 4   Bit 3   Bit 2   Bit 1   Bit 0


Weekday 1 ‚Äì Default value
Weekday 2

Weekday 3

Weekday 4

Weekday 5

Weekday 6

Weekday 7

0     0     0

0     0     1

0     1     0

0     0     0     0     0     0     1     1

1     0     0

1     0     1

1     1     0

04h ‚Äì Date

This register holds the current day of the month, in two binary coded decimal (BCD) digits. Values 
will range from 01
to 31. Leap years are correctly handled from 2000 to 2099.

Read: Always readable. Write: Can be write-protected by password.


Address

04h

Bit

Function
Date
Reset

Symbol

Conv.

R/WP

Bit 7

‚óã
0

Value

Bit 6

‚óã
0

Bit 5

20

0

Bit 4

10

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

1


7:6

5:0

‚óã
Date

0

01 to 31

Read only. Always 0.

Holds the current date of the month, coded in BCD format.
‚Äì Default value = 01

November 2021                         16/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

05h ‚Äì Month

This register holds the current month, in two binary coded decimal (BCD) digits. Values will range 
from 01 to 12.
Read: Always readable. Write: Can be write-protected by password.


Address

05h

Bit

Function
Month
Reset

Symbol

Conv.

R/WP

Bit 7

‚óã
0

Value

Bit 6

‚óã
0

Bit 5

‚óã
0

Bit 4

10

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

1


Months

7:5

4:0

‚óã
Month

0

01 to 12

Bit 7

Read only. Always 0.

Holds the current month, coded in BCD format.

Bit 6   Bit 5   Bit 4   Bit 3   Bit 2   Bit 1   Bit 0


January ‚Äì Default value
February

March
April
May
June
July
August

September
October
November
December

0     0     0     0     1

0     0     0     1     0

0     0     0     1     1

0     0     1     0     0

0     0     1     0     1

0     0     0     0     0     1     1     0

0     0     1     1     1

0     1     0     0     0

0     1     0     0     1

1     0     0     0     0

1     0     0     0     1

1     0     0     1     0

06h ‚Äì Year

This register holds the current year, in two binary coded decimal (BCD) digits. Values will range 
from 00 to 99. Leap
years are correctly handled from 2000 to 2099.

Read: Always readable. Write: Can be write-protected by password.


Address

06h

Bit

Function
Year
Reset

Symbol

Conv.

R/WP

Bit 7

80

0

Value

Bit 6

40

0

Bit 5

20

0

Bit 4

10

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7:0

Year

00 to 99

Holds the current year, coded in BCD format. ‚Äì Default value = 00

November 2021                         17/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.5. ALARM REGISTERS

07h ‚Äì Minutes Alarm

This register holds the Minutes Alarm Enable bit AE_M and the alarm value for minutes, in two 
binary coded decimal
(BCD) digits. Values will range from 00 to 59.

Read: Always readable. Write: Can be write-protected by password.


Address

07h

Bit

Function
Minutes Alarm
Reset

Symbol

Conv.

R/WP

Bit 7
AE_M
1

Value

Bit 6

40

0

Bit 5

20

0

Bit 4

10

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7

6:0

AE_M

Minutes Alarm

Minutes Alarm Enable bit. Enables alarm together with AE_H and AE_WD
(see USE OF THE ALARM INTERRUPT).

0   Minutes Alarm is enabled.

1   Minutes Alarm is disabled. ‚Äì Default value

00 to 59  Holds the alarm value for minutes, coded in BCD format.

08h ‚Äì Hours Alarm

This register holds the Hours Alarm Enable bit AE_H and the alarm value for hours, in two binary 
coded decimal
(BCD) digits. If the 12_24 bit is cleared (default value) (see STATUS AND CONTROL REGISTERS, 10h ‚Äì 
Control
2) the values will range from 0 to 23. If the 12_24 bit is set, the hour values will be from 1 to 
12 and the AMPM bit will
be 0 for AM hours and 1 for PM hours.

If the 12_24 hour mode bit is changed then the value in the Hours Alarm register must be 
re-initialized.
Read: Always readable. Write: Can be write-protected by password.


Address

08h

Function

Hours Alarm (24
hour mode)

‚Äì default value
Hours Alarm (12
hour mode)
Reset

Conv.

R/WP

Bit 7

AE_H

1

Bit 6

‚óã

0

Bit 5

20

AMPM
0

Bit 4

10

10

0

Bit 3

8

8

0

Bit 2

4

4

0

Bit 1

2

2

0

Bit 0

1

1

0

Hours Alarm (24 hour mode), 12_24 = 0 ‚Äì default value

Bit      Symbol            Value                 Description

Hours Alarm Enable bit (see USE OF THE ALARM INTERRUPT).


7

6

5:0

AE_H

‚óã

Hours Alarm (24 hour
mode) ‚Äì default value

0

1

0

0 to 23

Enabled

Disabled ‚Äì Default value
Read only. Always 0.

Holds the alarm value for hours, coded in BCD format.

Hours Alarm (12 hour mode), 12_24 = 1

Bit      Symbol            Value                 Description

Hours Alarm Enable bit (see USE OF THE ALARM INTERRUPT).


7

6

5

4:0

AE_H

‚óã
AMPM

Hours Alarm (12 hour

mode)

0

1

0

0

1

1 to 12

Enabled

Disabled ‚Äì Default value
Read only. Always 0.

AM hours.
PM hours.

Holds the alarm value for hours, coded in BCD format.

November 2021                         18/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

09h ‚Äì Weekday/Date Alarm

This register holds the Weekday/Date Alarm Enable bit AE_WD. If the WADA bit is 0 (Bit 5 in 
Register 0Fh), it holds
the alarm value for the weekday (weekdays assigned by the user), in two binary coded decimal (BCD) 
digits. Values
will range from 0 to 6. If the WADA bit is 1, it holds the alarm value for the date, in two binary 
coded decimal (BCD)
digits. Values will range from 01 to 31. Leap years are correctly handled from 2000 to 2099.

Read: Always readable. Write: Can be write-protected by password.


Address

09h

Function

Weekday Alarm ‚Äì
default value
Date Alarm

Reset

Conv.

R/WP

Bit 7

AE_WD
1

Bit 6

‚óã
0

Bit 5

‚óã
20

0

Bit 4

‚óã
10

0

Bit 3

‚óã
8

0

Bit 2

4

4

0

Bit 1

2

2

0

Bit 0

1

1

0

Weekday Alarm, WADA = 0 ‚Äì default value

Bit      Symbol            Value                 Description

Weekday/Date Alarm Enable bit. Enables alarm together with AE_M and AE_H
(see USE OF THE ALARM INTERRUPT).


7

6:3

2:0

AE_WD

‚óã

Weekday Alarm

0

1

0

0 to 6

Enabled

Disabled ‚Äì Default value
Read only. Always 0.

Holds the weekday alarm value, coded in BCD format.

Date Alarm, WADA = 1

Bit      Symbol            Value                 Description

Weekday/Date Alarm Enable bit. Enables alarm together with AE_M and AE_H
(see USE OF THE ALARM INTERRUPT).


7

6

5:0

AE_WD

‚óã

Date Alarm

0

1

0

01 to 31

Enabled

Disabled ‚Äì Default value
Read only. Always 0.

Holds the alarm value for the date, coded in BCD format. The Reset value

00 after POR has to be replaced by a valid value (01 to 31).

November 2021                         19/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.6. PERIODIC COUNTDOWN TIMER CONTROL REGISTERS

0Ah ‚Äì Timer Value 0

This register is used to set the lower 8 bits of the 12 bit Timer Value (preset value) for the 
Periodic Countdown Timer.
This value will be automatically reloaded into the Countdown Timer when it reaches zero if the TRPT 
bit is 1. This
allows for periodic timer interrupts (see calculation below).

Read: Always readable. Write: Can be write-protected by password.


Address

0Ah

Bit

Function
Timer Value 0
Reset

Symbol

Conv.

R/WP

Bit 7

128

0

Value

Bit 6

64

0

Bit 5

32

0

Bit 4

16

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7:0

Timer Value 0

00h to
FFh

The Timer Value for the Periodic Countdown Timer in binary format (lower
8 bit) (see USE OF THE PERIODIC COUNTDOWN TIMER). When read,

only the preset value is returned and not the actual value.

When the Periodic Countdown Timer Interrupt function is not used, register
0Ah can be used as RAM byte.

0Bh ‚Äì Timer Value 1

This register is used to set the upper 4 bits of the 12 bit Timer Value (preset value) for the 
Periodic Countdown Timer.
This value will be automatically reloaded into the Countdown Timer when it reaches zero if the TRPT 
bit is 1. This
allows for periodic timer interrupts (see calculation below).

Read: Always readable. Write: Can be write-protected by password.


Address

0Bh

Bit

Function
Timer Value 1
Reset

Symbol

Conv.

R/WP

Bit 7

‚óã
0

Value

Bit 6

‚óã
0

Bit 5

‚óã
0

Bit 4

‚óã
0

Bit 3

2048

0

Description

Bit 2

1024

0

Bit 1

512

0

Bit 0

256

0


7:4

3:0

‚óã

Timer Value 1

0

0h to Fh

Read only. Always 0.

The Timer Value for the Periodic Countdown Timer in binary format (upper
4 bit) (see USE OF THE PERIODIC COUNTDOWN TIMER). When read,

only the preset value is returned and not the actual value.


Countdown Period in seconds:

Timer Value
Countdown Period = Timer Clock Frequency

November 2021                         20/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

0Ch ‚Äì Timer Status 0

This register holds the lower 8 bits of the current 12 bit value of the Periodic Countdown Timer.
Read only. Writing to this register has no effect.


Address

0Ch

Bit

Function
Timer Status 0
Reset

Symbol

Conv.

R

Bit 7

128

0

Value

Bit 6

64

0

Bit 5

32

0

Bit 4

16

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7:0

Timer Status 0

00h to
FFh

The current value of the Periodic Countdown Timer in binary format (lower
8 bit) (see USE OF THE PERIODIC COUNTDOWN TIMER).

0Dh ‚Äì Timer Status 1 shadow

This register holds the upper 4 bits of the current 12 bit value of the Periodic Countdown Timer.
Read only. Writing to this register has no effect.


Address

0Dh

Bit

Function
Timer Status 1
Reset

Symbol

Conv.

R

Bit 7

‚óã
0

Value

Bit 6

‚óã
0

Bit 5

‚óã
0

Bit 4

‚óã
0

Bit 3

2048

0

Description

Bit 2

1024

0

Bit 1

512

0

Bit 0

256

0


7:4

3:0

‚óã

Timer Status 1

0

0h to
Fh

Read only. Always 0.

The current value of the Periodic Countdown Timer in binary format (upper
4 bit) (see USE OF THE PERIODIC COUNTDOWN TIMER).

When TE bit (0Fh) is set to 1, the Timer Status 0 and Timer Status 1 shadow registers hold the 
current countdown
value. When a 0 is written to the TE bit, the Timer Status 0 and Timer Status 1 registers store the 
last updated value.
Reading the Timer Status 0 value updates the Timer Status 1 shadow register. Reading only the Timer 
Status 1
shadow register will return the not-updated Timer Status 1 shadow register value, memorized while 
reading Timer
Status 0.

November 2021                         21/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.7. STATUS AND CONTROL REGISTERS

0Eh ‚Äì Status

This register is used to detect the occurrence of various interrupt events and reliability problems 
in internal data.
Read: Always readable. Write: Can be write-protected by password.


Address

0Eh

Bit

Function
Status
Reset

Symbol

Conv.

R/WP

Bit 7
EEbusy
1   ü°™ 0

Value

Bit 6
CLKF
0

Bit 5
BSF
0

Bit 4

UF

0 ü°™ 1

Bit 3
TF
0

Description

Bit 2
AF
0

Bit 1
EVF
0

Bit 0
PORF
1


7     EEbusy

6     CLKF

EEPROM Memory Busy Status Bit ‚Äì (Read Only)
(see EEPROM READ/WRITE)

0   The transfer is finished.

Indicates that the EEPROM is currently handling a read or write request
and will ignore any further commands until the current one is finished.

1   At power up (POR) a refresh is automatically generated. The time of this
first refreshment is tPREFR = ~66 ms. After the refreshment is finished;
EEbusy is cleared to 0 automatically.

Clock Output Interrupt Flag (see PROGRAMMABLE CLOCK OUTPUT)

No event detected. When cleared to 0 the frequency output will stop0
depending on CLKSY and CLKOUT settings.

If set to 0 beforehand, indicates the occurrence of an interrupt driven clock

1   output on CLKOUT pin. The value 1 is retained until a 0 is written by the
user.

Backup Switch Flag (see AUTOMATIC BACKUP SWITCHOVER FUNCTION)

No backup switchover detected. At power up (POR) this flag is


5     BSF

4     UF

3     TF

0   automatically cleared to 0. When the backup switchover function is
disabled (BSM field = 00 or 10) BSF is always logic 0.

If set to 0 beforehand, indicates that a switchover from main power VDD to
VBACKUP has occurred. The value 1 can be cleared by writing a 0 to the bit if

1   RTC module is in VDD Power state.

Caution: The EVF flag is also set by an event of the Backup Switchover
function when bits TSS (13h) and TSE (10h) are set to 1.

Periodic Time Update Flag

(see PERIODIC TIME UPDATE INTERRUPT FUNCTION)

0   No event detected.

If set to 0 beforehand, indicates the occurrence of a Periodic Time Update
Interrupt event. The value 1 is retained until a 0 is written by the user.

1   After power up (POR) the Second update is selected and the UF flag is set

to 1 within one second.

Periodic Countdown Timer Flag

(see PERIODIC COUNTDOWN TIMER INTERRUPT FUNCTION)

No event detected.

0   When the IÃÖNÃÖÃÖÃÖTÃÖ and CLKOUT pins are LOW because of a Countdown Timer

event, their tRTN1 ‚Äì signals are cancelled as soon as TF flag is cleared to 0.
If set to 0 beforehand, indicates the occurrence of a Periodic Countdown

1   Timer Interrupt event. The value 1 is retained until a 0 is written by the
user.


2     AF

1     EVF

0     PORF

Alarm Flag (see ALARM INTERRUPT FUNCTION)

0   No event detected.

1   If set to 0 beforehand, indicates the occurrence of an Alarm Interrupt
event. The value 1 is retained until a 0 is written by the user.

Event Flag (see EXTERNAL EVENT INTERRUPT FUNCTION)

0   No event detected.

If set to 0 beforehand, indicates the occurrence of an External Event or a
Backup Switchover. The value 1 is retained until a 0 is written by the user.

1   The EVF flag is set to 1 when:

‚Ä¢  External event occurs and TSS = 0 and (EIE = 1 or TSE = 1).

‚Ä¢  Backup switchover occurs and TSS = 1 and (EIE = 1 or TSE = 1).
Power On Reset Flag

0   No voltage drop detected.

If set to 0 beforehand, indicates a voltage drop below VPOR. The data in the

1   device are no longer valid and all registers must be initialized. The value 1
is retained until a 0 is written by the user. At power up (POR) the value is

set to 1, the user has to write 0 to the flag to use it.

November 2021                         22/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

0Fh ‚Äì Control 1

This register is used to specify the target for the Alarm Interrupt function and the Periodic Time 
Update Interrupt
function and to select or set operations for the Periodic Countdown Timer.

Read: Always readable. Write: Can be write-protected by password.


Address

0Fh

Bit

Function
Control 1
Reset

Symbol

Conv.

R/WP

Bit 7
TRPT
0

Value

Bit 6

-
0

Bit 5
WADA
0

Bit 4
USEL
0

Bit 3
EERD
0

Description

Bit 2
TE
0

Bit 1

0

Bit 0

TD

0

Timer Repeat bit. Specifies either Single or Repeat Mode for the Periodic Countdown
Timer Interruption function

(see PERIODIC COUNTDOWN TIMER INTERRUPT FUNCTION).

Single Mode is selected. When the Countdown Timer is enabled (TE = 1) it


7     TRPT

6     -

0   will halt when it reaches zero and TE is automatically cleared.
‚Äì Default value

Repeat Mode is selected. When the Countdown Timer is enabled (TE = 1)

1   it automatically reloads the value from the Timer Value registers upon
reaching 0, and continues counting.

0   Bit not implemented. Will return a 0 when read.


5     WADA

4     USEL

3     EERD

Weekday Alarm / Date Alarm selection bit. This bit is used to specify either the
Weekday or Date as the source for the Alarm Interrupt function

(see ALARM INTERRUPT FUNCTION).

0   Weekday is the source for the Alarm Interrupt function. ‚Äì Default value

1   Date is the source for the Alarm Interrupt function.

Update Interrupt Select bit. Specifies either Second or Minute update for the Periodic
Time Update Interrupt function (see PERIODIC TIME UPDATE INTERRUPT
FUNCTION).

Writing 1 to the RESET bit or writing to the Seconds register affects the length of the
current update period (see RESET BIT FUNCTION).

0   Second update (Auto reset time tRTN2 = 500 ms). ‚Äì Default value

1   Minute update (Auto reset time tRTN2 = 7.813 ms).

EEPROM Memory Refresh Disable bit. When 1, disables the automatic refresh of the
Configuration Registers from the EEPROM Memory

(see AUTOMATIC REFRESH (ALL CONFIGURATION EEPROM ü°™ RAM)).

Refresh is active. All data in the Configuration Registers are refreshed by
the data stored in the EEPROM each 24 hours, at date increment (at the

0   beginning of the last second before midnight). The time of this automatic
refreshment is tAREFR = ~3.5 ms. Refresh is only active when RTC is not in
VBACKUP mode. ‚Äì Default value

1   Refresh is disabled.


2     TE

Periodic Countdown Timer Enable bit. This bit controls the start/stop setting for the
Periodic Countdown Timer Interruption function

(see PERIODIC COUNTDOWN TIMER INTERRUPT FUNCTION).

Stops the Periodic Countdown Timer Interrupt function. TE is also


1:0     TD

0

1

00 to 11

automatically cleared when Single Mode is selected (TRPT = 0) and when
the Countdown Timer reaches zero. ‚Äì Default value

Starts the Periodic Countdown Timer Interrupt function (a countdown starts
from the preset value set in Timer Value registers).

Timer Clock Frequency selection. Sets the countdown source clock for the
Periodic Countdown Timer Interrupt function. With this setting the Auto
reset time tRTN1 is also defined.

When the clock source has been set to Second update (1 Hz) or Minute
update (1/60 Hz), the timing of both, countdown and interrupts, is
coordinated with the clock update timing. See table below (see also
PERIODIC COUNTDOWN TIMER INTERRUPT FUNCTION).

Writing 1 to the RESET bit or writing to the Seconds register affects the
length of the current countdown period (see RESET BIT FUNCTION).

Effect when writing 1 to


TD value

00

01

10

11

Timer Clock Frequency

4096 Hz ‚Äì Default value
64 Hz

1 Hz
1/60 Hz

Countdown period

244.14 Œºs

15.625 ms

1 s

60 s

122 Œºs

7.813 ms

tRTN1

the RESET bit or when
writing to the Seconds
register

Affects current period

November 2021                         23/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

10h ‚Äì Control 2

This register is used to control the interrupt event output for the ÃÖINÃÖÃÖÃÖTÃÖ pin, the stop/start 
status of clock and calendar
operations, the interrupt controlled clock output on CLKOUT pin, the hour mode and the time stamp 
enable.

Read: Always readable. Write: Can be write-protected by password.


Address

10h

Bit

Function
Control 2
Reset

Symbol

Conv.

R/WP

Bit 7
TSE
0

Value

Bit 6
CLKIE
0

Bit 5
UIE
0

Bit 4
TIE
0

Bit 3
AIE
0

Description

Bit 2
EIE
0

Bit 1

12_24

0

Bit 0
RESET
0


7     TSE

6     CLKIE

5     UIE

4     TIE

3     AIE

Time Stamp Enable bit (see TIME STAMP FUNCTION)

0   Disables the time stamp function. ‚Äì Default value

1   Enables the Time stamp function.

Interrupt Controlled Clock Output Enable bit.

When enabled, it is possible to wake-up an external system by outputting a frequency.
(see PROGRAMMABLE CLOCK OUTPUT)

0   Disabled ‚Äì Default value

When set to 1, the clock output on CLKOUT pin is automatically enabled

1   when an interrupt occurs, based on the Clock Interrupt Mask Register
(12h) and according to clock setting defined by the FD field.

This function is disabled in VBACKUP Power state.

Periodic Time Update Interrupt Enable bit

(see PERIODIC TIME UPDATE INTERRUPT FUNCTION)

0   No interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when a Periodic Time Update

event occurs or the tRTN2 - signal on IÃÖNÃÖÃÖÃÖTÃÖ pin is cancelled. ‚Äì Default value
An interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when a Periodic Time Update

1   event occurs. The low-level output signal is automatically cleared after tRTN2

= 500 ms (Second update) or tRTN2 = 7.813 ms (Minute update).

Periodic Countdown Timer Interrupt Enable bit

(see PERIODIC COUNTDOWN TIMER INTERRUPT FUNCTION)

0   No interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when a Countdown Timer event
occurs or the tRTN1 - signal on IÃÖNÃÖÃÖÃÖTÃÖ pin is cancelled. ‚Äì Default value

An interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when a Periodic Countdown

1   Timer event occurs. The low-level output signal is automatically cleared
after tRTN1 = 122 ¬µs (TD = 00) or tRTN1 = 7.813 ms (TD = 01, 10, 11).

Alarm Interrupt Enable bit (see ALARM INTERRUPT FUNCTION)

No interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when an Alarm event occurs or0
the signal is cancelled on IÃÖNÃÖÃÖÃÖTÃÖ pin. ‚Äì Default value

An interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when an Alarm event occurs.

1   This setting is retained until the AF flag is cleared to 0 (no automatic
cancellation).

Event Interrupt Enable bit

(see EXTERNAL EVENT INTERRUPT FUNCTION and INTERRUPT SCHEME)

No interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when an External Event on EVI


2     EIE

1     12_24

0     RESET

November 2021

0   pin occurs or when an Automatic Backup Switchover occurs or the signal
is cancelled on IÃÖNÃÖÃÖÃÖTÃÖ pin. ‚Äì Default value

An interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when an External Event on EVI
pin occurs and TSS = 0, or when an Automatic Backup Switchover occurs

1   and TSS = 1. The signal on IÃÖNÃÖÃÖÃÖTÃÖ pin is retained until the EVF flag is cleared

to 0 (no automatic cancellation).

12 or 24 hour mode (see CLOCK REGISTERS and ALARM REGISTERS).

The value in the Hours register changes automatically between 12 and 24 hour mode
when 12_24 bit is changed. The value in the Hours Alarm register (08h) however must
be rewritten.

0   24 hour mode is selected (0 to 23). ‚Äì Default value

1   12 hour mode is selected (1 to 12).

Reset bit. This bit is used for a software-based time adjustment (synchronization).
(see RESET BIT FUNCTION).

0   No reset. ‚Äì Default value

Resets the clock prescaler frequencies from 8192 Hz to 1 Hz (writing to the
Seconds register has same effect). This bit always returns 0 when read.

An eventual present memorized 1 Hz update is also reset. Because the
upper stage of the prescaler is not reset (16.384 kHz) and the I¬≤C interface

1   is asynchronous, the first 1 Hz period after reset will be 0 to 244 ¬µs shorter
than 1 second.

Resetting the prescaler will have an influence on the length of the current
clock period on all subsequent peripherals (clock and calendar, CLKOUT,
timer clock, update timer clock, UNIX clock, EVI input filter).

24/116                            Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

11h ‚Äì GP Bits

This register holds the bits for general purpose use (7 bits).

Read: Always readable. Write: Can be write-protected by password.


Address

11h

Bit

Function
GP Bits
Reset

Symbol

Conv.

R/WP

Bit 7

-
0

Value

Bit 6
GP6
0

Bit 5
GP5
0

Bit 4
GP4
0

Bit 3
GP3
0

Description

Bit 2
GP2
0

Bit 1
GP1
0

Bit 0
GP0
0


7

6:0

-

GPx

0

0 or 1

Bit not implemented. Will return a 0 when read.
Register bits for general purpose use (7 bits).

12h ‚Äì Clock Interrupt Mask

This register is used to select a predefined interrupt for automatic clock output. Setting a bit to 
1 selects the
corresponding interrupt. Multiple interrupts can be selected. After power on, no interrupt is 
selected (see CLOCK
OUTPUT SCHEME).

Read: Always readable. Write: Can be write-protected by password.


Address

12h

Bit

Function

Clock Interrupt
Mask

Reset

Symbol

Conv.

R/WP

Bit 7

-
0

Value

Bit 6

-
0

Bit 5

-
0

Bit 4

-
0

Bit 3
CEIE
0

Description

Bit 2
CAIE
0

Bit 1
CTIE
0

Bit 0
CUIE
0


7:4     -

3     CEIE

2     CAIE

1     CTIE

0     CUIE

0   Bit not implemented. Will return a 0 when read.

Clock output when Event Interrupt bit.

The source for the Event Interrupt can be the External Event from EVI pin or the
Automatic Backup Switchover (see INTERRUPT SCHEME).

0   Disabled ‚Äì Default value

1   Enabled. Internal signal EI is selected.

Clock output when Alarm Interrupt bit.

0   Disabled ‚Äì Default value

1   Enabled. Internal signal AI is selected.

Clock output when Periodic Countdown Timer Interrupt bit.

0   Disabled ‚Äì Default value

1   Enabled: Internal signal TI is selected.

Clock output when Periodic Time Update Interrupt bit.

0   Disabled ‚Äì Default value

1   Enabled. Internal signal UI is selected.

November 2021                         25/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.8. EVENT CONTROL REGISTER

13h ‚Äì Event Control

This register controls the event detection on the EVI pin. Depending of the EHL bit, high or low 
level (or rising or
falling edge) can be detected. Moreover a digital glitch filtering can be applied to the EVI signal 
by selecting a
sampling period tSP in the ET field. Furthermore this register holds control functions for the Time 
Stamp data. And
the switching over to VBACKUP Power state can be selected as source for an event.

Read: Always readable. Write: Can be write-protected by password.


Address

13h

Bit

Function
Event Control
Reset

Symbol

Conv.

R/WP

Bit 7

‚óã
0

Value

Bit 6
EHL
0

Bit 5

0

Bit 4

ET

0

Bit 3

‚óã
0

Description

Bit 2
TSR
0

Bit 1
TSOW
0

Bit 0
TSS
0


7

6

5:4

3

2

‚óã

EHL

ET

‚óã
TSR

0   Read only. Always 0.

Event High/Low Level (Rising/Falling Edge) selection for detection
(see EXTERNAL EVENT INTERRUPT FUNCTION)

0   The falling edge (ET = 00) or low level (ET ‚â† 00) is regarded as the
External Event on pin EVI. ‚Äì Default value

The rising edge (ET = 00) or high level (ET ‚â† 00) is regarded as the

1   External Event on pin EVI.

Event Filtering Time set.

Applies a digital filtering to the EVI pin by sampling the EVI signal.
(see EXTERNAL EVENT INTERRUPT FUNCTION).

00   No filtering. Edge detection. ‚Äì Default value

01   Sampling period tSP = 3.9 ms (256 Hz). Level detection.

10   Sampling period tSP = 15.6 ms (64 Hz). Level detection.

11   Sampling period tSP = 125 ms (8 Hz). Level detection.

0   Read only. Always 0.

Time Stamp Reset bit (see TIME STAMP FUNCTION)

0   Disables the Time Stamp Reset. ‚Äì Default value

1   Resets all seven time stamp registers (Count TS to Year TS) to 00h; this
bit always returns 0 when read.


1     TSOW

0     TSS

Time Stamp Overwrite bit. Controls the overwrite function of the TS registers
(Seconds TS to Year TS). The counter Count TS is always working, independent of
the settings of the overwrite bit TSOW.

(see TIME STAMP FUNCTION)

The time stamp of the first occurred event is recorded and remains in TS

0   registers. To initialize or reinitialize the first event detection function, the
EVF has to be cleared. ‚Äì Default value

1   The time stamp of the last occurred event is recorded and TS registers are
overwritten. The EVF flag does not need to be cleared.

Time Stamp Source Selection bit (see TIME STAMP FUNCTION)
External Event is selected as Time Stamp source.

0   A time stamp is generated (when TSE = 1) and an interrupt is issued

(when EIE = 1) when an External Event on EVI pin occurs ‚Äì Default value
Automatic Backup Switchover is selected as Time Stamp source.

1   A time stamp is generated (when TSE = 1) and an Interrupt is issued
(when BSIE = 1) when the circuit goes to VBACKUP Power state.

November 2021                         26/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.9. TIME STAMP REGISTERS

Seven Time Stamp registers (Count TS to Year TS), (see TIME STAMP FUNCTION).

14h ‚Äì Count TS

This register contains the number of occurrences of the corresponding event in standard binary 
format. The values
range from 0 to 255.

Read only. Writing to this register has no effect.


Address

14h

Bit

Function
Count TS
Reset

Symbol

Conv.

R

Bit 7

128

0

Value

Bit 6

64

0

Bit 5

32

0

Bit 4

16

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7:0

Count TS

0 to 255

Number of occurrences of the corresponding event, coded in binary. In
case of an overflow the counter starts again with 00h

When bit TSE = 0, the counter stops counting events.

When bit TSE = 1, the counter is increased when event occurs.

The counter Count TS is always working, independent of the settings of
the overwrite bit TSOW.

The Count TS register is reset to 00h when 1 is written to the Time Stamp
Reset bit TSR (see TIME STAMP FUNCTION).

15h ‚Äì Seconds TS

This register holds a recorded Time Stamp of the Seconds register, in two binary coded decimal 
(BCD) digits. The
values are from 00 to 59.

Read only. Writing to this register has no effect.


Address

15h

Bit

Function
Seconds TS
Reset

Symbol

Conv.

R

Bit 7

‚óã
0

Value

Bit 6

40

0

Bit 5

20

0

Bit 4

10

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7

6:0

‚óã

Seconds TS

0

00 to 59

Read only. Always 0.

Holds a recorded Time Stamp of the Seconds register, coded in BCD
format. When enabled (bit TSE = 1), Depending on the setting of the
TSOW bit it contains the time stamp of the first or last occurred event.
The Seconds TS register is reset to 00h when 1 is written to the Time
Stamp Reset bit TSR.

16h ‚Äì Minutes TS

This register holds a recorded Time Stamp of the Minutes register, in two binary coded decimal 
(BCD) digits. The
values are from 00 to 59.

Read only. Writing to this register has no effect.


Address

16h

Bit

Function
Minutes TS
Reset

Symbol

Conv.

R

Bit 7

‚óã
0

Value

Bit 6

40

0

Bit 5

20

0

Bit 4

10

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7

6:0

‚óã

Minutes TS

0

00 to 59

Read only. Always 0.

Holds a recorded Time Stamp of the Minutes register, coded in BCD
format. When enabled (bit TSE = 1), Depending on the setting of the
TSOW bit it contains the time stamp of the first or last occurred event.
The Minutes TS register is reset to 00h when 1 is written to the Time
Stamp Reset bit TSR.

November 2021                         27/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

17h ‚Äì Hours TS

This register holds a recorded Time Stamp of the Hours register, in two binary coded decimal (BCD) 
digits. If the
12_24 bit is cleared (default) (see STATUS AND CONTROL REGISTERS, 10h ‚Äì Control 2) the values will 
be from
0 to 23. If the 12_24 bit is set, the hour values will range from 1 to 12 and the AMPM bit will be 
0 for AM hours and 1
for PM hours.

Read only. Writing to this register has no effect.


Address

17h

Function

Hours TS

(24 hour mode)
‚Äì default value
Hours TS

(12 hour mode)
Reset

Conv.

R

Bit 7

‚óã

0

Bit 6

‚óã

0

Bit 5

20

AMPM
0

Bit 4

10

10

0

Bit 3

8

8

0

Bit 2

4

4

0

Bit 1

2

2

0

Bit 0

1

1

0

Hours TS (24 hour mode) ‚Äì default value

Bit      Symbol            Value                 Description

7:6      ‚óã                0    Read only. Always 0.

Holds a recorded Time Stamp of the Hours register, coded in BCD format.


5:0

Hours TS (24 hour mode)
‚Äì default value

0 to 23

When enabled (bit TSE = 1), Depending on the setting of the TSOW bit it
contains the time stamp of the first or last occurred event.

The Hours TS register is reset to 00h when 1 is written to the Time Stamp
Reset bit TSR.

Hours TS (12 hour mode)

Bit      Symbol            Value                 Description

7:6      ‚óã                0    Read only. Always 0.

0   AM hours, from the recorded Time Stamp of the Hours register.


5

4:0

AMPM

Hours TS (12 hour mode)

1

1 to 12

PM hours, from the recorded Time Stamp of the Hours register.

Holds a recorded Time Stamp of the Hours register, coded in BCD format.
When enabled (bit TSE = 1), Depending on the setting of the TSOW bit it
contains the time stamp of the first or last occurred event.

The Hours TS register is reset to 00h when 1 is written to the Time Stamp
Reset bit TSR.

18h ‚Äì Date TS

This register holds a recorded Time Stamp of the Date register, in two binary coded decimal (BCD) 
digits. The values
will range from 01 to 31.

Read only. Writing to this register has no effect.


Address

18h

Bit

Function
Date TS
Reset

Symbol

Conv.

R

Bit 7

‚óã
0

Value

Bit 6

‚óã
0

Bit 5

20

0

Bit 4

10

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7:6

5:0

‚óã

Date TS

0

01 to 31

Read only. Always 0.

Holds a recorded Time Stamp of the Date register, coded in BCD format.
When enabled (bit TSE = 1), Depending on the setting of the TSOW bit it
contains the time stamp of the first or last occurred event.

The Date TS register is reset to 00h when 1 is written to the Time Stamp
Reset bit TSR.

After POR or when reset with TSR bit and when a Time Stamp is recorded,
the value 00 will be replaced by a valid value (01 to 31).

November 2021                         28/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

19h ‚Äì Month TS

This register holds a recorded Time Stamp of the Month register, in two binary coded decimal (BCD) 
digits. The
values will range from 01 to 12.

Read only. Writing to this register has no effect.


Address

19h

Bit

Function
Month TS
Reset

Symbol

Conv.

R

Bit 7

‚óã
0

Value

Bit 6

‚óã
0

Bit 5

‚óã
0

Bit 4

10

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7:5

4:0

‚óã

Month TS

0

01 to 12

Read only. Always 0.

Holds a recorded Time Stamp of the Month register, coded in BCD format.
When enabled (bit TSE = 1), Depending on the setting of the TSOW bit it
contains the time stamp of the first or last occurred event.

The Month TS register is reset to 00h when 1 is written to the Time Stamp
Reset bit TSR.

After POR or when reset with TSR bit and when a Time Stamp is recorded,
the value 00 will be replaced by a valid value (01 to 12).

1Ah ‚Äì Year TS

This register holds a recorded Time Stamp of the Year register, in two binary coded decimal (BCD) 
digits. Values will
range from 00 to 99.

Read only. Writing to this register has no effect.


Address

1Ah

Bit

Function
Year TS
Reset

Symbol

Conv.

R

Bit 7

80

0

Value

Bit 6

40

0

Bit 5

20

0

Bit 4

10

0

Bit 3

8

0

Description

Bit 2

4

0

Bit 1

2

0

Bit 0

1

0


7:0

Year TS

00 to 99

Holds a recorded Time Stamp of the Year register, coded in BCD format.
When enabled (bit TSE = 1), Depending on the setting of the TSOW bit it
contains the time stamp of the first or last occurred event.

The Year TS register is reset to 00h when 1 is written to the Time Stamp
Reset bit TSR.

November 2021                         29/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.10. UNIX TIME REGISTERS

The UNIX Time counter is a 32-bit counter with the value in binary format. The counter will 
roll-over to 00000000h
when reaching FFFFFFFFh. The 4 counter registers are fully readable and writable. The counter 
source clock is the
digitally offset compensated 1 Hz clock frequency. The UNIX Time counter increment is inhibited 
during I2C write
access to the 4 UNIX Time registers to allow coherent data values (see UNIX TIME COUNTER and 
SETTING AND
READING THE TIME).

Read: Always readable. Write: Can be write-protected by password.

1Bh ‚Äì UNIX Time 0

Bit 0 to 7 from 32-bit UNIX Time counter.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


1Bh

Bit

UNIX Time 0
Reset

Symbol

R/WP

UNIX 0 [7:0]

0     0     0     0     0     0     0     0

Value                Description


7:0

UNIX 0 [7:0]

00h to
FFh

Bit 0 to 7 from 32-bit UNIX counter.

1Ch ‚Äì UNIX Time 1

Bit 8 to 15 from 32-bit UNIX Time counter.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


1Ch

Bit

UNIX Time 1
Reset

Symbol

R/WP

UNIX 1 [15:8]

0     0     0     0     0     0     0     0

Value                Description


7:0

UNIX 1 [15:8]

00h to
FFh

Bit 8 to 15 from 32-bit UNIX counter.

1Dh ‚Äì UNIX Time 2

Bit 16 to 23 from 32-bit UNIX Time counter.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


1Dh

Bit

UNIX Time 2
Reset

Symbol

R/WP

UNIX 2 [23:16]

0     0     0     0     0     0     0     0

Value                Description


7:0

UNIX 2 [23:16]

00h to
FFh

Bit 16 to 23 from 32-bit UNIX counter.

1Eh ‚Äì UNIX Time 3

Bit 24 to 31 from 32-bit UNIX Time counter.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


1Eh

Bit

UNIX Time 3
Reset

Symbol

R/WP

UNIX 3 [31:24]

0     0     0     0     0     0     0     0

Value                Description


7:0

UNIX 3 [31:24]

00h to
FFh

Bit 24 to 31 from 32-bit UNIX counter.

November 2021                         30/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.11. RAM REGISTERS

Two free RAM bytes, which can be used for any purpose, for example, status bytes of the system.

1Fh ‚Äì User RAM 1

This register holds the bits for general purpose use.

Read: Always readable. Write: Can be write-protected by password.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


1Fh

Bit

User RAM 1
Reset

Symbol

R/WP

RAM 1

0     0     0     0     0     0     0     0

Value                Description


7:0

RAM 1

00h to
FFh

RAM 1 data

20h ‚Äì User RAM 2

This register holds the bits for general purpose use.

Read: Always readable. Write: Can be write-protected by password.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


20h

Bit

User RAM 2
Reset

Symbol

R/WP

RAM 2

0     0     0     0     0     0     0     0

Value                Description


7:0

RAM 2

00h to
FFh

RAM 2 data

November 2021                         31/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.12. PASSWORD REGISTERS

After a Power up and the first refreshment time tPREFR = ~66 ms, the Password PW registers are 
reset to 00h.

When enabled by writing 255 into the EEPROM Password Enable register EEPWE (EEPROM 30h) the Password
PW registers are used to be written with the 32-Bit Password necessary to be able to write in all 
writable registers
that have the convention WP (time, control, user RAM, configuration EEPROM and user EEPROM 
registers). The
32-Bit Password PW is compared to the 32 bits stored in the RAM mirror of the EEPROM Password EEPW 
(see
EEPROM PASSWORD REGISTERS).

21h ‚Äì Password 0

Bit 0 to 7 from 32-bit Password.
Write only. Returns 0 when read.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


21h

Bit

Password 0
Reset

Symbol

W                    PW 0 [7:0]

0     0     0     0     0     0     0     0

Value                Description


7:0

PW 0 [7:0]

00h to
FFh

Bit 0 to 7 from 32-bit Password

22h ‚Äì Password 1

Bit 8 to 15 from 32-bit Password.
Write only. Returns 0 when read.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


22h

Bit

Password 1
Reset

Symbol

W                    PW 1 [15:8]

0     0     0     0     0     0     0     0

Value                Description


7:0

PW 1 [15:8]

00h to
FFh

Bit 8 to 15 from 32-bit Password

23h ‚Äì Password 2

Bit 16 to 23 from 32-bit Password.
Write only. Returns 0 when read.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


23h

Bit

Password 2
Reset

Symbol

W                   PW 2 [23:16]

0     0     0     0     0     0     0     0

Value                Description


7:0

PW 2 [23:16]

00h to
FFh

Bit 16 to 23 from 32-bit Password

24h ‚Äì Password 3

Bit 24 to 31 from 32-bit Password.
Write only. Returns 0 when read.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


24h

Bit

Password 3
Reset

Symbol

W                   PW 3 [31:24]

0     0     0     0     0     0     0     0

Value                Description


7:0

PW 3 [31:24]

00h to
FFh

Bit 24 to 31 from 32-bit Password

November 2021                         32/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.13. EEPROM MEMORY CONTROL REGISTERS

See also EEPROM READ/WRITE.

25h ‚Äì EE Address

This register holds the Address used for read or write from/to a single EEPROM Memory byte.
Read: Always readable. Write: Can be write-protected by password.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


25h

Bit

EE Address
Reset

Symbol

R/WP

EEADDR

0     0     0     0     0     0     0     0

Value                Description


7:0

EEADDR

00h to
FFh

Address for direct read or write one EEPROM Memory byte.

26h ‚Äì EE Data

This register holds the Data that are read from, or that are written to a single EEPROM Memory byte.
Read: Always readable. Write: Can be write-protected by password.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


26h

Bit

EE Data
Reset

Symbol

R/WP

EEDATA

X     X     X     X     X     X     X     X

Value                Description


7:0

EEDATA

00h to
FFh

Data from direct read or for direct write to one EEPROM Memory byte.

November 2021                         33/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

27h ‚Äì EE Command

This register must be written with specific values, in order to Update or Refresh all 
(readable/writeable) Configuration
EEPROM registers or to read or write from/to a single EEPROM Memory byte.

Before using this commands, the automatic refresh function has to be disabled (EERD = 1) and the 
busy status bit
EEbusy has to indicate, that the last transfer has been finished (EEbusy = 0). Before entering the 
command 11h,
12h, 21h or 22h, EECMD has to be written with 00h.

Write only. Can be write-protected by password.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


27h

Bit

EE Command
Reset

Symbol

WP                    EECMD

0     0     0     0     0     0     0     0

Value                Description

Commands for EEPROM Memory (see EEPROM READ/WRITE)
00h  First command must be 00h. ‚Äì Default value

UPDATE (ALL CONFIGURATION RAM ü°™ EEPROM).

When writing a value of 11h, data from all Configuration RAM mirror bytes


7:0

EECMD

11h

12h

21h

22h

(address 30h to 37h) are written (stored) into the corresponding
Configuration EEPROM bytes. See also USE OF THE CONFIGURATION
REGISTERS.

REFRESH (ALL CONFIGURATION EEPROM ü°™ RAM).

When writing a value of 12h, data from all Configuration EEPROM bytes
are read and copied into the corresponding Configuration RAM mirror
bytes (address 30h to 37h). Functions become active as soon as the RAM
bytes are written.

WRITE TO ONE EEPROM BYTE (EEDATA (RAM) ü°™ EEPROM).

When writing a value of 21h, data from the EEDATA (RAM) byte are
written (stored) into the EEPROM byte with the address specified in the
EEADDR byte. For Configuration EEPROM (address 30h to 37h) and User
EEPROM (address 00h to2Ah).

READ ONE EEPROM BYTE (EEPROM ü°™ EEDATA (RAM)).

When writing a value of 22h, data from the EEPROM byte with the address
specified in EEADDR byte are read and copied into the EEDATA (RAM)
byte. For Configuration EEPROM (address 30h to 37h) and User EEPROM
(address 00h to2Ah).

November 2021                         34/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.14. ID REGISTER

28h ‚Äì ID

This register holds the 4 bit Hardware Identification number (HID) and the 4 bit Version 
Identification number (VID).
The ID can be used to monitor a hardware modification and the version in the production line.

Read only. Writing to this register has no effect.


Address

28h

Function

ID

Conv.

R

Bit 7

Bit 6

HID

Bit 5

Bit 4

Bit 3

Bit 2

VID

Bit 1

Bit 0


Bit

7:4

3:0

Reset

Symbol
HID
VID

Preconfigured Value

Value                Description

0 to 15  Hardware Identification number.

0 to 15  Version Identification number.

Preconfigured Value

3.15. CONFIGURATION EEPROM WITH RAM MIRROR REGISTERS

All Configuration EEPROM at addresses 2Bh and 30h to 37h are memorized in the EEPROM and mirrored 
in the
RAM. Functions become active as soon as the RAM mirror bytes are written. See also USE OF THE
CONFIGURATION REGISTERS.

3.15.1. EEPROM RESERVED

2Bh ‚Äì EEPROM RESERVED

This preconfigured (Factory Calibrated) value must not be overwritten.
Read: Always readable. Write: Can be write-protected by password.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


2Bh

EEPROM

Reserved

R/WP

RESERVED (Must not be overwritten)


Bit

7:0

Default value on delivery

Symbol

RESERVED

Preconfigured (Factory Calibrated)

Value                Description

Preconfigured (Factory Calibrated) ‚Äì Must not be overwritten.

3.15.2. EEPROM PASSWORD ENABLE REGISTER

After a Power up and the first refreshment time tPREFR = ~66 ms, the Password Enable value EEPWE is 
copied from
the EEPROM to the corresponding RAM mirror. The default value preset on delivery is 00h.

30h ‚Äì EEPROM Password Enable

Read: Always readable. Write: Can be write-protected by password.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


30h

EEPROM

Password Enable

R/WP

EEPWE


Bit

Default value on delivery

Symbol

0     0     0

Value

0     0     0     0     0

Description


7:0

EEPWE

0 to 254

255

EEPROM Password Enable
Password function disabled.

When writing a value not equal 255, the password function is disabled.

‚Äì 00h is the default value preset on delivery
Password function enabled.

When writing a value of 255, the Password registers (21h to 24h) can be
used to enter the 32-bit Password.

November 2021                         35/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.15.3. EEPROM PASSWORD REGISTERS

After a Power up and the first refreshment time tPREFR = ~66 ms, the EEPROM Password registers 0 to 
3 with the 32-
bit EEPROM Password are copied from the EEPROM to the corresponding RAM mirror. The default values 
preset
on delivery are 00h.

31h ‚Äì EEPROM Password 0

Bit 0 to 7 from 32-bit EEPROM Password.

RAM mirror is Write only. Returns 0 when read. EEPROM can be READ when Unlocked.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


31h

EEPROM

Password 0

*WP

EEPW 0 [7:0]


Bit

Default value on delivery

Symbol

0     0     0

Value

0     0     0     0     0

Description


7:0

EEPW 0 [7:0]

00h to
FFh

Bit 0 to 7 from 32-bit EEPROM Password

* EEPW registers: RAM mirror is Write only. Returns 0 when read. EEPROM can be READ when Unlocked.

32h ‚Äì EEPROM Password 1

Bit 8 to 15 from 32-bit EEPROM Password.

RAM mirror is Write only. Returns 0 when read. EEPROM can be READ when Unlocked.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


32h

EEPROM

Password 1

*WP

EEPW 1 [15:8]


Bit

Default value on delivery

Symbol

0     0     0

Value

0     0     0     0     0

Description


7:0

EEPW 1 [15:8]

00h to
FFh

Bit 8 to 15 from 32-bit EEPROM Password

* EEPW registers: RAM mirror is Write only. Returns 0 when read. EEPROM can be READ when Unlocked.

33h ‚Äì EEPROM Password 2

Bit 16 to 23 from 32-bit EEPROM Password.

RAM mirror is Write only. Returns 0 when read. EEPROM can be READ when Unlocked.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


33h

EEPROM

Password 2

*WP

EEPW 2 [23:16]


Bit

Default value on delivery

Symbol

0     0     0

Value

0     0     0     0     0

Description


7:0

EEPW 2 [23:16]

00h to
FFh

Bit 16 to 23 from 32-bit EEPROM Password

* EEPW registers: RAM mirror is Write only. Returns 0 when read. EEPROM can be READ when Unlocked.

34h ‚Äì EEPROM Password 3

Bit 24 to 31 from 32-bit EEPROM Password.

RAM mirror is Write only. Returns 0 when read. EEPROM can be READ when Unlocked.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


34h

EEPROM

Password 3

*WP

EEPW 3 [31:24]


Bit

Default value on delivery

Symbol

0     0     0

Value

0     0     0     0     0

Description


7:0

EEPW 3 [31:24]

00h to
FFh

Bit 24 to 31 from 32-bit EEPROM Password

* EEPW registers: RAM mirror is Write only. Returns 0 when read. EEPROM can be READ when Unlocked.

November 2021                         36/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.15.4. EEPROM CLKOUT REGISTER

35h ‚Äì EEPROM Clkout

A programmable square wave output is available at CLKOUT pin. Clock output can be controlled by the 
CLKOE bit
(or by the CLKF flag) (see PROGRAMMABLE CLOCK OUTPUT). After a Power up and the first refreshment 
time
tPREFR = ~66 ms, the EEPROM Clkout values CLKOE, CLKSY, PORIE and FD are copied from the EEPROM to 
the
corresponding RAM mirror. The default values preset on delivery are: CLKOUT = enabled, 
synchronization enabled,
F = 32.768 kHz.

Read: Always readable. Write: Can be write-protected by password.


Address

Function

EEPROM Clkout

Conv.

R/WP

Bit 7

CLKOE

Bit 6

CLKSY

Bit 5

-

Bit 4

-

Bit 3

PORIE

Bit 2

Bit 1

FD

Bit 0


35h

Bit

Default value on delivery

Symbol

1    1

Value

0     0     0     0     0     0

Description


7

6

5:4

3

CLKOE

CLKSY

-

PORIE

CLKOUT Enable bit (see PROGRAMMABLE CLOCK OUTPUT)

0   The CLKOUT pin is LOW (if CLKF flag is 0).

1   The clock output signal on CLKOUT pin is enabled. ‚Äì Default value on
delivery

CLKOUT Synchronized enable/disable (see SYNCHRONIZED ENABLE/DISABLE)

0   Disabled

1   Enables the Synchronized enable/disable (by CLKOE bit or CLKF flag) of
the CLKOUT frequency. ‚Äì Default value on delivery

0   Bit not implemented. Will return a 0 when read.

Power On Reset Interrupt Enable bit

(see POWER ON RESET INTERRUPT FUNCTION)

0   No interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when a Power On Reset occurs
or the signal is cancelled on IÃÖNÃÖÃÖÃÖTÃÖ pin. ‚Äì Default value on delivery

An interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when a Power On Reset occurs.


2:0     FD

1

000 to

111

This setting is retained until the PORF flag is cleared to 0 (no automatic
cancellation).

CLKOUT Frequency Selection (see CLKOUT FREQUENCY SELECTION)


FD value

CLKOUT Frequency Selection

Effect when writing 1 to the RESET bit or when
writing to the Seconds register


000

001

010

011

100

101

110

111

32.768 kHz ‚Äì Default value on delivery
8192 Hz (1)

1024 Hz (1)

64 Hz (1)

32 Hz (1)

1 Hz (1)

Predefined periodic countdown timer interrupt (1) (2)

CLKOUT = LOW

No effect

Affects current period
Affects current period
Affects current period
Affects current period
Affects current period
Affects current period
No effect

(1) 8192 Hz to 1 Hz clock pulses and the timer interrupt pulses can be affected by compensation 
pulses
(see FREQUENCY OFFSET CORRECTION).

(2) CLKSY bit has no effect.

November 2021                         37/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.15.5. EEPROM OFFSET REGISTER

The registers EEPROM Offset and EEPROM Backup hold the EEOffset value to digitally compensate the 
initial
frequency deviation of the 32.768 kHz oscillator or for aging adjustment. EEOffset defines 
correction pulses in steps.
Each pulse introduces a deviation of 0.9537 ppm, the maximum range is from +243.2 ppm to -244.1 
ppm. The value
of 0.9537 ppm is based on a nominal 32.768 kHz clock (see FREQUENCY OFFSET CORRECTION). The
preconfigured (Factory Calibrated) EEOffset value may be changed by the user.

36h ‚Äì EEPROM Offset

This register holds the upper 8 bits of the EEOffset value. The preconfigured (Factory Calibrated) 
EEOffset value
may be changed by the user. The least significant bit (LSB) of the EEOffset value is located in 
register EEPROM
Backup (37h) (see also EEPROM BACKUP REGISTER).

After a Power up and the first refreshment time tPREFR = ~66 ms, the EEPROM Offset value is copied 
from the
EEPROM to the corresponding RAM mirror.

Read: Always readable. Write: Can be write-protected by password.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


36h

EEPROM Offset

R/WP

EEOffset [8:1]


Bit

Default value on delivery

Symbol

Preconfigured (Factory Calibrated)

Value                Description


7:0

EEOffset [8:1]

00h to
FFh

Upper 8 bits of the EEOffset value. See table below.


Address

37h

Function

EEPROM Backup

Conv.

R/WP

Bit 7

EEOffset
[0]

Bit 6

BSIE

Bit 5

TCE

Bit 4

FEDE

Bit 3

BSM

Bit 2

Bit 1

TCR

Bit 0


Bit

Default value on delivery

Symbol

Preconfi-

gured   0

Value

0     1     0     0     0     0

Description


7     EEOffset [0]

0 or 1

LSB of the EEOffset value. See table below.


EEOffset (9 bits):

EEOffset [8:0]    EEOffset correction value in

decimal

Correction pulses
in steps

CLKOUT frequency correction
in ppm(*)


011111111

011111110

:
000000001

000000000

111111111

111111110

:
100000001

100000000

255

254

:
1

0

511

510

:
257

256

255

254

:
1

0

-1

-2

:

-255

-256

243.187

242.233

:
0.954

0.000

-0.954

-1.907

:

-243.187

-244.141

(*) Each correction pulse corresponds to 1 / (16384 √ó 64) = 0.9537 ppm.

The frequency deviation measured at CLKOUT pin can be compensated by computing the correction value 
EEOffset and writing it
into the EEPROM Offset and EEPROM Backup registers (see FREQUENCY OFFSET CORRECTION).

November 2021                         38/116                             Rev. 1.4


Micro Crystal

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.15.6. EEPROM BACKUP REGISTER

37h ‚Äì EEPROM Backup

This register is used to control the switchover function and the trickle charger and it holds bit 0 
(LSB) of the EEOffset
value. The preconfigured (Factory Calibrated) EEOffset value may be changed by the user.

After a Power up and the first refreshment time tPREFR = ~66 ms, the EEPROM Backup value is copied 
from the
EEPROM to the corresponding RAM mirror.

Read: Always readable. Write: Can be write-protected by password.


Address

37h

Function

EEPROM Backup

Conv.

R/WP

Bit 7

EEOffset
[0]

Bit 6

BSIE

Bit 5

TCE

Bit 4

FEDE

Bit 3

BSM

Bit 2

Bit 1

TCR

Bit 0


Bit

Default value on delivery

Symbol

Preconfi-

gured   0

Value

0     1     0     0     0     0

Description


7     EEOffset [0]

6     BSIE

5     TCE

0 to 1

0

1

0

1

LSB of the EEOffset value (see EEPROM OFFSET REGISTER).

Backup Switchover Interrupt Enable bit

(see AUTOMATIC BACKUP SWITCHOVER FUNCTION and
AUTOMATIC BACKUP SWITCHOVER INTERRUPT FUNCTION)

No interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when an Automatic Backup
Switchover occurs or the signal is cancelled on IÃÖNÃÖÃÖÃÖTÃÖ pin. ‚Äì Default value on
delivery

An interrupt signal is generated on IÃÖNÃÖÃÖÃÖTÃÖ pin when an Automatic Backup
Switchover occurs. This setting is retained until the BSF flag is cleared to 0
(no automatic cancellation).

Trickle Charger Enable bit (see TRICKLE CHARGER)
Disabled ‚Äì Default value on delivery

Enabled


4     FEDE

Fast Edge Detection Enable bit

(see AUTOMATIC BACKUP SWITCHOVER FUNCTION and
AUTOMATIC BACKUP SWITCHOVER INTERRUPT FUNCTION)

0   Disabled.

FEDE should always be set to 1.

When the FEDE bit is 1, the Fast Edge Detection for the Automatic Backup

1   Switchover function is enabled. A voltage on VDD power supply pin with an
increasing or falling edge with a slew rate typically greater than 7 V/ms can

be correctly detected and the Automatic Backup Switchover function is
adapted to this particular situation. ‚Äì Default value on delivery

Backup Switchover Mode

(see AUTOMATIC BACKUP SWITCHOVER FUNCTION and
AUTOMATIC BACKUP SWITCHOVER INTERRUPT FUNCTION)


3:2

1:0

BSM

TCR

To read/write from/to the EEPROM, the user has to disable the Backup Switchover
function by setting the BSM field to 00 or 10 (see routine in EEPROM READ/WRITE
CONDITIONS)

00   Switchover Disabled. ‚Äì Default value on delivery

01  Enables the Direct Switching Mode (DSM).

Switchover when VDD < VBACKUP.

10  Switchover Disabled.

11  Enables the Level Switching Mode (LSM).

Switchover when VDD < VTH:LSM (2.0 V) AND VBACKUP > VTH:LSM (2.0 V).

Trickle Charger Series Resistance (see TRICKLE CHARGER)
00   TCR 3 k‚Ñ¶ ‚Äì Default value on delivery

01  TCR 5 k‚Ñ¶

10  TCR 9 k‚Ñ¶

11  TCR 15 k‚Ñ¶

November 2021                         39/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.16. USER EEPROM

00h ‚Äì 2Ah ‚Äì User EEPROM

43 Bytes of User EEPROM for general purpose storage are provided.
Read: Always readable. Write: Can be write-protected by password.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


00h to 2Ah

User EEPROM

R/WP

43 Bytes of non-volatile User EEPROM

3.17. RESERVED EEPROM

2Ch ‚Äì 2Fh and 38h ‚Äì 3Fh ‚Äì Reserved EEPROM

Protected. Writing to this register has no effect.


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


2Ch to 2Fh
38h to 3Fh

Reserved
EEPROM

Reserved
EEPROM

Prot.
Prot.

RESERVED
RESERVED

November 2021                         40/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

3.18. REGISTER RESET VALUES SUMMARY

Reset values; RAM, Address 00h to 3Fh:

Address     Function      Conv.   Bit 7   Bit 6   Bit 5   Bit 4   Bit 3   Bit 2   Bit 1   Bit 0

00h      Seconds       R/WP    0     0     0     0     0     0     0     0

01h      Minutes       R/WP    0     0     0     0     0     0     0     0

02h      Hours (24h / 12h)   R/WP    0     0     0     0     0     0     0     0

03h      Weekday      R/WP    0     0     0     0     0     0     0     0

04h      Date         R/WP    0     0     0     0     0     0     0     1

05h      Month        R/WP    0     0     0     0     0     0     0     1

06h      Year         R/WP    0     0     0     0     0     0     0     0

07h      Minutes Alarm    R/WP    1     0     0     0     0     0     0     0


08h

09h

0Ah
0Bh
0Ch

0Dh

0Eh
0Fh
10h
11h
12h
13h
14h
15h
16h

17h

18h
19h
1Ah
1Bh
1Ch
1Dh
1Eh
1Fh
20h
21h
22h
23h
24h
25h
26h
27h

Hours Alarm
(24h / 12h)
Weekday Alarm /
Date Alarm

Timer Value 0

Timer Value 1

Timer Status 0

Timer Status 1
shadow
Status

Control 1

Control 2
GP Bits

Clock Int. Mask
Event Control
Count TS
Seconds TS

Minutes TS
Hours TS
(24h / 12h)

Date TS
Month TS
Year TS
UNIX Time 0

UNIX Time 1

UNIX Time 2

UNIX Time 3

User RAM 1

User RAM 2

Password 1

Password 2

Password 3

Password 4
EE Address
EE Data

EE Command

R/WP

R/WP

R/WP
R/WP
R

R

R/WP
R/WP
R/WP
R/WP
R/WP
R/WP
R

R
R

R

R
R
R

R/WP
R/WP
R/WP
R/WP
R/WP
R/WP
W

W
W
W

R/WP
R/WP
WP

1    0

1    0

0    0

0    0

0    0

0    0

1 ü°™ 0   0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

0    0

X    X

0    0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0    0 ü°™ 1    0     0     0     1

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

0     0     0     0     0     0

X     X     X     X     X     X

0     0     0     0     0     0


28h

29h and 2Ah
2Ch to 2Fh
38h to 3Fh

X = not defined

ID
RESERVED
RESERVED
RESERVED

R

Prot.
Prot.
Prot.

Preconfigured Value

XXh
XXh
XXh

Preconfigured Value

November 2021                         41/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

Default values on delivery; Configuration EEPROM with RAM mirror, Address 2Bh and 30h to 37h:


Address

Function

Conv.

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0


2Bh
30h
31h
32h
33h
34h
35h
36h
37h

EEPROM

Reserved
EEPROM PW

Enable

EEPROM

Password 0
EEPROM

Password 1

EEPROM

Password 2
EEPROM

Password 3

EEPROM

Clkout
EEPROM

Offset

EEPROM

Backup

R/WP
R/WP
WP
WP
WP
WP
R/WP
R/WP
R/WP

Preconfigured (Factory Calibrated) ‚Äì Must not be overwritten.

0     0     0     0     0     0     0     0

0     0     0     0     0     0     0     0

0     0     0     0     0     0     0     0

0     0     0     0     0     0     0     0

0     0     0     0     0     0     0     0

1     1     0     0     0     0     0     0

0     0     0     0     0     0     0     0

0     0     0     1     0     0     0     0

Default values on delivery; User EEPROM, Address 00h to 2Ah:

Address     Function      Conv.   Bit 7   Bit 6   Bit 5   Bit 4   Bit 3   Bit 2   Bit 1   Bit 0


00h to 2Ah

User EEPROM
(43 Bytes)

R/WP

00h

Default values on delivery; Reserved EEPROM, Address 2Ch to 2Fh and 38h to 3Fh:

Address     Function      Conv.   Bit 7   Bit 6   Bit 5   Bit 4   Bit 3   Bit 2   Bit 1   Bit 0


2Ch to 2Fh
38h to 3Fh

X = not defined

Reserved
EEPROM

Reserved
EEPROM

Prot.
Prot.

XXh
XXh

November 2021                         42/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

RV-3028-C7 reset values after power on (RAM) and default values on delivery (EEPROM):

RAM, reset values:

Time (hh:mm:ss)      =  00:00:00

Date (YY-MM-DD)     =  00-01-01

Weekday          =  0

Hour mode         =  24 hour mode (0 to 23)

Count TS           =  0      (read only)
Time TS (hh:mm:ss)     =  00:00:00  (read only)
Date TS (YY-MM-DD)    =  00-00-00  (read only)
UNIX Time          =  00000000h

Alarm function       =  disabled, weekday is selected

Timer function        =  disabled, Timer Clock Frequency = 4096 Hz, Single Mode selected
Update function       =  Second update is selected

External Event function   = Falling edge is regarded as External Event on pin EVI,
first event is recorded

Time Stamp function      disabled, External Event selected, Time Stamp overwrite disabled,

Time Stamp Reset disabled
EEPROM Memory Refresh = enabled

Interrupts          =  disabled

EEbusy status bit      =  1 ü°™ 0 (1 for the time tPREFR = ~66 ms, then it is cleared to 0 automatically)
UF Flag 
         =  0 ü°™ 1 (Second update is selected)

EVF Flag          =  0

PORF Flag         =  1    (can be cleared by writing 0 to the bit)
Int. Controlled Clock     =  disabled, no interrupt selected

Password          =  00000000h      (write only)

EE Address         =  00h

EE Data           =  XXh

EE Command        =  00h (first command)  (write only)

ID              =  Preconfigured Value  (read only)
General Purpose Bits    =  0    (7 bits)

User RAM 1, 2       =  00h  (2 bytes)

Configuration EEPROM with RAM mirror, default values on delivery:

EEPROM Reserved (2Bh)  =  Preconfigured Value ‚Äì Must not be overwritten
EEPROM Password Enable =  disabled

EEPROM Password    =  00000000h (write only)

CLKOUT          =  enabled, synchronization enabled, F = 32.768 kHz
Power On Reset Interrupt  =  disabled

EEOffset value        =  Preconfigured Value (9 bits)  (may be changed by the user)
Backup Switchover     =  disabled, interrupt disabled, Fast Edge Detection enabled
Trickle charger        =  disabled, TCR 3 k‚Ñ¶ is selected

User EEPROM, default values on delivery:

User EEPROM (43 Bytes) = 00h

Reserved EEPROM, Address 2Ch to 2Fh and 38h to 3Fh, default values on delivery:

Reserved EEPROM    =  XXh (protected)

November 2021                         43/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4. DETAILED FUNCTIONAL DESCRIPTION

4.1. POWER ON RESET (POR)

The power on reset (POR) is generated at start-up (see POWER ON AC ELECTRICAL CHARACTERISTICS). All
RAM registers including the Counter Registers are initialized to their reset values and the 
Configuration EEPROM
registers with the RAM mirror registers are set to their preset default values. At power up a 
refresh of the RAM mirror
values by the values in the Configuration EEPROM is automatically generated. The time of this first 
refreshment is
tPREFR = ~66 ms. The EEbusy bit in the Status register (0Eh) can be used to monitor the status of 
the refreshment
(see REGISTER RESET VALUES SUMMARY).

The Power On Reset Flag PORF indicates the occurrence of a voltage drop of the internal power 
supply voltage
below VPOR threshold needed to cause the generation of the device POR. A PORF value of 1 indicates 
that the
voltage had dropped below the threshold level VPOR and that the time information is corrupted. The 
value 1 is retained
until a 0 is written by the user.

When PORIE bit (EEPROM 35h) is set and the PORF flag was cleared beforehand, an interrupt signal on 
ÃÖINÃÖÃÖÃÖTÃÖ pin
can be generated when a Power On Reset occurs (see POWER ON RESET INTERRUPT FUNCTION).

November 2021                         44/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.2. AUTOMATIC BACKUP SWITCHOVER FUNCTION

Basic Hardware Definitions:

‚Ä¢  The RV-3028-C7 has two power supply pins.

o VDD    is the main power supply input pin.

o VBACKUP  is the backup power supply input pin.

‚Ä¢  VTH:LSM (typical value 2.0 V) is the backup switchover threshold voltage in Level Switching 
Mode.

‚Ä¢  A debounce logic provides a debounce time tDEB of 122 Œºs to 183 Œºs, which will filter VDD 
oscillation when the
backup switchover will switch back from VBACKUP to VDD. I¬≤C access is possible in VDD Power state 
after the
debounce time tDEB.

‚Ä¢  The FEDE bit (EEPROM 37h) should always be set to 1, so that Fast Edge Detection (‚â• 7 V/ms) is 
always
enabled. ‚Äì Default value on delivery

Switchover Modes:

The RV-3028-C7 has three backup switchover modes. The desired mode can be selected by the BSM field 
in the
Configuration EEPROM, see EEPROM BACKUP REGISTER:

‚Ä¢  BSM = 00  Switchover disabled (default value on delivery), see SWITCHOVER DISABLED.

‚Ä¢  BSM = 01  Direct Switching Mode (DSM): when VDD < VBACKUP, switchover occurs from VDD to 
VBACKUP
without requiring VDD to drop below VTH:LSM (2.0 V), see DIRECT SWITCHING MODE (DSM).

‚Ä¢  BSM = 10  Switchover disabled, see SWITCHOVER DISABLED.

‚Ä¢  BSM = 11  Level Switching Mode (LSM): when VDD < VTH:LSM (2.0 V) AND VBACKUP > VTH:LSM (2.0 
V),

switchover occurs from VDD to VBACKUP, see LEVEL SWITCHING MODE (LSM).

Function Overview:

When a valid backup switchover condition occurs (Direct or Level Switching Mode) and the internal 
power supply
switches to the VBACKUP voltage (VBACKUP Power state) the following sequence applies:

‚Ä¢  The Backup Switch Flag BSF is set and, if BSIE bit is 1 (EEPROM 37h), an interrupt will be 
generated on
INT pin and remains as long as BSF is not cleared to 0. If BSIE is 0 no interrupt will be generated 
(see
AUTOMATIC BACKUP SWITCHOVER INTERRUPT FUNCTION).

‚Ä¢  The I2C-bus interface is automatically disabled (high impedance) and reset.

‚Ä¢  EVI input remains active for interrupt generation, interrupt driven clock output and time stamp 
function

‚Ä¢  CLKOUT pin is held LOW during VBACKUP Power state.

‚Ä¢  The interrupt output pin INT remains active in VBACKUP Power state for any previously configured 
interrupt
condition.

‚Ä¢  Going into VBACKUP Power state can be used as a time stamp condition (see TIME STAMP 
FUNCTION).

‚Ä¢  The backup switchover condition can also be used to enable the clock output on CLKOUT pin 
automatically,
when again in VDD Power state (see AUTOMATIC BACKUP SWITCHOVER INTERRUPT FUNCTION).

The Backup Switch Flag BSF can be cleared using the I2C-bus interface as soon as the circuit 
resumes from
VBACKUP Power state and switched back to VDD.

November 2021                         45/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.2.1.SWITCHOVER DISABLED

The switchover function is disabled when BSM field (EEPROM 37h) is set to 00 or 10 (BSM = 00 is the 
default value
on delivery).

1.  Used when only one power supply is available (device is always in VDD Power state). The power 
supply is
applied on VDD pin and the VBACKUP pin must be tied to VSS with a 10 k‚Ñ¶ resistor. The Backup Switch 
Flag
BSF is always logic 0.

2.  Used when VDD is turned off and VBACKUP is still present and the device must not draw any 
current from the
backup source (IBACKUP = 0 nA). The backup source on VBACKUP pin is in standby mode until the 
device is
powered up again from main supply VDD and a switchover mode is selected (see also TYPICAL
CHARACTERISTICS).

When the device is first powered up from the backup supply (VBACKUP) but without a main supply 
(VDD),
switchover is also disabled and the backup source is automatically in standby mode (IBACKUP = 0 
nA).

4.2.2.DIRECT SWITCHING MODE (DSM)

This mode is selected with BSM = 01 (EEPROM 37h).

‚Ä¢  If VDD > VBACKUP the internal power supply is VDD.

‚Ä¢  If VDD < VBACKUP the internal power supply is VBACKUP.

The Direct Switching Mode is useful in systems where VDD is normally higher than VBACKUP (for 
example, VDD = 5.0
V, VBACKUP = 3.5 V). If the VDD and VBACKUP values are similar (for example, VDD = 3.3 V, VBACKUP ‚â• 
3.0 V), the Direct
Switching Mode is not recommended as this can lead to unnecessary switching.

In Direct Switching Mode, the power consumption is reduced compared to the Level Switching Mode 
(LSM) because
VDD is not monitored and compared to the threshold voltage VTH:LSM = 2.0 V (typical IDD:DSM = 95 
nA). See also
OPERATING PARAMETERS and TYPICAL CHARACTERISTICS.

Note that the circuit needs in worst case 2 ms to react when changing from disabled switchover to 
DSM.

Backup switchover in Direct Switching Mode and Backup Switchover Interrupt enabled, BSIE = 1 
(EEPROM 37h):

VDD

VBACKUP

0 V

BSF

INT


I¬≤C access

enabled

disabled

enabled


Power state

VDD Power

VBACKUP Power

VDD Power


Write operation

tDEB

November 2021                         46/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.2.3.LEVEL SWITCHING MODE (LSM)

This mode is selected with BSM = 11 (EEPROM 37h).

‚Ä¢  If VDD > VTH:LSM (2.0 V), the internal power supply is VDD.

‚Ä¢  If VDD < VTH:LSM (2.0 V) AND VBACKUP > VTH:LSM (2.0 V), the internal power supply is 
VBACKUP.

In Level Switching Mode, the power consumption is slightly increased compared to the Direct 
Switching Mode (DSM)
because VDD is monitored and compared to the threshold voltage VTH:LSM = 2.0 V (typical IDD:LSM = 
115 nA). See also
OPERATING PARAMETERS and TYPICAL CHARACTERISTICS.

Note that the circuit needs in worst case 15.625 ms to react when changing from disabled switchover 
to LSM.
Backup switchover in Level Switching Mode and Backup Switchover Interrupt enabled, BSIE = 1 (EEPROM 
37h):


VBACKUP

VDD
VBACKUP

Example 1: VBACKUP > VDD

Example 2: VBACKUP < VDD

VTH:LSM = 2.0 V

0 V

BSF

INT


I¬≤C access

enabled

disabled

enabled


Power state

VDD Power

VBACKUP Power

VDD Power


Write operation

tDEB

November 2021                         47/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.3. TRICKLE CHARGER

The device supporting the VBACKUP pin include a trickle charging circuit which allows a battery or 
supercapacitor
connected to the VBACKUP pin to be charged from the power supply connected to the VDD pin. See 
figure below.

In the register EEPROM 37h the Trickle Charger is enabled with bit TCE (default value on delivery 
is disabled) and
the series current limiting resistor is selected by the TCR field (default value on delivery is 3 
k‚Ñ¶). A schottky diode,
with a typical voltage drop of 0.25 V, is inserted in the charging path.

Trickle Charger:

TCR


7

VDD

TCE

0

1

Schottky
diode

00   3 kŒ©

01   5 kŒ©

10   9 kŒ©

11  15 kŒ©

6

VBACKUP

The trickle charger is disabled when the device is in VBACKUP Power state.

4.4. PROGRAMMABLE CLOCK OUTPUT

Six different frequencies or the countdown timer interrupt signal can be output on CLKOUT pin, the 
signal selection
is done in the FD field (EEPROM 35h).

‚Ä¢  32.768 kHz, direct from Xtal oscillator, not offset compensated.

‚Ä¢  8192 Hz, 1024 Hz, 64 Hz, 32 Hz, 1 Hz; divided Xtal oscillator frequencies, digitally compensated 
according
to the oscillator offset value EEOffset (EEPROM 36h and 37h).

‚Ä¢  Timer interrupt is controlled by the Countdown Timer Control Registers and the Control 1 
register.

The negative edge of the original 32,768 kHz clock signal is used to turn on and off a subsequent 
selected clock
signal. The negative edge is also used to control the clock signal by flag CLKF, bit CLKOE and the 
FD field. Whenever
the clock signal is LOW, it is pulled to VSS.

CLKOUT is tied to VSS in VBACKUP Power state independent of the CLKOUT configuration settings.

The frequency output can be controlled directly via the I2C-bus interface commands (normal 
operation) or can be
interrupt driven to allow waking up an external system by supplying a clock.

At POR the synchronization function is active since the bit CLKSY is set to 1 (default), the 32.768 
kHz frequency is
output to CLKOUT pin since the bit CLKOE is set to 1 (default) and FD field is set to 000 
(default). Hint: These are
the default values on delivery, stored in the Configuration EEPROM with RAM mirror. To customize 
these POR
values, the user can change the values in the Configuration EEPROM.

November 2021                         48/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.4.1.CLKOUT FREQUENCY SELECTION

A programmable square wave is available at pin CLKOUT. Operation is controlled by the FD field 
(EEPROM 35h).
Frequencies from 32.768 kHz (Default value on delivery) to 1 Hz and countdown timer interrupt can 
be generated for
use as a system clock, microcontroller clock, input to a charge pump, or for calibration of the 
crystal oscillator.

Pin CLKOUT is a push-pull output that is enabled at power on (Default value on delivery). CLKOUT 
can be disabled
by setting CLKOE bit to 0 (if CLKF flag is 0) or by setting FD field to 111. When disabled, the 
CLKOUT pin is LOW.

The RESET bit function can affect the CLKOUT signal depending on the selected frequency. When 
writing 1 to the
RESET bit or when writing to the Seconds register and the CLKOUT is enabled, the current period of 
the frequencies
8192 Hz to 1 Hz are affected (for more details, see RESET BIT FUNCTION).

CLKOUT Frequency Selection:

FD value          CLKOUT Frequency Selection         Effect when writing 1 to the RESET bit or when

writing to the Seconds register


000

001

010

011

100

101

110

111

32.768 kHz ‚ÄìDefault value on delivery
8192 Hz (1)

1024 Hz (1)

64 Hz (1)

32 Hz (1)

1 Hz (1)

Predefined periodic countdown timer interrupt (1) (2)

CLKOUT = LOW

No effect

Affects current period
Affects current period
Affects current period
Affects current period
Affects current period
Affects current period
No effect

(1) 8192 Hz to 1 Hz clock pulses and the timer interrupt pulses can be affected by correction pulses
(see FREQUENCY OFFSET CORRECTION).

(2) CLKSY bit has no effect.

4.4.2.NORMAL CLOCK OUTPUT

Condition: The CLKF flag is 0.

Setting bit CLKOE to 1 will drive the selected frequency on CLKOUT, setting CLKOE to 0 will clear 
the selected
frequency on CLKOUT. See CLOCK OUTPUT SCHEME.

4.4.3.INTERRUPT CONTROLLED CLOCK OUTPUT

Condition: The CLKOE bit is 0.

Writing 1 to CLKIE the occurrence of the selected interrupt condition allows frequency output on 
CLKOUT. This
function allows waking up an external system by outputting a clock.

Writing 0 to CLKIE will disable new interrupts from driving frequencies on CLKOUT, but if there is 
already an active
interrupt driven frequency output (CLKF flag is set), the active frequency output will not be 
stopped. Writing the CLKF
flag to 0 will clear the flag and frequency output will stop. See CLOCK OUTPUT SCHEME.

November 2021                         49/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.4.4.SYNCHRONIZED ENABLE/DISABLE

The enabled Synchronized CLKOUT Enable/Disable function (CLKSY = 1) consists of two sub-functions.

‚Ä¢  Synchronized CLKOUT enable (tCKH). For enabling clock output on CLKOUT pin the internal first 
negative
clock edge of the selected clock source (FD field) is detected after CLKF or CLKOE are set.

‚Ä¢  Synchronized CLKOUT disable (tCKL). Clock output on CLKOUT will be disabled at the next negative 
clock
edge of the selected clock source (FD field) after both CLKF and CLKOE are cleared and after the 
I2C-bus
interface stop condition. When disabled, CLKOUT is tied to VSS.

(CLKF and CLKOE = 0 ü°™ disable condition ü°™ next negative clock edge ü°™ CLKOUT driven to 
VSS)
Synchronized CLKOUT Enable/Disable times (CLKSY = 1):

Selected clock

(FD field)   

enable/disable

CLKOUT

tCKH             tCKL

Selected clock

(FD field)   

enable/disable

CLKOUT

tCKH             tCKL

Write operation

Hint: Glitch free frequency change on CLKOUT requires clearing flag CLKF and bit CLKOE to 0 before 
the new clock
is selected in FD field.

(CLKF and CLKOE = 0 ü°™ disable condition ü°™ next negative clock edge ü°™ CLKOUT driven to VSS ü°™ FD 
field selection

ü°™ CLKF and/or CLKOE = 1 ü°™ enable condition ü°™ next negative clock 
edge)

November 2021                         50/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.4.5.CLOCK OUTPUT SCHEME

Frequency output scheme:


UI
(1)

TI

CUIE

 0 

1

CTIE

 0 

1

CLKIE

 0 

1

from interface:
clear CLKF

CLOCK FLAG

CLKF

SET

CLEAR

CLKOE

1

(2)

to interface:
read CLKF

OR

‚â•1

CLKSY
0

1

(2)


(1)

AI
(1)

EI
(1)

CAIE

 0 

1

CEIE

 0 

1

OR                 0

‚â•1

FD

(2) 32.768 kHz  0

8192 Hz  1

1024 Hz  2

64 Hz  3

32 Hz  4

1 Hz  5

(3) Timer interrupt TI  6

CLKOUT = LOW  7

ENABLE/DISABLE

SYNCHRONIZER

DISABLE

I¬≤C stop

VBACKUP (4)

Power state

AND

&

CLKOUT

(1) See INTERRUPT SCHEME.

Note that, when EIE = 1 and the flag EVF was cleared, the internal signal EI is generated when an
External Event on EVI pin occurs and TSS = 0, or when an Automatic Backup Switchover occurs and
TSS = 1.

(2) Default value on delivery for CLKOE and CLKSY bits and for FD field (EEPROM 35h).

(3) For the timer interrupt signal TI, the CLKSY bit has no effect.

(4) When a frequency is selected and the RTC module is in VBACKUP Power state, CLKOUT pin is LOW.
When again in VDD Power state, CLKOUT pin outputs the frequency.

November 2021                         51/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.5. SETTING AND READING THE TIME

Data flow and data dependencies starting from the 1 Hz clock tick:

1 Hz tick

SECONDS

MINUTES

12_24 hour mode    HOURS


LEAP YEAR

CALCULATION

DATE

WEEKDAY

MONTH

YEAR

During an I2C read/write access to any RTC register that takes less than 950 milliseconds, all time 
counters (clock
and calendar registers 00h to 06h) of the RV-3028-C7 are blocked. During this time the clock 
counter increment (1
Hz tick) is inhibited to allow coherent data values. One counter increment (maximum one 1 Hz tick) 
occurring during
inhibition time is memorized and will be realized after the I2C STOP condition.

Exception: If during the inhibition time a 1 is written to the RESET bit or a value is written to 
the Seconds register an
eventual present memorized 1 Hz update is reset and the prescaler frequencies from 8192 Hz to 1 Hz 
are reset.
Resetting the prescaler will have an influence on the length of the current clock period on all 
subsequent peripherals
(clock and calendar, CLKOUT, timer clock, update timer clock, UNIX clock, EVI input filter), (see 
also RESET BIT
FUNCTION).

When I2C read/write access has been terminated within 950 milliseconds (t < 950 ms), the time 
counters are
unblocked with the I2C STOP condition and a pending request to increment the time counters that 
occurred during
read or write access is correctly applied. Maximum one 1 Hz tick can be handled (see following 
Figure).

Access time for read/write operations:

t < 950 ms


START

SLAVE ADDRESS

DATA   DATA

STOP

Because of this method, it is very important to make a read or write access in one go, that is, 
setting or reading
seconds through to years should be made in one single access. Failing to comply with this method 
could result in the
time becoming corrupted.

Hint: The UNIX Time counter does not know such register blocking (see UNIX TIME COUNTER).

November 2021                         52/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.5.1.SETTING THE TIME

During an I2C read/write access to any RTC register with an access time of less than 950 ms, the 
time counters are
blocked. After I2C STOP condition a possibly memorized 1 Hz tick is realized.

Advantage of register blocking:

‚Ä¢  Prevents faulty writing to the clock and calendar registers during an I2C write access (no 
incrementing of time
registers during the write access).

‚Ä¢  After writing, one memorized 1 Hz tick is handled. Clock and calendar are updated.

‚Ä¢  No reading is needed for control. The written data are coherent.

If the I2C write access takes longer than 950 ms the I2C bus interface is reset by the internal bus 
timeout function. In
this case the previous time counter values are maintained, the pending 1 Hz tick is realized and 
the clock counter
increment (1 Hz tick) continues to operate normally. Restarting of communications begins with 
transfer of the START
condition again.

The I2C auto increment Address Pointer is not reset by the I2C STOP condition nor by the internal 
stop forced after
timeout.

Two methods for setting the time can be distinguished:

1. Setting the time registers including Seconds register. Writing to the Seconds register resets an 
eventual
present memorized 1 Hz update and resets the prescaler frequencies from 8192 Hz to 1 Hz
(synchronization).

2. Setting the time registers without Seconds register. A possibly memorized 1 Hz tick during write 
access will
be realized. Old synchronicity persists.

Hint: Instead of writing to the Seconds register to synchronize the time counters the RESET BIT 
FUNCTION can be
applied. When writing 1 to the RESET bit, the value in the Seconds register does not change, but it 
also resets the
prescaler frequencies from 8192 Hz to 1 Hz (synchronization).

4.5.2.READING THE TIME

During an I2C read/write access to any RTC register with an access time of less than 950 ms, the 
time counters are
blocked. After I2C STOP condition a possibly memorized 1 Hz tick is realized.

Advantage of register blocking:

‚Ä¢  Prevents faulty reading of the clock and calendar registers during an I2C read access (no 
incrementing of
time registers during the read access).

‚Ä¢  After reading, one memorized 1 Hz tick is handled. Clock and calendar are updated.

‚Ä¢  No second reading is needed for control. The read data are coherent.

If the I2C read access takes longer than 950 ms the I2C bus interface is reset by the internal bus 
timeout function. In
this case all data that is read has a value of FFh, the pending 1 Hz tick is realized and the clock 
counter increment
(1 Hz tick) continues to operate normally. Restarting of communications begins with transfer of the 
START condition
again.

The I2C auto increment Address Pointer is not reset by the I2C STOP condition nor by the internal 
stop forced after
timeout.

November 2021                         53/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.6. EEPROM READ/WRITE

4.6.1.POR REFRESH (ALL CONFIGURATION EEPROM ü°™ RAM)

Automatic read of all Configuration EEPROM registers at Power On Reset (POR):

‚Ä¢  At power up a refresh of the Configuration RAM mirror values by the values in the Configuration 
EEPROM
is automatically generated (see REGISTER RESET VALUES SUMMARY).

‚Ä¢  The time of this first refreshment is tPREFR = ~66 ms.

‚Ä¢  The EEbusy bit in the register Status (0Eh) can be used to monitor the status of the 
refreshment.

4.6.2.AUTOMATIC REFRESH (ALL CONFIGURATION EEPROM ü°™ RAM)

Read all Configuration EEPROM registers automatically:

‚Ä¢  To keep the integrity of the configuration data, all data of the Configuration RAM are refreshed 
by the data
in the Configuration EEPROM each 24 hours, at date increment (at the beginning of the last second 
before
midnight).

‚Ä¢  The time of this automatic refreshment is tAREFR = ~3.5 ms.

‚Ä¢  Refresh is only active when RV-3028-C7 is not in VBACKUP mode and not disabled by EERD 
(EEPROM
Memory Refresh Disable) bit.

‚Ä¢  Hint: It is not always necessary/meaningful to turn off the auto-refresh (EERD = 1) before an 
EEPROM
access. e.g. if the current RTC time is 1 hour AM, etc.

4.6.3.UPDATE (ALL CONFIGURATION RAM ü°™ EEPROM)

Write to all Configuration EEPROM registers (see also USE OF THE CONFIGURATION REGISTERS):

‚Ä¢  Before starting to change the configuration stored in the EEPROM, the auto refresh of the 
registers from the
EEPROM has to be disabled by writing 1 into the EERD control bit.

‚Ä¢  Then the new configuration can be written into the configuration RAM registers, when the whole 
new
configuration is in the registers, writing the command 00h into the register EECMD, then the second
command 11h into the register EECMD will start the copy of the configuration into the EEPROM.

‚Ä¢  The time of the update is tUPDATE = ~63 ms.

‚Ä¢  When the transfer is finished (EEbusy = 0), the user can enable again the auto refresh of the 
registers by
writing 0 into the EERD bit in the Control 1 register.

4.6.4.REFRESH (ALL CONFIGURATION EEPROM ü°™ RAM)

Read all Configuration EEPROM registers:

‚Ä¢  Before starting to read the configuration stored in the EEPROM, the auto refresh of the 
registers from the
EEPROM has to be disabled by writing 1 into the EERD control bit.

‚Ä¢  Then the actual configuration can be read from the Configuration EEPROM registers, writing the 
command
00h into the register EECMD, and then the second command 12h into the register EECMD will start the 
copy
of the configuration into the RAM.

‚Ä¢  The time of this controlled refreshment is tREFR = ~3.5 ms.

‚Ä¢  Functions become active as soon as the RAM bytes are written.

‚Ä¢  When the transfer is finished (EEbusy = 0), the user can enable again the auto refresh of the 
registers by
writing 0 into the EERD bit in the Control 1 register.

November 2021                         54/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.6.5.WRITE TO ONE EEPROM BYTE (EEDATA (RAM) ü°™ EEPROM)

Write to one EEPROM byte of the Configuration EEPROM or User EEPROM registers:

‚Ä¢  Before starting to change data stored in the EEPROM, the auto refresh of the registers from the 
EEPROM
has to be disabled by writing 1 into the EERD control bit.

‚Ä¢  In order to write a single byte to the EEPROM, the address to which the data must be written is 
entered in
the EEADDR register and the data to be written is entered in the EEDATA register, then the command 
00h
is written in the EECMD register, then a second command 21h is written in the EECMD register to 
start the
EEPROM write.

‚Ä¢  The time to write to one EEPROM byte is tWRITE = ~16 ms.

‚Ä¢  When the transfer is finished (EEbusy = 0), the user can enable again the auto refresh of the 
registers by
writing 0 into the EERD bit in the Control 1 register.

4.6.6.READ ONE EEPROM BYTE (EEPROM ü°™ EEDATA (RAM))

Read one EEPROM byte from Configuration EEPROM or User EEPROM registers:

‚Ä¢  Before starting to read a byte in the EEPROM, the auto refresh of the registers from the EEPROM 
has to be
disabled by writing 1 into the EERD control bit.

‚Ä¢  In order to read a single byte from the EEPROM, the address to be read is entered in the EEADDR 
register,
then the command 00h is written in the EECMD register, then the second command 22h is written in the
EECMD register and the resulting byte can be read from the EEDATA register.

‚Ä¢  The time to read one EEPROM byte is tREAD = ~1.4 ms.

‚Ä¢  When the transfer is finished (EEbusy = 0), the user can enable again the auto refresh of the 
registers by
writing 0 into the EERD bit in the Control 1 register.

November 2021                         55/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.6.7.EEBUSY BIT

The set EEbusy status bit (bit 7 in the Status register 0Eh) indicates that the EEPROM is currently 
handling a read
or write request and will ignore any further commands until the current one is finished. At power 
up a refresh is
automatically generated. The time of this first refreshment is tPREFR = ~66 ms. After the 
refreshment is finished;
EEbusy is cleared to 0 automatically. The cleared EEbusy status bit indicates that the EEPROM 
transfer is finished.
To prevent access collision between the internal automatic EEPROM refresh cycle (EERD = 0) and 
external
EEPROM read/write access through interface the following procedures have to be applied.

‚Ä¢  Set EERD = 1     Automatic EEPROM Refresh needs to be disabled before EEPROM access.

‚Ä¢  Check for EEbusy = 0 Access EEPROM only if not busy.

‚Ä¢  Clear EERD = 0    It is recommended to enable Automatic EEPROM Refresh at the end of 
read/write
access.

‚Ä¢  Write EEPROM    Wait 10 ms after each written EEPROM register before checking for EEbusy = 0 
to
allow internal data transfer (for Read EEPROM, wait 1 ms).

EEbusy bit flowcharts:

Read EEPROM or Refresh All (1)                   Write EEPROM or Update All (2)


Disable

automatic refresh

EERD = 1

Disable

automatic refresh

EERD = 1


YES

EEPROM

is busy?

NO

Read EEPROM
or Refresh All

EEbusy = 1?

EEPROM

Read/Refresh access
is permitted

YES

EEPROM

is busy?

NO

Write EEPROM
or Update All

EEbusy = 1?

EEPROM

Write/Update access
is permitted


Wait
1 ms

Wait 1 ms

to allow internal
EEPROM read

Wait
10 ms

Wait 10 ms

to allow internal
EEPROM write


YES

EEPROM

is busy?

NO

Wait until pervious
read cycle is finished
EEbusy = 1?

YES

EEPROM

is busy?

NO

Wait until pervious
write cycle is finished
EEbusy = 1?


YES

Next read?

YES

Next write?

NO                               NO


Enable
automatic refresh

EERD = 0

Enable
automatic refresh

EERD = 0


(1) See READ ONE EEPROM BYTE (EEPROM ü°™ EEDATA (RAM))
and REFRESH (ALL CONFIGURATION EEPROM ü°™ RAM)

(2) See WRITE TO ONE EEPROM BYTE (EEDATA (RAM) ü°™

EEPROM) and UPDATE (ALL CONFIGURATION RAM ü°™ EEPROM)

Note: A minimum power supply voltage of VDD:WRITE = 1.5 V during the whole EEPROM write procedure 
is required;

i.e. until EEbusy = 0.

November 2021                         56/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.6.8.EEPROM READ/WRITE CONDITIONS

During a read/write of the EEPROM, if the VDD supply drops, the device will continue to operate and 
communicate
until a switchover to VBACKUP occurs (in DSM or LSM mode). It is not recommended to operate during 
this time and
all I¬≤C communication should be halted as soon as VDD failure is detected.

During the time that data is being written to the EEPROM, VDD should remain above the minimum write 
voltage
VDD:WRITE = 1.5 V. If at any time VDD drops below this voltage, the data written to the device get 
corrupted.

To write to the EEPROM, the backup switchover circuit must switch back to the main power supply 
VDD. See also
AUTOMATIC BACKUP SWITCHOVER FUNCTION.

4.6.9.USE OF THE CONFIGURATION REGISTERS

The best practice method to use the Configuration EEPROM with RAM mirror registers at addresses 30h 
to 37h is
to make all Configuration settings in the RAM first and then to update all Configuration EEPROMs by 
the Update
EEPROM command.

Update all Configuration EEPROMs:

Configuration EEPROM
with RAM mirror


RAM mirror

EEPWE   30

EEPW 0

EEPW 1

EEPW 2

EEPW 3

EEPROM Clkout
EEPROM Offset
EEPROM Backup 37

EEPROM

EEPWE   30

EEPW 0

EEPW 1

EEPW 2

EEPW 3

EEPROM Clkout
EEPROM Offset
EEPROM Backup 37

The method, how to enable/disable write protection and how to change the reference password can be 
found in
section USER PROGRAMMABLE PASSWORD (Configuration Registers 30h to 34h).

Configuration Registers 35h to 37h:

‚Ä¢  EEPROM CLKOUT REGISTER, 35h ‚Äì EEPROM Clkout

‚Ä¢  EEPROM OFFSET REGISTER, 36h ‚Äì EEPROM Offset

‚Ä¢  EEPROM BACKUP REGISTER, 37h ‚Äì EEPROM Backup

Edit the Configuration settings (example, when write protection is enabled (EEPWE = 255)):

1. Enter the correct password PW (PW = EEPW) to unlock write protection

2. Disable automatic refresh by setting EERD = 1

3. Edit Configuration settings in registers 35h to 37h (RAM)

4. Update EEPROM (all Configuration RAM ü°™ EEPROM) by setting EECMD = 00h followed by 
11h

5. Enable automatic refresh by setting EERD = 0

6. Enter an incorrect password PW (PW ‚â† EEPW) to lock the device

Note: RAM mirror of the Configuration registers defines the active zone. By writing only to the 
EEPROM, the
configurations are not active. The configurations are activated as soon as a refresh occurs (POR 
refresh, Automatic
refresh or Refresh by software).

Note: To perform certain tests, it is sufficient to use only the RAM mirror. But the new, changed 
configurations are
lost as soon as a refresh occurs (POR refresh, Automatic refresh or Refresh by software).

November 2021                         57/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.7. INTERRUPT OUTPUT

The interrupt pin ÃÖINÃÖÃÖÃÖTÃÖ can be triggered by six different functions:

‚Ä¢  PERIODIC COUNTDOWN TIMER INTERRUPT FUNCTION

‚Ä¢  PERIODIC TIME UPDATE INTERRUPT FUNCTION

‚Ä¢  ALARM INTERRUPT FUNCTION

‚Ä¢  EXTERNAL EVENT INTERRUPT FUNCTION

‚Ä¢  AUTOMATIC BACKUP SWITCHOVER INTERRUPT FUNCTION

‚Ä¢  POWER ON RESET INTERRUPT FUNCTION

4.7.1.SERVICING INTERRUPTS

The ÃÖINÃÖÃÖÃÖTÃÖ pin can indicate six types of interrupts. It outputs the logic OR operation result of 
these interrupt outputs.
When an interrupt is detected (when ÃÖINÃÖÃÖÃÖTÃÖ pin produces a negative pulse or is at low level), the 
TF, UF, AF, EVF, BSF
and PORF flags can be read to determine which interrupt event has occurred.

To keep ÃÖINÃÖÃÖÃÖTÃÖ pin from changing to low level, clear the TIE, UIE, AIE, EIE and BSIE (EEPROM 37h) 
and PORIE

(EEPROM 35h) bits. To check whether an event has occurred without outputting any interrupts via the 
ÃÖINÃÖÃÖÃÖTÃÖ pin,
software can read the TF, UF, AF, EVF, BSF and PORF interrupt flags (polling).

Caution: The EVF flag is also set by an event of the Backup Switchover function when bits TSS and 
TSE are set
to 1.

November 2021                         58/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.7.2.INTERRUPT SCHEME

Interrupt Scheme (Part 1):


TRPT, TE, TD and

Registers 0Ah ‚Äì 0Dh

TIMER FLAG

to interface:
read TF


COUNTDOWN COUNTER

from interface:

clear TF

USEL

SET

TF

CLEAR

TD

PULSE
GENERATOR 1
TRIGGER

CLEAR

to interface:

read UF

tRTN1

TIE

 0
1

(3) TI

UPDATE FLAG


UPDATE GENERATOR

from interface:

clear UF

SET

UF
CLEAR

USEL

PULSE
GENERATOR 2
TRIGGER

CLEAR

tRTN2

UIE

 0

1   OR

(3) UI  ‚â•1

(2)
INT


check now signal

MINUTE ALARM

=

MINUTE TIME

HOUR ALARM

=

HOUR TIME

AE_M

1

0

AE_H

1

0

AE_WD

ALARM

CONTROL

(1)

ALARM FLAG

AF

SET

CLEAR

to interface:

read AF

AIE

 0
1

(3) AI


WEEKDAY ALARM  1 

=       0

WEEKDAY

from interface:

clear AF

Part 2


DATE ALARM

=

DATE

WADA

0

1

(1) Only when all enabled alarm settings are matching.

It is only on increment to a matched case that the Alarm Flag AF is set.

(2) When bits TIE, UIE, AIE, EIE and BSIE (EEPROM 37h) and PORIE (EEPROM 35h) are disabled, pin

ÃÖINÃÖÃÖÃÖTÃÖ remains high impedance.

(3) See CLOCK OUTPUT SCHEME.

November 2021                         59/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

Interrupt Scheme (Part 2):


EVI

EHL, ET

EXT. EVENT FUNCTION

TSS

0

1

 0 

1

TSE

 0 

1

EVENT FLAG
EVF

SET

SET CLEAR

from interface:

clear EVF

to interface:
read EVF

EIE

 0

1

(3) EI

time stamp
scheme

to interface:
read BSF

Part 1


BSM, FEDE

(4)     (4)

time stamp

scheme

BACKUP FLAG

BSIE

 0    OR

(2)
INT


AUTOMATIC BACKUP

SWITCHOVER FUNCTION

SET

BSF

CLEAR

1    ‚â•1


from interface:

clear BSF

to interface:
read PORF


POWER ON RESET
POR

POR FLAG
PORF

SET

CLEAR

from interface:

clear PORF

PORIE

 0

1

(2) When bits TIE, UIE, AIE, EIE and BSIE (EEPROM 37h) and PORIE (EEPROM 35h) are disabled, pin 
ÃÖINÃÖÃÖÃÖTÃÖ
remains high impedance.

(3) See CLOCK OUTPUT SCHEME.

Note that, when EIE = 1 and the flag EVF was cleared, the internal signal EI is generated when an
External Event on EVI pin occurs and TSS = 0, or when an Automatic Backup Switchover occurs and
TSS = 1.

(4) Caution: The EVF flag is also set by an event of the Backup Switchover function when bits TSS = 
1 and
(EIE = 1 or TSE = 1) are set.

See also Time Stamp scheme in section TIME STAMP FUNCTION.

November 2021                         60/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.8. PERIODIC COUNTDOWN TIMER INTERRUPT FUNCTION

The Periodic Countdown Timer Interrupt function generates an interrupt event once (see SINGLE MODE 
(TRPT =
0)) or periodically (see REPEAT MODE (TRPT = 1)) at any period set from 244.14 Œºs to 4095 minutes.

When starting the countdown timer for the first time, only the first period does not have a fixed 
duration. The amount
of inaccuracy for the first timer period depends on the selected source clock (see FIRST PERIOD 
DURATION).

When an interrupt event is generated, the ÃÖINÃÖÃÖÃÖTÃÖ pin goes to the low level and the TF flag is set 
to 1 to indicate that an
event has occurred. The output on the ÃÖINÃÖÃÖÃÖTÃÖ pin is only effective if the TIE bit in the Control 
2 register is set to 1. The
low-level output signal on ÃÖINÃÖÃÖÃÖTÃÖ pin (and on CLKOUT pin, when driven by TI signal) is 
automatically cleared after the
Auto reset time tRTN1 or it is cancelled when TF flag is cleared to 0.

‚Ä¢  When TD = 00, tRTN1 = 122 ¬µs

‚Ä¢  When TD = 01, 10 or 11, tRTN1 = 7.813 ms

When bit TIE is set to 1, the internal countdown timer interrupt pulse (TI) can be used to enable 
the clock output on
CLKOUT pin automatically if CTIE and CLKIE bits are set to 1 and CLKOE bit is cleared to 0 and a 
frequency is
selected in the FD field. The interrupt pulses (TI) can even be used as CLKOUT frequency, when 
selecting 110 in
the FD field (see CLOCK OUTPUT SCHEME).

November 2021                         61/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.8.1.PERIODIC COUNTDOWN TIMER DIAGRAM

Diagram of the Periodic Countdown Timer Interrupt function: Example with Repeat Mode (TRPT = 1), 
Interrupt on

ÃÖINÃÖÃÖÃÖTÃÖ pin (TIE = 1) and Countdown Timer Signal on CLKOUT pin (CLKOE = 1, FD = 110).

TIE                             8

TE

(TRPT, TD)     1                                           9


INT
CLKOE = 1

FD = 110

4 5

tRTN1

tRTN1

tRTN1

tRTN1


CLKOUT

tRTN1

tRTN1

tRTN1

tRTN1

TF             3    6     7

event             2


1. period

period

period

period

period

Write operation

¬π The Periodic Countdown Timer starts from the preset Timer Value in the Registers (0Ah, 0Bh) when 
writing 1
to the TE bit. In the same writing process TRPT can be set to 1 for Repeat Mode and the desired 
Timer
Clock Frequency can be selected in the TD field.

¬≤ When the countdown value reaches 000h, an interrupt event occurs and, when TRPT is 1, the counter 
is
automatically reloaded with the preset Timer Value, and starts again the countdown.

¬≥ When a Periodic Countdown Timer Interrupt occurs, the TF flag is set to 1.

‚Å¥ If bits TIE and CLKOE are 1 and FD is set to 110 and a Periodic Countdown Timer Interrupt occurs, 
the ÃÖINÃÖÃÖÃÖTÃÖ
and CLKOUT output pins go LOW.

‚Åµ The ÃÖINÃÖÃÖÃÖTÃÖ and CLKOUT output pins remains LOW during the Auto reset time tRTN1, and then they 
are
automatically cleared to 1. The TD field determines the Timer Clock Frequency and the Auto reset 
time tRTN1.
tRTN1    = 122 ¬µs (TD = 00) or tRTN1 = 7.813 ms (TD = 01, 10, 11).

‚Å∂ The TF flag retains 1 until it is cleared to 0 by software.

‚Å∑ If the ÃÖINÃÖÃÖÃÖTÃÖ and CLKOUT pins are LOW, their status changes as soon as TF flag is cleared to 0.

‚Å∏ If the ÃÖINÃÖÃÖÃÖTÃÖ and CLKOUT pins are LOW, their status changes as soon as TIE bit is cleared to 0.

‚Åπ When a 0 is written to the TE bit, the Periodic Countdown Timer function is stopped and the 
ÃÖINÃÖÃÖÃÖTÃÖ and
CLKOUT pins are cleared after the Auto reset time tRTN1.

November 2021                         62/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.8.2.USE OF THE PERIODIC COUNTDOWN TIMER INTERRUPT

The following registers, fields and bits are related to the Periodic Countdown Timer Interrupt and 
Automatic Clock
output function:

‚Ä¢  Timer Value 0 Register (0Ah) (see PERIODIC COUNTDOWN TIMER CONTROL REGISTERS)

‚Ä¢  Timer Value 1 Register (0Bh) (see PERIODIC COUNTDOWN TIMER CONTROL REGISTERS)

‚Ä¢  Timer Status 0 Register (0Ch) (see PERIODIC COUNTDOWN TIMER CONTROL REGISTERS)

‚Ä¢  Timer Status 1 shadow Register (0Dh) (see PERIODIC COUNTDOWN TIMER CONTROL REGISTERS)

‚Ä¢  TF flag (see STATUS AND CONTROL REGISTERS, 0Eh ‚Äì Status)

‚Ä¢  TRPT bit, TE bit and TD field (see STATUS AND CONTROL REGISTERS, 0Fh ‚Äì Control 1)

‚Ä¢  TIE bit (see STATUS AND CONTROL REGISTERS, 10h ‚Äì Control 2)

‚Ä¢  CTIE bit (see STATUS AND CONTROL REGISTERS, 12h ‚Äì Clock Interrupt Mask)

For selecting Countdown Timer Signal for CLKOUT pin (CLKOE = 1 and FD = 110):

‚Ä¢  CLKOE bit and FD field (see EEPROM CLKOUT REGISTER, 35h ‚Äì EEPROM Clkout)

Prior to entering any timer settings for the Periodic Countdown Timer Interrupt, it is recommended 
to write a 0 to the
TIE and TE bits to prevent inadvertent interrupts on ÃÖINÃÖÃÖÃÖTÃÖ pin. When writing 1 to the RESET bit 
or writing a value to
the Seconds register affects the length of a current countdown period (see RESET BIT FUNCTION). 
When the

Periodic Countdown Timer Interrupt function is not used, one Timer Value register (0Ah) can be used 
as RAM byte.
The Timer Clock Frequency selection field TD is used to set the countdown period (source clock) for 
the Periodic
Countdown Timer Interrupt function (four settings are possible).

Procedure to start the Periodic Countdown Timer Interrupt function and the Automatic Clock output 
function:

1. Initialize bits TE, TIE and TF to 0. In that order, to prevent inadvertent interrupts on 
ÃÖINÃÖÃÖÃÖTÃÖ pin.

2. Set TRPT bit to 1 if periodic countdown is needed (Repeat Mode).

3. Choose the Timer Clock Frequency and write the corresponding value in the TD field.

4.  Choose the Countdown Period based on the Timer Clock Frequency, and write the corresponding 
Timer
Value to the registers Timer Value 0 (0Ah) and Timer Value 1 (0Bh). See following table.

5. Set the TIE bit to 1 if you want to get a hardware interrupt on ÃÖINÃÖÃÖÃÖTÃÖ pin.

6. Set CTIE bit to 1 to enable clock output when a timer interrupt occurs. See also CLOCK OUTPUT
SCHEME.

7. Set the TIE and CLKOE bits to 1 and the FD field to 110 if you want to get the timer signal on 
CLKOUT.

8.  Set the TE bit from 0 to 1 to start the Periodic Countdown Timer. The countdown starts at the 
rising edge of
the SCL signal after Bit 0 of the Address 0Fh is transferred. See subsequent Figure that shows the 
start
timing.


Countdown Period in seconds:

Timer Value
Countdown Period = Timer Clock Frequency


Countdown Period:

Timer Value
(0Ah and 0Bh)

Countdown Period

TD = 00 (4096 Hz)      TD = 01 (64 Hz)       TD = 10 (1 Hz)      TD = 11 (1/60 Hz) )


0

1

2

:

41

205

410

2048

:

4095 (FFFh)

-

244.14 Œºs

488.28 Œºs

:

10.010 ms

50.049 ms

100.10 ms

500.00 ms

:
0.9998 s

-
15.625 ms

31.25 ms

:

640.63 ms

3.203 s

6.406 s

32.000 s

:
63.984 s

-

1 s

2 s

:

41 s

205 s

410 s

2048 s

:
4095 s

-

1 min

2 min

:

41 min

205 min

410 min

2048 min

:

4095 min

November 2021                         63/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

General countdown timer behavior:

Timer Value 0  xx  03

Timer Value 1  xx  00

Timer Clock


Timer Status 0 (read only)  xx  03        02  01

03  02  01

03  02  01  03

Timer Status 1 (read only)  xx  00

TE

TF


INT

Write operation

period

The first period has an uncertainty.

period

See table "First period duration for Timer Value n"

In this example, the Countdown Timer is in Repeat Mode (TRPT = 1) and it is assumed that the Timer 
Flag TF is
cleared by software before the next countdown period expires.

Start timing of the Periodic Countdown Timer:

Address 0Fh

SCL


SDA

Internal Timer

USEL  EERD   TE   TD1   TD0

Bit 4   Bit 3   Bit 2   Bit 1   Bit 0

ACK

INT

event

1. period

Rising edge of the SCL signal

November 2021                         64/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.8.3.FIRST PERIOD DURATION

When the TF flag is set, it indicates that an interrupt signal on ÃÖINÃÖÃÖÃÖTÃÖ is generated if this 
mode is enabled. See Section
INTERRUPT OUTPUT for details on how the interrupt can be controlled.

When starting the timer for the first time, the first period has an uncertainty. The uncertainty 
arises because of the
activation instruction of the interface clock, which is not synchronous to the Timer Clock 
Frequency. Subsequent
timer periods do not have such deviation. The amount of deviation for the first timer period 
depends on the chosen
Timer Clock Frequency, see following Table.

First period duration for Timer Value n(1):

TD value      Timer Clock Frequency          First period duration            Subsequent


00           4096 Hz

01           64 Hz

10           1 Hz

11           1/60 Hz

Minimum Period

n √ó 244 ¬µs
n √ó 15.625 ms

n √ó 1 s
n √ó 60 s

Maximum Period

(n + 1) √ó 244 ¬µs

(n +1) √ó 15.625 ms

n √ó 1 s + 15.625 ms
n √ó 60 s + 15.625 ms

periods duration

n √ó 244 ¬µs
n √ó 15.625 ms

n √ó 1 s
n √ó 60 s

(1) Timer Values n from 1 to 4095 are valid. When the Timer Value is set to 0, the countdown timer 
does not start.

At the end of every countdown, the timer sets the Periodic Countdown Timer Flag (bit TF in Status 
Register). The TF
flag can only be cleared by command. When enabled, a pulse is generated at the interrupt pin 
ÃÖINÃÖÃÖÃÖTÃÖ.

When reading the Timer Value (Timer Value 0 and Timer Value 1), the preset value is returned and 
not the actual
value. The actual value of the Periodic Countdown Timer can be read in the registers Timer Status 0 
and Timer
Status 1.

4.8.4.SINGLE MODE (TRPT = 0)

If TRPT bit is set to 0 (default), Single Mode is selected. In Single Mode the countdown timer will 
stop after reaching
0 and bit TE will be cleared automatically. The TF flag retains 1 until it is cleared to 0 by 
software.

Hint: An ongoing countdown can be stopped by writing 0 to the TE bit. No interrupt will be 
executed. The Timer Status
0 and Timer Status 1 registers store the last updated value.

4.8.5.REPEAT MODE (TRPT = 1)

If TRPT bit is set to 1, Repeat Mode is selected. In Repeat Mode the countdown timer is in the 
periodic countdown
mode where it will be automatically reloaded with the Timer Value from the Timer Value 0 and Timer 
Value 1 registers
when reaching 0. This will repeat until TE is cleared to 0. When a 0 is written to the TE bit, the 
Timer Status 0 and
Timer Status 1 registers store the last updated value. The TF flag retains 1 until it is cleared to 
0 by software.

Caution: Changing only TRPT from 1 to 0 during countdown to stop the function will automatically 
reload the
countdown timer with the preset Timer Value immediately because TE in the same register is still 1. 
The last
countdown period will therefore be longer as intended but will stop correctly after reaching 0 and 
bit TE will be cleared
automatically.

Caution: A running countdown should not be stopped by writing 0 to the Timer Value because 
RV-3028-C7 outputs
64 Hz when the countdown value reaches 0.

Write as usual 0 to the TE bit to stop the function.

November 2021                         65/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.9. PERIODIC TIME UPDATE INTERRUPT FUNCTION

The Periodic Time Update Interrupt function generates an interrupt event periodically at the 
One-Second or the One-
Minute update time, according to the selected timer source with bit USEL.

When an interrupt event is generated, the ÃÖINÃÖÃÖÃÖTÃÖ pin goes to the low level and the UF flag is set 
to 1 to indicate that an
event has occurred. The output on ÃÖINÃÖÃÖÃÖTÃÖ pin is only effective if UIE bit in Control 2 register 
is set to 1. The low-level

output signal on the ÃÖINÃÖÃÖÃÖTÃÖ pin is automatically cleared after the Auto reset time tRTN2 or it is 
cancelled when UF flag is

cleared to 0.

‚Ä¢  When USEL = 0 (Second update), tRTN2 = 500 ms

‚Ä¢  When USEL = 1 (Minute update), tRTN2 = 7.813 ms

When bit UIE is set to 1, the internal update interrupt pulse (UI) can be used to enable the clock 
output on CLKOUT
pin automatically, if CUIE and CLKIE bits are set to 1 and CLKOE bit is cleared to 0 and a 
frequency is selected in
the FD field (see CLOCK OUTPUT SCHEME).

4.9.1.PERIODIC TIME UPDATE DIAGRAM

Diagram of the Periodic Time Update Interrupt function:

UIE                     7


INT

4 5

tRTN2

tRTN2

t RTN2

t RTN2

UF     2   3     6

event     1


period

period

period

period

Write operation

¬π A Periodic Time Update Interrupt event occurs when the internal clock value matches either the 
second or
the minute update time. The USEL bit determines whether it is the Second or the Minute period with 
the
corresponding Auto reset time tRTN2. tRTN2 = 500 ms (Second update) or tRTN2 = 7.813 ms (Minute 
update).

¬≤ If UF flag was cleared beforehand and when a Periodic Time Update Interrupt occurs, the flag UF 
is set to 1.

¬≥ The UF flag retains 1 until it is cleared to 0 by software.

‚Å¥ If the UIE bit is 1 and a Periodic Time Update Interrupt occurs, the ÃÖINÃÖÃÖÃÖTÃÖ pin output goes 
LOW.

‚Åµ The ÃÖINÃÖÃÖÃÖTÃÖ pin output remains LOW during the Auto reset time tRTN2, and then it is 
automatically cleared to 1.

‚Å∂ If the ÃÖINÃÖÃÖÃÖTÃÖ pin is LOW, its status changes as soon as UF flag is cleared to 0.

‚Å∑ If the ÃÖINÃÖÃÖÃÖTÃÖ pin is LOW, its status changes as soon as UIE bit is cleared to 0.

November 2021                         66/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.9.2.USE OF THE PERIODIC TIME UPDATE INTERRUPT

The following bits are related to the Periodic Time Update Interrupt and Automatic Clock output 
function:

‚Ä¢  UF flag (see STATUS AND CONTROL REGISTER, 0Eh ‚Äì Status)

‚Ä¢  USEL bit (see STATUS AND CONTROL REGISTER, 0Fh ‚Äì Control 1)

‚Ä¢  UIE bit (see STATUS AND CONTROL REGISTER, 10h ‚Äì Control 2)

‚Ä¢  CUIE bit (see STATUS AND CONTROL REGISTERS, 12h ‚Äì Clock Interrupt Mask)

Prior to entering any other settings, it is recommended to write a 0 to the UIE bit to prevent 
inadvertent interrupts on

ÃÖINÃÖÃÖÃÖTÃÖ pin. The Periodic Time Update Interrupt function cannot be fully stopped, but by writing a 
0 in the UIE bit, it
prevents the occurrence of a hardware interrupt on the ÃÖINÃÖÃÖÃÖTÃÖ pin.

When writing 1 to the RESET bit or when writing to the Seconds register affects the length of a 
current update period
(see RESET BIT FUNCTION).

Procedure to use the Periodic Time Update Interrupt and Automatic Clock output function:

1. Initialize bits UIE and UF to 0.

2. Choose the timer source clock and write the corresponding value in the USEL bit.

3. Set the UIE bit to 1 if you want to get a hardware interrupt on ÃÖINÃÖÃÖÃÖTÃÖ pin.

4. Set CUIE bit to 1 to enable clock output when a time update interrupt occurs. See also CLOCK 
OUTPUT
SCHEME.

5. The first interrupt will occur after the next event, either second or minute change.

November 2021                         67/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.10. ALARM INTERRUPT FUNCTION

The Alarm Interrupt function generates an interrupt for alarm settings such as weekday/date, hour 
and minute
settings.

When an interrupt event is generated, the ÃÖINÃÖÃÖÃÖTÃÖ pin goes to the low level and the AF flag is set 
to 1 to indicate that an
event has occurred. The output on the ÃÖINÃÖÃÖÃÖTÃÖ pin is only effective if the AIE bit in the Control 
2 register is set to 1.

When bit AIE is set to 1, the internal alarm interrupt signal (AI) can be used to enable the clock 
output on CLKOUT
pin automatically, if CAIE and CLKIE bits are set to 1 and CLKOE bit is cleared to 0 and a 
frequency is selected in
the FD field (see CLOCK OUTPUT SCHEME).

4.10.1. ALARM DIAGRAM

Diagram of the Alarm Interrupt function:

AIE

5

INT    4

AF     2       3         6       7

event     1

alarm                       alarm

Write operation

1 A weekday/date, hour or minute alarm interrupt event occurs when all selected Alarm registers 
(AE_x bits)
match to the respective counters. The WADA bit determines whether it is the weekday or date.

2 When an Alarm Interrupt event occurs, the AF flag is set to 1.

3 The AF flag retains 1 until it is cleared to 0 by software.

4 If the AIE bit is 1 and an Alarm Interrupt occurs, the ÃÖINÃÖÃÖÃÖTÃÖ pin output goes LOW.

5 If the AIE value is changed from 1 to 0 while the ÃÖINÃÖÃÖÃÖTÃÖ pin output is LOW, the ÃÖINÃÖÃÖÃÖTÃÖ pin 
immediately
changes its status. While the AF flag is 1, the ÃÖINÃÖÃÖÃÖTÃÖ status can be controlled by the AIE bit.

6 If the ÃÖINÃÖÃÖÃÖTÃÖ pin is LOW, its status changes as soon as the AF flag is cleared from 1 to 0.

7 If the AIE bit value is 0 when an Alarm Interrupt occurs, the ÃÖINÃÖÃÖÃÖTÃÖ pin status does not go 
LOW.

November 2021                         68/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.10.2. USE OF THE ALARM INTERRUPT

The following registers and bits are related to the Alarm Interrupt and Automatic Clock output 
function:

‚Ä¢  Minutes Register (01h) (see CLOCK REGISTERS)

‚Ä¢  Hours Register (02h) (see CLOCK REGISTERS)

‚Ä¢  Weekday Register (03h) (see CALENDAR REGISTERS)

‚Ä¢  Date Register (04h) (see CALENDAR REGISTERS)

‚Ä¢  Minutes Alarm Register and AE_M bit (07h) (see ALARM REGISTERS)

‚Ä¢  Hours Alarm Register and AE_H bit (08h) (see ALARM REGISTERS)

‚Ä¢  Weekday/Date Alarm Register and AE_WD bit (09h) (see ALARM REGISTERS)

‚Ä¢  AF flag (see STATUS AND CONTROL REGISTER, 0Eh ‚Äì Status)

‚Ä¢  WADA bit (see STATUS AND CONTROL REGISTERS, 0Fh ‚Äì Control 1)

‚Ä¢  AIE and 12_24 bits (see STATUS AND CONTROL REGISTERS, 10h ‚Äì Control 2)

‚Ä¢  CAIE bit (see STATUS AND CONTROL REGISTERS, 12h ‚Äì Clock Interrupt Mask)

Prior to entering any timer settings for the Alarm Interrupt, it is recommended to write a 0 to the 
AIE bit to prevent
inadvertent interrupts on ÃÖINÃÖÃÖÃÖTÃÖ pin. When writing 1 to the RESET bit or writing a value to the 
Seconds register affects

the time to the next alarm interrupt (see RESET BIT FUNCTION). When the Alarm Interrupt function is 
not used, one
Byte (07h) of the Alarm registers can be used as RAM byte. In such case, be sure to write a 0 to 
the AIE bit (if the
AIE bit value is 1 and the Alarm register is used as RAM register, ÃÖINÃÖÃÖÃÖTÃÖ may change to low level 
unintentionally).

Procedure to use the Alarm Interrupt and Automatic Clock output function:

1. Initialize bits AIE and AF to 0.

2. Choose weekday alarm or date alarm (weekday/date) by setting the WADA bit. WADA = 0 for weekday 
alarm
or WADA = 1 for date alarm.

3.  Write the desired alarm settings in registers 07h to 09h. The three alarm enable bits, AE_M, 
AE_H and
AE_WD, are used to select the corresponding register that has to be taken into account for match or 
not.
See the following table.

4. Set CAIE bit to 1 to enable clock output when an alarm occurs. See also CLOCK OUTPUT SCHEME.

5. Set the AIE bit to 1 if you want to get a hardware interrupt on ÃÖINÃÖÃÖÃÖTÃÖ pin.


Alarm Interrupt:

Alarm enable bits

AE_WD    AE_H     AE_M

Alarm event


0       0       0

0       0       1

0       1       0

0       1       1

1       0       0

1       0       1

1       1       0

1       1       1

When minutes, hours and weekday/date match (once per weekday/date)
When hours and weekday/date match (once per weekday/date)

When minutes and weekday/date match (once per hour per weekday/date)
When weekday/date match (once per weekday/date)

When hours and minutes match (once per day)
When hours match (once per day)

When minutes match (once per hour)
All disabled ‚Äì Default value

AE_x bits (where x is WD, H or M)

AE_x = 0: Alarm is enabled

AE_x = 1: Alarm is disabled ‚Äì Default value

November 2021                         69/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.11. EXTERNAL EVENT INTERRUPT FUNCTION

The External Event Interrupt and the Time Stamp function are enabled by the control bits TSS, TSE 
and EIE. With
the ET field the EVI input events can be configured either for edge detection, or for level 
detection with filtering, and
with the EHL bit the active edge or level can be configured.

If enabled (TSS = 0, TSE = 1, EIE =1 and EVF flag was cleared to 0 before) and an External Event on 
EVI pin is
detected, the clock and calendar registers are captured and copied into the Time Stamp registers, 
the ÃÖINÃÖÃÖÃÖTÃÖ is issued
and the EVF flag is set to 1 to indicate that an external event has occurred.

When bit TSS = 0 and bit EIE = 1, the internal event interrupt signal (EI) can be used to enable 
the clock output on
CLKOUT pin automatically, if CEIE and CLKIE bits are set to 1 and CLKOE bit is cleared to 0 and a 
frequency is
selected in the FD field (see CLOCK OUTPUT SCHEME).

Caution: The EVF flag is also set by an event of the Backup Switchover function when bits TSS and 
TSE are set
to 1.

November 2021                         70/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.11.1. EXTERNAL EVENT DIAGRAM

Diagram of the External Event Interrupt function. Example with EHL = 1 for high level / rising edge 
detection:

TSE    1                  7   8

TSR                                  10

EIE                             9


INT

EVF

tD EL AY

3    4     6

EVI         2       5


Clock & Calendar

registers

Set value to A

event

A+1

event

A+2

event

A+3

event

A+4

A+5


Count TS register

TS registers
(TSOW = 1)

TS registers
(TSOW = 0, default)

00h if reseted

00h if reseted

00h if reseted

01h

A+1

02h

A+2

A+1

03h

A+3

00h

All 00h

All 00h

Write operation

1 Initialize clock and calendar and set bits TSS = 0 and TSE = 1 if a Time Stamp from the External 
Event
Interrupt function is needed and select TSOW (0 or 1). Set EIE bit to 1 if interrupt on ÃÖINÃÖÃÖÃÖTÃÖ 
pin is required. The
EVF  flag needs to be cleared to reset the ÃÖINÃÖÃÖÃÖTÃÖ pin and to prepare the system for an event. In 
this example,
EHL  = 1 for high level / rising edge detection. Select edge detection (ET = 00) or level detection 
with filtering
(ET ‚â† 00).

2 An External Event on EVI pin is detected. Pay attention to the debounce time when using filtering 
(ET ‚â† 00).
The value (A+1) is captured/copied into the TS registers and the value in the Count TS register is
incremented by one. The counter Count TS is always working, regardless of the value of the 
overwrite bit
TSOW.

3 When an External Event Interrupt occurs, EVF flag is set to 1 and ÃÖINÃÖÃÖÃÖTÃÖ pin output goes LOW 
when EIE = 1.

‚Å¥ The EVF flag retains 1 until it is cleared to 0 by software.

‚Åµ No interrupt occurs on ÃÖINÃÖÃÖÃÖTÃÖ pin because the EVF flag was not set back to 0. But, new value 
(A+2) is captured
in the TS registers if the Time Stamp overwrite bit TSOW is set to 1.

‚Å∂ When edge detection is enabled (ET = 00) the EVF flag can be cleared, even if EVI input is high 
level.

When level detection with filtering is enabled (ET ‚â† 00) the EVF flag will be set again after tDELAY
(tSP < tDELAY < 2 tSP). When EVI input is low level, EVF can also be cleared.

‚Å∑ If TSE is set to 0, no time stamp is captured.

‚Å∏ If the EVI input is high level and the TSE bit is set from 0 to 1, no event is detected.

‚Åπ While the EVF flag is 1, the ÃÖINÃÖÃÖÃÖTÃÖ status can be controlled by the EIE bit.

¬π‚Å∞ When writing 1 to TSR bit, all seven time stamp registers (Count TS to Year TS) are reset to 
00h. Bit TSR
always returns 0 when read.

November 2021                         71/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.11.2. USE OF THE EXTERNAL EVENT INTERRUPT

The following registers and bits are related to the External Event Interrupt, Time Stamp and 
Automatic Clock output
function:

‚Ä¢  Seconds Register (00h) (see CLOCK REGISTERS)

‚Ä¢  Minutes Register (01h) (see CLOCK REGISTERS)

‚Ä¢  Hours Register (02h) (see CLOCK REGISTERS)

‚Ä¢  Date Register (04h) (see CALENDAR REGISTERS)

‚Ä¢  Month Register (05h) (see CALENDAR REGISTERS)

‚Ä¢  Year Register (06h ) (see CALENDAR REGISTERS)

‚Ä¢  Count TS Register (14h) (see TIME STAMP REGISTERS)

‚Ä¢  Seconds TS (15h) (see TIME STAMP REGISTERS)

‚Ä¢  Minutes TS (16h) (see TIME STAMP REGISTERS)

‚Ä¢  Hours TS (17h) (see TIME STAMP REGISTERS)

‚Ä¢  Date TS (18h) (see TIME STAMP REGISTERS)

‚Ä¢  Month TS (19h) (see TIME STAMP REGISTERS)

‚Ä¢  Year TS (1A) (see TIME STAMP REGISTERS)

‚Ä¢  EVF flag (see STATUS AND CONTROL REGISTERS, 0Eh ‚Äì Status)

‚Ä¢  TSE, EIE and 12_24 bits (see STATUS AND CONTROL REGISTERS, 10h ‚Äì Control 2)

‚Ä¢  CEIE bit (see STATUS AND CONTROL REGISTERS, 12h ‚Äì Clock Interrupt Mask)

‚Ä¢  EHL bit, ET field, TSR bit, TSOW bit and TSS bit (see EVENT CONTROL REGISTER, 13h ‚Äì Event 
Control)

Prior to entering any timer settings for the event interrupt, it is recommended to write a 0 to the 
TSE and EIE bit to
prevent inadvertent interrupts on ÃÖINÃÖÃÖÃÖTÃÖ pin.

Note that changing TSS bit value from 1 to 0 before clearing TSE and EIE can create unwanted 
interrupts (according
to EHL bit, but regardless of the status of the ET field).

Procedure to use the External Event Interrupt, Time Stamp and Automatic Clock output function:

1. Initialize bits TSE and EIE to 0.

2. Clear flag EVF to 0.

3. Set TSS bit to 0 to select External Event on EVI pin as Time Stamp and Interrupt source.

4. Set EHL bit to 1 or 0 to choose high or low level (or rising or falling edge) detection on pin 
EVI.

5. Select EDGE DETECTION (ET = 00) or LEVEL DETECTION WITH FILTERING (ET ‚â† 00).

6. Set TSOW bit to 1 if the last occurred event has to be recorded and TS registers are overwritten.
Hint: The counter Count TS is always working, independent of the settings of the overwrite bit 
TSOW.

7. Write 1 to TSR bit, to reset all Time Stamp registers to 00h. Bit TSR always returns 0 when 
read.

8. Set CEIE bit to 1 to enable clock output when external event occurs. See also CLOCK OUTPUT 
SCHEME.

9. Set TSE bit to 1 if you want to enable the Time Stamp function.

10. Set EIE bit to 1 if you want to get a hardware interrupt on ÃÖINÃÖÃÖÃÖTÃÖ pin.

November 2021                         72/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.11.3. EDGE DETECTION (ET = 00)

Example with rising edge detection and interrupt output:

EVI

EVF     1                      2

INT

Write operation

Settings: EHL = 1, ET = 00, TSS = 0, EIE = 1.

¬π When a rising edge on EVI pin is detected, the EVF flag is set to 1 and the ÃÖINÃÖÃÖÃÖTÃÖ output pin 
goes LOW.

¬≤ If the ÃÖINÃÖÃÖÃÖTÃÖ pin is LOW, its status changes as soon as the EVF flag is cleared to 0, even if 
EVI input is high
level.

4.11.4. LEVEL DETECTION WITH FILTERING (ET ‚â† 00)

Example with high level detection and interrupt output:

EVI


sampling

EVF

1     1

tSP

tSP

1     2

tSP

4

tSP      tSP

3


INT

Write operation

tSP < tDELAY < 2 tSP

tSP < tD EL AY < 2 tSP

Settings: EHL = 1, ET ‚â† 00, TSS = 0, EIE = 1.

Available sampling periods for the digital debounce filtering:

ET = 01, tSP =  3.9 ms
ET = 10, tSP = 15.6 ms
ET = 11, tSP = 125.0 ms

¬π From the previous sampling pulse to this sampling pulse, no stable high level was detected.

¬≤ If a stable high level on EVI pin during one sampling period is detected, the EVF flag is set to 
1 and the ÃÖINÃÖÃÖÃÖTÃÖ
output pin goes LOW. The delay time tDELAY is between tSP and 2 tSP.

¬≥ If the ÃÖINÃÖÃÖÃÖTÃÖ pin is LOW, its status changes as soon as the EVF flag is cleared to 0.

‚Å¥ When the high level on EVI pin remains stable, again, the EVF flag is set to 1 and the ÃÖINÃÖÃÖÃÖTÃÖ 
output pin goes
LOW. The delay time tDELAY is again between tSP and 2 tSP.

November 2021                         73/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.12. AUTOMATIC BACKUP SWITCHOVER INTERRUPT FUNCTION

The Automatic Backup Switchover Interrupt function generates an interrupt event when the BSM field 
(EEPROM
37h) is set to 01 (DSM) or 11 (LSM) and a switchover from VDD Power state to VBACKUP Power state 
occurs.

If enabled (TSS = 1, TSE = 1, BSIE = 1 and BSF flag was cleared to 0 before) and a Backup 
Switchover is detected,
the clock and calendar registers are captured and copied into the Time Stamp registers, the 
ÃÖINÃÖÃÖÃÖTÃÖ is issued and the
BSF flag is set to 1 to indicate that a Backup Switchover has occurred.

Similar to the External Event Interrupt Function, clock output on CLKOUT pin can be controlled by 
the Automatic
Backup Switchover Interrupt function. When bits TSS and EIE are set to 1, the internal event 
interrupt signal (EI)
created by the Automatic Backup Switchover function can be used to enable the clock output on 
CLKOUT pin
automatically.

If enabled (TSS, EIE, CEIE, CLKIE are set to 1 and CLKOE is cleared to 0 and a frequency is 
selected in the FD
field), when again in VDD Power state, CLKOUT pin outputs the frequency (see INTERRUPT SCHEME and 
CLOCK
OUTPUT SCHEME).

Note that a debounce logic provides a debounce time tDEB of 122 Œºs to 183 Œºs, which will filter VDD 
oscillation when
the backup switchover will switch back from VBACKUP to VDD (see AUTOMATIC BACKUP SWITCHOVER 
FUNCTION).
I¬≤C access is possible in VDD Power state after the debounce time tDEB.

Note that the FEDE bit (EEPROM 37h) should always be set to 1, so that Fast Edge Detection (‚â• 7 
V/ms) is enabled
(see EEPROM BACKUP REGISTER). FEDE = 1 is the default value on delivery.

November 2021                         74/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.12.1. AUTOMATIC BACKUP SWITCHOVER DIAGRAM

Diagram of the Automatic Backup Switchover Interrupt function:

TSE    1                  7   8

TSR                                  10

BSIE                             9

INT

BSF         3    4      6

VBACKUP          2       5

Power  state          


Clock & Calendar

registers

Set value to A

event

A+1

event

A+2

event

A+3

event

A+4

A+5


Count TS register

TS registers
(TSOW = 1)

TS registers
(TSOW = 0, default)

00h if reseted

00h if reseted

00h if reseted

01h

A+1

02h

A+2

A+1

03h

A+3

00h

All 00h

All 00h

Write operation (I¬≤C access only in VDD Power state)

1 Initialize clock and calendar and set bits TSS and TSE to 1 and select TSOW (0 or 1) if a Time 
Stamp from
the Backup Switchover function is needed and set BSIE bit to 1 if interrupt on ÃÖINÃÖÃÖÃÖTÃÖ pin is 
required. The BSF
flag needs to be cleared to reset the ÃÖINÃÖÃÖÃÖTÃÖ pin and to prepare the system for an event. To 
enable switchover
function the BSM field (EEPROM 37h) is set to 01 (DSM) or 11 (LSM).

2 A backup switchover from VDD Power state to VBACKUP Power state occurs. The value (A+1) is
captured/copied into the TS registers and the value in the Count TS register is incremented by one.
The counter Count TS is always working, regardless of the settings of the overwrite bit TSOW.

3 When an Automatic Backup Switchover Interrupt event occurs, the BSF flag is set to 1and ÃÖINÃÖÃÖÃÖTÃÖ 
pin output
goes LOW when BSIE = 1.

4 The BSF flag retains 1 until it is cleared to 0 by software.

5 No interrupt occurs on ÃÖINÃÖÃÖÃÖTÃÖ pin because the BSF flag was not set back to 0. But, new value 
(A+2) is captured
in the TS registers if the Time Stamp overwrite bit TSOW is set to 1.

6 When the ÃÖINÃÖÃÖÃÖTÃÖ pin is LOW, its status changes as soon as the BSF flag is cleared to 0.

7 If TSE is set to 0, no time stamp is captured.

8 If BSF is 1 and the TSE bit is set from 0 to 1, no event is detected.

9 While the BSF flag is 1, the ÃÖINÃÖÃÖÃÖTÃÖ status can be controlled by the BSIE bit.

¬π‚Å∞ When writing 1 to TSR bit, all seven time stamp registers (Count TS to Year TS) are reset to 
00h. Bit TSR
always returns 0 when read.

November 2021                         75/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.12.2. USE OF THE AUTOMATIC BACKUP SWITCHOVER INTERRUPT

The following registers and bits are related to the Automatic Backup Switchover Interrupt, Time 
Stamp and Automatic
Clock output function:

‚Ä¢  Seconds Register (00h) (see CLOCK REGISTERS)

‚Ä¢  Minutes Register (01h) (see CLOCK REGISTERS)

‚Ä¢  Hours Register (02h) (see CLOCK REGISTERS)

‚Ä¢  Date Register (04h) (see CALENDAR REGISTERS)

‚Ä¢  Month Register (05h) (see CALENDAR REGISTERS)

‚Ä¢  Year Register (06h ) (see CALENDAR REGISTERS)

‚Ä¢  Count TS (14h) (see TIME STAMP REGISTERS)

‚Ä¢  Seconds TS (15h) (see TIME STAMP REGISTERS)

‚Ä¢  Minutes TS (16h) (see TIME STAMP REGISTERS)

‚Ä¢  Hours TS (17h) (see TIME STAMP REGISTERS)

‚Ä¢  Date TS (18h) (see TIME STAMP REGISTERS)

‚Ä¢  Month TS (19h) (see TIME STAMP REGISTERS)

‚Ä¢  Year TS (1A) (see TIME STAMP REGISTERS)

‚Ä¢  BSF flag (see STATUS AND CONTROL REGISTERS, 0Eh ‚Äì Status)

‚Ä¢  TSE, EIE and 12_24 bits (see STATUS AND CONTROL REGISTERS, 10h ‚Äì Control 2)

‚Ä¢  CEIE bit (see STATUS AND CONTROL REGISTERS, 12h ‚Äì Clock Interrupt Mask)

‚Ä¢  TSR bit, TSOW bit and TSS bit (see EVENT CONTROL REGISTER, 13h ‚Äì Event Control)

‚Ä¢  BSIE bit, FEDE bit and BSM field (see EEPROM BACKUP REGISTER, 37h ‚Äì EEPROM Backup)

Prior to entering any other settings, it is recommended to write a 0 to the TSE and BSIE bit to 
prevent inadvertent
interrupts on ÃÖINÃÖÃÖÃÖTÃÖ pin.

Procedure to use the Automatic Backup Switchover Interrupt, Time Stamp and Automatic Clock output 
function:

1. Initialize bits TSE and BSIE to 0.

2. Clear flag BSF to 0.

3. Set TSS bit to 1 to select Backup Switchover as Time Stamp and Interrupt source.

4. Set TSOW bit to 1 if the last occurred event has to be recorded and TS registers are overwritten.
Hint: The counter Count TS is always working, independent of the settings of the overwrite bit 
TSOW.

5. Write 1 to TSR bit, to reset all Time Stamp registers to 00h. Bit TSR always returns 0 when 
read.

6. Set CEIE bit to 1 to enable clock output when a backup switchover occurs.

Caution: This function is only working with the Automatic Backup Switchover function when bits TSS 
and
TSE are set to 1. See also CLOCK OUTPUT SCHEME.

7. Set TSE bit to 1 if you want to enable the Time Stamp function.

8. The FEDE bit should always be set to 1, so that Fast Edge Detection (‚â• 7 V/ms) is enabled.

9. Set the BSIE bit to 1 if you want to get a hardware interrupt on ÃÖINÃÖÃÖÃÖTÃÖ pin.

10. Choose the switchover mode (DSM or LSM) and write the corresponding value in the BSM field.

See also EEPROM READ/WRITE CONDITIONS.

November 2021                         76/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.13. POWER ON RESET INTERRUPT FUNCTION

The Power On Reset Interrupt function is enabled by the PORIE bit (EEPROM 35h). The PORIE bit has 
to be set
beforehand in the EEPROM, not in the RAM (see EEPROM READ/WRITE).

When voltage drop below VPOR is detected (VDD < VPOR) the PORF flag is set to 1 to indicate that a 
Power On Reset
has occurred and when the PORIE bit is 1 the ÃÖINÃÖÃÖÃÖTÃÖ pin goes to low level.

A PORF value of 1 indicates also that the time information is corrupted. The value 1 is retained 
until a 0 is written by
the user.

4.13.1. POWER ON RESET DIAGRAM

Diagram of the Power On Reset Interrupt function:

PORIE             2                         7

5

INT               3                         8

PORF     1            4       6


VDD

VPOR

tSTART

tREFR

tDELAY

VPOR

tSTART

tREFR

tDELAY


State

POR

Operating

POR

Operating

Write operation

¬π Flag PORF is set when VDD was below VPOR.

¬≤ If the PORIE bit (EEPROM 35h) was set to 1 beforehand (in EEPROM), the PORIE bit in the RAM is 
set to 1
after the start-up time tSTART = 0.2 s including the first refreshment time tPREFR = ~66 ms.

¬≥ If the PORIE bit is 1 and a Power On Reset event occurs, the ÃÖINÃÖÃÖÃÖTÃÖ pin output goes LOW after a 
delay time of
tDELAY = ~1 ms.

‚Å¥ The PORF flag retains 1 until it is cleared to 0 by software.

‚Åµ While the PORF flag is 1, the ÃÖINÃÖÃÖÃÖTÃÖ status can be controlled by the PORIE bit.

‚Å∂ If the ÃÖINÃÖÃÖÃÖTÃÖ pin is LOW, its status changes as soon as the PORF flag is cleared to 0.

‚Å∑ If the PORIE bit (EEPROM 35h) was set to 1 beforehand (in EEPROM), the PORIE bit in the RAM is 
set to 1
after the start-up time tSTART = 0.2 s including the first refreshment time tPREFR = ~66 ms.

Or else, if the PORIE bit (EEPROM 35h) was set to 0 beforehand (in EEPROM), the PORIE bit in the 
RAM is
set to 0 after the start-up time tSTART = 0.2 s and the first refreshment time tPREFR = ~66 ms.

‚Å∏ If the PORIE bit is 1 when a Power On Reset event occurs, the ÃÖINÃÖÃÖÃÖTÃÖ pin output goes LOW after 
a delay time
of tDELAY = ~1 ms.

Or else, if the PORIE bit is 0 when a Power On Reset event occurs, the ÃÖINÃÖÃÖÃÖTÃÖ pin output stays 
inactive (HIGH).

November 2021                         77/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.13.2. USE OF THE POWER ON RESET INTERRUPT

The following registers and bits are related to the Power On Reset Interrupt function (including 
EEPROM handling):

‚Ä¢  PORF flag and EEbusy bit (see STATUS AND CONTROL REGISTERS, 0Eh ‚Äì Status)

‚Ä¢  EERD bit (see STATUS AND CONTROL REGISTERS, 0Fh ‚Äì Control 1)

‚Ä¢  EE Address register (25h) (see EEPROM MEMORY CONTROL REGISTERS)

‚Ä¢  EE Data register (26h) (see EEPROM MEMORY CONTROL REGISTERS)

‚Ä¢  EE Command register (27h) (see EEPROM MEMORY CONTROL REGISTERS)

‚Ä¢  PORIE bit (see EEPROM CLKOUT REGISTER, 35h ‚Äì EEPROM Clkout)

The PORIE bit has to be set beforehand in the EEPROM, not in the RAM (see EEPROM READ/WRITE).
Procedure to use the Power On Reset Interrupt function:

1. In the EEPROM, set the PORIE bit to 1 if you want to get a hardware interrupt on ÃÖINÃÖÃÖÃÖTÃÖ pin at 
the next Power
On Reset event. Procedure according to EEPROM READ/WRITE.

2. The first interrupt will occur after the next POR event.

November 2021                         78/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.14. TIME STAMP FUNCTION

The Time Stamp function is enabled by the control bit TSE. Sources are the External Event Interrupt 
function
(TSS = 0) or the Automatic Backup Switchover Interrupt function (TSS = 1).

If a source is enabled and an event is detected, the Time Stamp (TS) registers are recorded. When 
the TSOW bit is
set to 0 and the EVF flag was cleared to 0 before, only one (the first) event is recorded. When the 
TSOW bit is set to
1, the last event is recorded (EVF flag does not need to be cleared). The counter Count TS is 
always working,
independent of the settings of the overwrite bit TSOW.

‚Ä¢  When writing 1 to TSR bit, all seven time stamp registers (Count TS to Year TS) are reset to 
00h. Bit TSR
always returns 0 when read.

‚Ä¢  Before starting the Time Stamp function, it is recommended to write 0 to the TSE bit and 1 to 
TSR bit.

‚Ä¢  When writing 1 to the RESET bit or when writing to the Seconds register, Time Stamp capture/copy 
does
not occur. Bit RESET always returns 0 when read.

‚Ä¢  Note that changing TSS bit value from 1 to 0 before clearing TSE can create unwanted Time 
Stamp
capture/copy from the External Event Interrupt function (according to EHL bit, but regardless of 
the status
of   the ET field).

Procedure for using the Time Stamp function:

1. Initialize bits TSE and EIE to 0.

2. Select TSOW (0 or 1), clear EVF and BSF.

3. Write 1 to TSR bit, to reset all Time Stamp registers to 00h. Bit TSR always returns 0 when 
read.

4. Select the External Event Interrupt function (TSS = 0) or the Automatic Backup Switchover 
Interrupt
function (TSS = 1) as time stamp source and initialize the appropriate function (see EXTERNAL EVENT
INTERRUPT FUNCTION or AUTOMATIC BACKUP SWITCHOVER INTERRUPT FUNCTION).

5. Set the TSE bit to 1 to enable the Time Stamp function.

Hint: The ÃÖINÃÖÃÖÃÖTÃÖ signal is issued when EIE (RAM) or BSIE (EEPROM 37h) bit is set to 1. The EVF or 
BSF flag is set to
1 to indicate that a corresponding event has occurred.

Caution: Because the EVF flag is internally used for the identification of a First Event detection 
it is set by an event
from the External Event Interrupt function (TSS = 0, TSE = 1) or by an event of the Backup 
Switchover Interrupt
function (TSS = 1, TSE = 1). See also the following scheme:

November 2021                         79/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

Time Stamp scheme:


reset

RESET

Seconds

(4)


EVI

EHL, ET

EXT. EVENT FUNCTION

TSS

PRESCALER

Interrupt
scheme

TSE

Interrupt
scheme

0

auto

1

1 Hz tick

Seconds
Minutes
Hours
Date
Month
Year

interface:
read/write


0

BSM, FEDE     1

 0       0

1      1

capture/copy   Time Stamp
auto


AUTOMATIC BACKUP
SWITCHOVER FUNCTION

Interrupt

Interrupt
scheme

TSR

0

(3)

auto

Count TS
Seconds TS
Minutes TS
Hours TS

Date TS

interface: (5)
read only


TSOW

(1)

scheme

EVF

(2)

1

AND

clear

1

Month TS
Year TS


0 first event

1    1 last event

&     OR

‚â•1

enable overwrite

(1) When TSOW bit is set to 1 the TS registers (Seconds TS to Year TS) are overwritten. The last 
occurred
event is recorded. When TSOW bit is set to 0, the TS registers are overwritten once only. To 
initialize or
reinitialize the first event function, the EVF has to be cleared (the TS registers can be cleared 
by writing
1   to the TSR bit). The counter Count TS is always working, independent of the settings of the 
overwrite
bit TSOW.

(2) If set to 0 beforehand, the EVF flag indicates the occurrence of an External Event or a Backup
Switchover. The value 1 is retained until a 0 is written by the user.

The EVF flag is set to 1 when:

‚Ä¢  An external event occurs and TSS = 0 and (EIE = 1 or TSE = 1).

‚Ä¢  A backup switchover occurs and TSS = 1 and (EIE = 1 or TSE = 1).

(3) When writing 1 to TSR bit, all seven time stamp registers (Count TS to Year TS) are reset to 
00h. Bit
TSR always returns 0 when read.

(4) Writing 1 to the RESET bit or writing to the Seconds register does not create an extra 1 Hz 
tick and the
Time Stamp capture/copy does not occur. Bit RESET always returns 0 when read.

(5) During I2C read access to the TS registers the time stamp capture function is blocked.

See also Interrupt Scheme (Part 2) in section INTERRUPT SCHEME.

November 2021                         80/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.15. FREQUENCY OFFSET CORRECTION

An aging adjustment or accuracy tuning can be done with the EEOffset value. The correction is made 
purely digital
and has only the effect of shifting the time vs. temperature curve vertically up or down. It has no 
effect on the time
vs. temperature characteristics of the final frequency. The EEOffset value contains a two's 
complement number with
a range of +255 to -256 adjustment steps. The minimal correction step (one LSB) is ¬±1 / (16384 √ó 
64) = ¬±0.9537 ppm
and the maximum correction range is from +243.2 ppm to -244.1 ppm. The compensation period is 64 
seconds.

Note that the signed offset value EEOffset corresponds to the correction value of the measured 
frequency (32.768
kHz). The non-volatile user programmable EEOffset value (factory calibrated time accuracy is ¬±1 ppm 
@ 25¬∞C) can
be adjusted by the user. See chapters below.

Caution: Bits 8 to 1 of the EEOffset value are in the register 36h ‚Äì EEPROM Offset (see EEPROM 
OFFSET
REGISTER). Bit 0 (LSB) of the EEOffset value is in the register 37h ‚Äì EEPROM Backup (see EEPROM 
BACKUP
REGISTER).

4.15.1. EEOFFSET VALUE DETERMINATION

The EEOffset value is determined by the following process:

1. Select the 32.768 kHz frequency on the CLKOUT pin.

(If another frequency than 32.768 kHz is selected, the EEOffset value has to be set to 0 so that the
uncorrected frequency can be measured, and the following calculations have to be adapted.)

2. Measure the frequency Fmeas at CLKOUT pin in Hz.

3. Compute the offset value required in ppm: POffset = ((Fmeas ‚Äì 32768) / 32768 √ó 1‚Äô000‚Äô000)

4. Compute the offset value in steps: Offset = POffset / (1 / (16384 √ó 64) in ppm) = POffset / 
(0.9537 ppm)

5. If Offset > 256, the frequency is too high to be corrected.

6. Else if 1 ‚â§ Offset ‚â§ 256 (correction is -1 ‚â• OffsetCorr. ‚â• -256), ü°™ set EEOffset = 512 ‚Äì 
Offset

7. Else if -255 ‚â§ Offset ‚â§ 0 (correction is +255 ‚â§ OffsetCorr. ‚â§ 0), ü°™ set EEOffset = - 
Offset

8. Else the frequency is too low to be corrected.

Examples:

‚Ä¢  If 32768.48 Hz is measured when the 32.768 kHz clock is selected, the offset is +0.48 Hz, which 
is

+0.48 Hz / 32768 Hz √ó 1‚Äô000‚Äô000 = +14.648 ppm. The Offset value in steps is then calculated as 
follows:

+14.648 ppm / 0.9537 ppm = +15.36, the rounded integral part is 15 (the offset correction is -15 
steps).
The unsigned EEOffset value is then: 512 ‚Äì 15 = +497. In binary, EEOffset = 111110001.

‚Ä¢  If 32767.52 Hz is measured when the 32.768 kHz clock is selected, the offset is -0.48 Hz, which 
is

-0.48 Hz / 32768 Hz √ó 1‚Äô000‚Äô000 = -14.648 ppm. The Offset value in steps is then calculated as 
follows:

-14.648 ppm / 0.9537 ppm = -15.36, the rounded integral part is -15 (the offset correction is +15 
steps).
The EEOffset value is then: - (-15) = +15. In binary, EEOffset = 000001111.

4.15.2. VERIFICATION OF THE CORRECTED TIME ACCURACY

The offset correction can be verified by the following process:

1. Enter the calculated EEOffset value (see EEOFFSET VALUE DETERMINATION).

2. Select the 1 Hz frequency on the CLKOUT pin (if another frequency is selected the following 
calculations
have to be adapted).

3. Measure every period during one compensation period of 64 seconds at CLKOUT pin.

4. Calculate the average frequency Fmeas_aver in Hz.

5. Compute the new achieved offset value in ppm: POffset = ((Fmeas_aver ‚Äì 1) / 1 √ó 1‚Äô000‚Äô000)

November 2021                         81/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.16. UNIX TIME COUNTER

The UNIX Time counter is a 32-bit counter, unsigned integer, which rolls over to 00000000h when 
reaching the value
FFFFFFFFh. The 4 bytes are fully readable and writable. The counter source clock is the digitally 
offset compensated
1 Hz tick.

4.16.1. SETTING THE UNIX TIME

During I2C write access with an access time smaller than 950 ms the UNIX registers (UNIX Time 0 to 
UNIX Time 3)
are blocked. Unlike to the setting of the clock and calendar registers, after I2C STOP condition a 
possibly memorized
1 Hz tick can be lost.

Advantage of register blocking:

‚Ä¢  Prevents faulty writing to the UNIX registers during an I2C write access (no incrementing of 
UNIX registers
during the write access).

‚Ä¢  No reading is needed for control. The written data are coherent.

If the I2C write access takes longer than 950 ms the I2C bus interface is reset by the internal bus 
timeout function. In
this case the previous UNIX value is maintained and the UNIX increment (1 Hz tick) continues to 
operate normally
(a pending 1 Hz tick can be lost). Restarting of communications begins with transfer of the START 
condition again.

Since when writing immediately to the four UNIX registers, a possibly memorized 1 Hz tick can be 
lost, it is
recommended to make a reset of the prescaler before setting the UNIX time (see RESET BIT FUNCTION). 
The 32-
bit UNIX counter value itself does not change during reset. The time between the reset and the I2C 
STOP after writing
the UNIX time should be within 950 ms. See diagram below.

Advantage of this method:

‚Ä¢  No 1 Hz tick will be lost during write access to the four UNIX registers.

‚Ä¢  Prevents unwanted difference of one second between Seconds register and UNIX time.

November 2021                         82/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

Example for setting the UNIX time using the reset function:

1 Hz CLKOUT

or INT   1

UNIX Time 0

UNIX Time 1

UNIX Time 2


UNIX Time 3

1 s

RESET/

or Seconds

I¬≤C-bus

1 s ‚Äì 0 to 244 ¬µs      1 s

2

3

Write operation

1 To monitor the synchronicity of the 1 Hz tick to an external clock source, the 1 Hz clock can be 
enabled

on CLKOUT pin or on interrupt output pin ÃÖINÃÖÃÖÃÖTÃÖ. For both, the negative edge corresponds to the 1 
Hz tick for
the clock counter increment (except the negative edge from reset).

2 Writing 1 to the RESET bit or writing to the Seconds register for a consistent and highly 
accurate time
adjustment (synchronization), and for the preparation for write access to the four UNIX registers 
without
losing a possibly memorized 1 Hz tick. The UNIX value is not changed right at this moment. The 
first 1 Hz
period after reset will be 0 to 244 ¬µs shorter than 1 second. The RESET bit always returns 0 when 
read
(see RESET BIT FUNCTION).

3 A new value is entered to the UNIX Time counter registers (UNIX Time 0 to UNIX Time 3). Note that 
I2C
STOP condition after writing to the UNIX registers does not provoke a synchronization of the 1 Hz 
tick.

November 2021                         83/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.16.2. READING THE UNIX TIME

During I2C read access with an access time smaller than 950 ms the UNIX registers (UNIX Time 0 to 
UNIX Time 3)
are fully readable but not blocked. Like to the reading of the clock and calendar registers, after 
I2C STOP condition
a possibly memorized 1 Hz tick is realized.

Advantage of the memorized 1 Hz tick:

‚Ä¢  After reading, one memorized 1 Hz tick is handled. The UNIX time is updated.

If the I2C read access takes longer than 950 ms the I2C bus interface is reset by the internal bus 
timeout function. In
this case all UNIX data that is read has a value of FFh, the pending 1 Hz tick is realized and the 
UNIX increment (1
Hz tick) continues to operate normally. Restarting of communications begins with transfer of the 
START condition
again.

Two methods for reading the UNIX time are recommended:

1. Read the four registers (UNIX Time 0 to UNIX Time 3) twice and check for consistent results.

2. Generate 1 Hz interrupt on ÃÖINÃÖÃÖÃÖTÃÖ pin with PERIODIC TIME UPDATE INTERRUPT FUNCTION for the 
MCU,

when can be read. The time between the interrupt event and the I2C STOP after reading the UNIX time
should be within 950 ms. No second reading needed.

November 2021                         84/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.17. RESET BIT FUNCTION

The RESET bit is used for a software-based accurate and safe starting of the time circuits 
(synchronization). Writing
to the Seconds register has the same effect.

When writing 1 to the RESET bit or when writing to the Seconds register, the clock prescaler 
frequencies for 8192
Hz to 1 Hz are reset and an eventual present memorized 1 Hz update is also reset. The RESET bit 
always returns 0
when read. Because the upper stage of the prescaler is not reset (16.384 kHz) and the I2C interface 
is asynchronous,
the first 1 Hz period after reset will be 0 to 244 ¬µs shorter than 1 second. Resetting the 
prescaler will have an influence
on the length of current clock period on all subsequent peripherals (clock and calendar, CLKOUT 
clock, timer clock,
update timer clock, UNIX clock, EVI input filter).

Writing 1 to the RESET bit or writing to the Seconds register will not affect the CLKOUT of the 
32.768 kHz (see also
CLKOUT FREQUENCY SELECTION).

Scheme of the reset function:


OSCILLATOR

F‚ÇÄ      F‚ÇÅ

RESET

F13

RESET

F14

RESET

0   1 Hz tick

1

RESET

Seconds (1)


1 Hz

32 Hz

64 Hz

1024 Hz

8192 Hz

32.768 kHz

CLKOUT sour ce

(1) When writing 1 to the RESET bit or when writing to the Seconds register has the same effect to 
the
prescaler.

Procedure for setting the clock and calendar values using the RESET bit function:

1. Write the desired clock and calendar values within 950 ms to the registers (seconds, minutes, 
hours,
weekday, date, month and year).

2.  Write 1 to the RESET bit or write a value to the Seconds register for a synchronized start of 
the time
circuits (1 Hz tick). The RESET bit always returns 0 when read.

See also sections SETTING THE TIME and SETTING THE UNIX TIME.

November 2021                         85/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

Timing of the reset function:

1 Hz CLKOUT

or INT   1


Seconds register

(using RESET bit)

Seconds register
(writing to it)

A

A     A+1

A+1

B

A+2

B+1

B+2

A+3

C

A+4

C+1


1 s

RESET/

or Seconds

1 s ‚Äì 0 to 244 ¬µs   1 s

2

1 s ‚Äì 0 to 244 ¬µs   1 s

3

Write operation

¬π To monitor the synchronicity of the 1 Hz tick to an external clock source, the 1 Hz clock can be 
enabled

on CLKOUT pin or on the interrupt output pin ÃÖINÃÖÃÖÃÖTÃÖ. For both, the negative edge corresponds to 
the 1 Hz tick
for the clock counter increment (except the negative edge from reset).

¬≤ Writing 1 to the RESET bit or writing to the Seconds register creates an immediate negative edge 
on the
HIGH signal on CLKOUT or ÃÖINÃÖÃÖÃÖTÃÖ pin. When writing 1 to the RESET bit the value in the Seconds 
register does
not change right at this moment. RESET bit always returns 0 when read. The first 1 Hz period after 
reset will
be 0 to 244 ¬µs shorter than 1 second.

¬≥ Writing 1 to the RESET bit or writing to the Seconds register does not change the LOW signal on 
CLKOUT or

ÃÖINÃÖÃÖÃÖTÃÖ pin. The first 1 Hz period after reset will be 0 to 244 ¬µs shorter than 1 second.

November 2021                         86/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.18. USER PROGRAMMABLE PASSWORD

After a Power up and the first refreshment of tPREFR = ~66 ms, the Password PW registers (RAM 21h 
to 24h) are
reset to 00h and the value in EEPWE (EEPROM 30h) and the values in the EEPROM Password EEPW 
registers
(EEPROM 31h to 34h) are copied from the EEPROM to the corresponding RAM mirror.

The first four Password registers (PW), in case of the use of the function (enabled by writing 255 
into the EEPROM
Password Enable register EEPWE), are used to write the 32-Bit Password necessary to be able to 
write in all writable
registers that have the convention WP (time, control, user RAM, configuration EEPROM and user EEPROM
registers). The 32-Bit Password PW is compared to the 32 bits stored in the RAM mirror of the 
EEPROM Password
EEPW (see PASSWORD REGISTERS, EEPROM PASSWORD ENABLE REGISTER and EEPROM PASSWORD
REGISTERS).

Caution: The number of possible passwords is 232 ‚âà 4.3 √ó 109 = 4.3 billion.

4.18.1. ENABLE/DISABLE WRITE PROTECTION

If the write protection function is enabled by writing 255 in register EEPWE (EEPROM 30h), it 
remains possible to
read all the registers except the EEPROM registers. The EEPROM registers cannot be read because it 
cannot be
written to the EE Address and EE Command registers. If the function is not enabled, read and write 
are possible for
all corresponding registers.

If the write protection function is enabled, it is necessary to first write the correct 32-Bit 
Password PW (PW = EEPW)
before any attempt to write in the RAM registers (Unlock), and to read and write in the EEPROM 
registers.

Once the user is finished with the write access and subsequently the write protection is still 
enabled or enabled again
(by writing 255 in EEPROM register EEPWE), it is necessary to write an incorrect password (PW ‚â† 
EEPW) into the
Password registers PW0 to PW3 in order to write-protect (Lock) the registers. See program sequences 
below and
FLOWCHART.

Enable write protection:

1. Initial state: WP-Registers are Not write-protected (EEPWE ‚â† 255)
(Reference password is stored in the EEPROM Password EEPW)

2. Disable automatic refresh by setting EERD = 1

3. Enable password function by entering EEPWE = 255 (RAM)

4. Enter the correct password PW (PW = EEPW) to unlock write protection

5. Update EEPROM (all Configuration RAM ü°™ EEPROM) by writing EECMD = 00h followed by 
11h

6. Enable automatic refresh by setting EERD = 0

7. Enter an incorrect password PW (PW ‚â† EEPW) to lock the device

8. Final state: WP-Registers are Write-protected by password (EEPWE = 255)

Disable write protection:

1. Initial state: WP-Registers are Write-protected by password (EEPWE = 255)
(Reference password is stored in the EEPROM Password EEPW)

2. Enter the correct password PW (PW = EEPW) to unlock write protection

3. Disable automatic refresh by setting EERD = 1

4. Disable password function by entering EEPWE ‚â† 255) (RAM)

5. Update EEPROM (all Configuration RAM ü°™ EEPROM) by writing EECMD = 00h followed by 
11h

6. Enable automatic refresh by setting EERD = 0

7. Final state: WP-Registers are Not write-protected (EEPWE ‚â† 255)

Hint: The EEPROM values of the reference password in the EEPROM Password EEPW registers can be READ 
with
the Read one EEPROM byte command (EECMD = 00h followed by 22h) when in Unlocked state (registers 
not write-
protected). This option is useful if it is not certain which password is written in the EEPW before 
the write protection
function is enabled. The RAM mirror from the EEPW registers can never be read.

November 2021                         87/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.18.2. CHANGING PASSWORD

To code a new password, the user has to first enter the current (correct) Password PW (PW = EEPW) 
into the
registers 21h to 24h, if the WP-Registers are write protected, and then write a value not equal to 
all 1 (value ‚â† 255)
in the EEPWE register (EEPROM 30h) to unlock write protection, and then write the new reference 
password EEPW
into the EEPROM registers 31h to 34h and writing all 1 (value = 255) in the EEPWE register to 
enable password
function. See program sequences below and FLOWCHART.

Change password if password function is enabled (EEPWE = 255):

1. Initial state: WP-Registers are Write-protected by old reference EEPROM Password EEPW

2. Enter old, correct password PW (PW = EEPW) to unlock write protection

3. Disable automatic refresh by setting EERD = 1

4. Disable password function by entering EEPWE ‚â† 255 (RAM)

5. Define a new reference password in the EEPW in registers (RAM)

6. Enable the password function by entering EEPWE = 255 (RAM)

7. Enter the correct password PW (PW = EEPW) to unlock write protection

8. Update EEPROM (all Configuration RAM ü°™ EEPROM) by writing EECMD = 00h followed by 
11h

9. Enable automatic refresh by setting EERD = 0

10. Enter an incorrect password PW (PW ‚â† EEPW) to lock the device

11. Final state: WP-Registers are Write-protected by new reference EEPROM Password EEPW

Change password if password function is disabled (EEPWE ‚â† 255):

1. Initial state: Old reference password is stored in the EEPROM Password EEPW

2. Disable automatic refresh by setting EERD = 1

3. Define a new reference password in the EEPW registers (RAM)

4. Update EEPROM (all Configuration RAM ü°™ EEPROM) by writing EECMD = 00h followed by 
11h

5. Enable automatic refresh by setting EERD = 0

6. Final state: New reference password is stored in the EEPROM Password EEPW

Note that the EEPROM password EEPW = 00000000h is not a real password, because after POR the 
password PW
is also 00000000h (PW = EEPW) and although the password function is enabled after POR refresh (EEPW 
= 255)
the PW-Registers are unlocked.

November 2021                         88/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

4.18.3. FLOWCHART

The following flowchart describes the programming of the enabling and disabling of the register 
write protection by
user password and the changing of the user password and the other Configuration EEPROM registers 
(35h ‚Äì 37h)
if write protection is enabled or disabled. In this example the Update EEPROM command (writing 
EECMD = 00h
followed by 11h) is applied to write (store) data from all Configuration RAM mirror bytes 
(addresses 30h to 37h) into
the corresponding Configuration EEPROM bytes. See also USE OF THE CONFIGURATION REGISTERS.

User programmable password flowchart:


Edit all RAM
(00h - 28h)

POR

(1)

EEPWE / 255

WP-Registers are
Not write-protected


EERD = 0

Enable

automatic refresh

No write

protection

Disable

automatic refresh

EERD = 1


EECMD = 00h&11h
(RAM ü°™ EEPROM)

Update
EEPROM

Edit other
Config. EEPROM

(35h - 37h)

(RAM)


EEPWE / 255

(RAM)

Disable

password function

Define new

password EEPW

Enable

password function

EEPWE = 255

(RAM)


EERD = 1    Disable

automatic refresh

(RAM)

Edit other

Config. EEPROM
(35h - 37h)

(RAM)

Using write
protection

(3)

(3)

Update
EEPROM

Enable

automatic refresh

EECMD = 00h&11h
(RAM ü°™ EEPROM)

EERD = 0


Enter correct PW

(PW = EEPW)

Unlock

POR

(2)

EEPWE = 255

Lock

Enter incorrect PW

(PW / EEPW)

WP-Registers are
Write-protected

(1) Entry point after POR refresh when EEPWE ‚â† 255.

(2) Entry point after POR refresh when EEPWE = 255.

(3) If a new reference password has previously been defined in the Password EEPW registers (RAM), 
the
new correct password PW (PW = EEPW) must be entered here in order to unlock the write protection.

November 2021                         89/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

5. I2C INTERFACE

The I2C interface is for bidirectional, two-line communication between different ICs or modules. 
The RV-3028-C7 is
accessed at addresses A4h/A5h, and supports Fast Mode (up to 400 kHz). The I2C interface consists 
of two lines:
one bi-directional data line (SDA) and one clock line (SCL). Both lines are connected to a positive 
supply via pull-up
resistors. Data transfer is initiated only when the interface is not busy.

5.1. BIT TRANSFER

One data bit is transferred during each clock pulse. The data on the SDA line remains stable during 
the HIGH period
of the clock pulse, as changes in the data line at this time are interpreted as a control signals. 
Data changes should
be executed during the LOW period of the clock pulse (see Figure below).

Bit transfer:

SDA

SCL


data line
stable;
data valid

change of
data
allowed

5.2. START AND STOP CONDITIONS

Both data and clock lines remain HIGH when the bus is not busy. A HIGH-to-LOW transition of the 
data line, while
the clock is HIGH, is defined as the START condition (S). A LOW-to-HIGH transition of the data 
line, while the clock
is HIGH, is defined as the STOP condition (P) (see Figure below).

Definition of START and STOP conditions:


SDA
SCL

S

SDA
SCL

P

START condition                STOP condition

A START condition which occurs after a previous START but before a STOP is called a Repeated START 
condition,
and functions exactly like a normal STOP followed by a normal START.

Caution:

When communicating with the RV-3028-C7 module, the series of operations from transmitting the START 
condition
to transmitting the STOP condition should occur within 950 ms.

If this series of operations requires 950 ms or longer, the I2C-bus interface will be automatically 
cleared and set to
standby mode by the bus timeout function of the RV-3028-C7. Note with caution that both write and 
read operations
are invalid for communications that occur during or after this auto clearing operation. When 
writing: no acknowledge
will occur. When reading: FFh will be read.

Restarting of communications begins with transfer of the START condition again.

The I2C auto increment Address Pointer is neither reset by the I2C STOP condition nor by the 
internal stop forced
after timeout.

November 2021                         90/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

5.3. DATA VALID

After a START condition, SDA is stable for the duration of the high period of SCL. The data on SDA 
may be changed
during the low period of SCL. There is one clock pulse per bit of data. Each data transfer is 
initiated with a START
condition and terminated with a STOP condition. The number of data bytes transferred between the 
START and
STOP conditions is not limited (however, the transfer time must be no longer than 950 ms). The 
information is
transmitted byte-wise and each receiver acknowledges with a ninth bit.

5.4. SYSTEM CONFIGURATION

Since multiple devices can be connected with the I2C-bus, all I2C-bus devices have a fixed and 
unique device number
built-in to allow individual addressing of each device.

The device that controls the I2C-bus is the Master; the devices which are controlled by the Master 
are the Slaves. A
device generating a message is a Transmitter; a device receiving a message is the Receiver. The 
RV-3028-C7 acts
as a Slave-Receiver or Slave-Transmitter.

Before any data is transmitted on the I2C-bus, the device which should respond is addressed first. 
The addressing is
always carried out with the first byte transmitted after the START procedure. The clock signal SCL 
is only an input
signal, but the data signal SDA is a bidirectional line.

System configuration:

SDA
SCL


MASTER
TRANSMITTER
RECEIVER

SLAVE

RECEIVER

SLAVE
TRANSMITTER
RECEIVER

MASTER

TRANSMITTER

MASTER
TRANSMITTER
RECEIVER

November 2021                         91/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

5.5. ACKNOWLEDGE

The number of data bytes transferred between the START and STOP conditions from transmitter to 
receiver is
unlimited (however, the transfer time must be no longer than 950 ms). Each byte of eight bits is 
followed by an
acknowledge cycle.

‚Ä¢  A slave receiver, which is addressed, must generate an acknowledge cycle after the reception of 
each
byte.

‚Ä¢  Also a master receiver must generate an acknowledge cycle after the reception of each byte that 
has been
clocked out of the slave transmitter.

‚Ä¢  The device that acknowledges must pull-down the SDA line during the acknowledge clock pulse, so 
that
the SDA line is stable LOW during the HIGH period of the acknowledge-related clock pulse (set-up and
hold times must be taken into consideration).

‚Ä¢  A master receiver must signal an end of data to the transmitter by not generating an acknowledge 
cycle on
the last byte that has been clocked out of the slave. In this event the transmitter must leave the 
data line
HIGH to enable the master to generate a STOP condition.

Data transfer and acknowledge on the I2C-bus:


data output
by transmitter

data output
by receiver

SCL from
master

S
START

condition

not acknowledge

acknowledge

1          2            8          9

clock pulse for
acknowledgement

November 2021                         92/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

5.6. SLAVE ADDRESS

On the I2C-bus the 7-bit slave address 1010010b is reserved for the RV-3028-C7. The entire I2C-bus 
slave address
byte is shown in the following table.


Slave address

Bit 7   Bit 6   Bit 5   Bit 4   Bit 3   Bit 2   Bit 1

1     0     1     0     0     1     0

R/W
Bit 0
1 ( R )

0 ( W )

Transfer data

A5h (read)
A4h (write)

After a START condition, the I¬≤C slave address has to be sent to the RV-3028-C7 device. The R/W bit 
defines the
direction of the following single or multiple byte data transfer. The 7-bit address is transmitted 
MSB first. If this address

is 1010010b, the RV-3028-C7 is selected, the eighth bit indicates a read ( R/W = 1) or a write ( 
R/W = 0) operation
(results in A5h or A4h) and the RV-3028-C7 supplies the ACK. The RV-3028-C7 ignores all other 
address values
and does not respond with an ACK.

In the write operation, a data transfer is terminated by sending either the STOP condition or the 
START condition of
the next data transfer.

5.7. WRITE OPERATION

Master transmits to Slave-Receiver at specified address. The Register Address is an 8-bit value 
that defines which
register is to be accessed next. After writing one byte, the Register Address is automatically 
incremented by 1.

Master writes to slave RV-3028-C7 at specific address:

1) Master sends out the START condition.

2) Master sends out Slave Address, A4h for the RV-3028-C7; the R/W bit is a 0 indicating a write 
operation.

3) Acknowledgement from RV-3028-C7.

4) Master sends out the Register Address to RV-3028-C7.

5) Acknowledgement from RV-3028-C7.

6) Master sends out the Data to write to the specified address in step 4).

7) Acknowledgement from RV-3028-C7.

8) Steps 6) and 7) can be repeated if necessary.

The address is automatically incremented in the RV-3028-C7.

9) Master sends out the STOP Condition.

1       2       3       4       5       6       7          8         9


S   SLAVE ADDRESS

0 A  REGISTER ADDRESS

A     DATA      A

Acknowledge from RV-3028-C7

DATA     A  P

November 2021                         93/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

5.8. READ OPERATION AT SPECIFIC ADDRESS

Master reads data from slave RV-3028-C7 at specific address:

1) Master sends out the START condition.

2) Master sends out Slave Address, A4h for the RV-3028-C7; the R/W bit is a 0 indicating a write 
operation.

3) Acknowledgement from RV-3028-C7.

4) Master sends out the Register Address to RV-3028-C7.

5) Acknowledgement from RV-3028-C7.

6) Master sends out the Repeated START condition (or STOP condition followed by START condition)

7) Master sends out Slave Address, A5h for the RV-3028-C7; the R/W bit is a 1 indicating a read 
operation.

8) Acknowledgement from RV-3028-C7.

At this point, the Master becomes a Receiver and the Slave becomes the Transmitter.

9) The Slave sends out the Data from the Register Address specified in step 4).

10) Acknowledgement from Master.

11) Steps 9) and 10) can be repeated if necessary.

The address is automatically incremented in the RV-3028-C7.

12) The Master, addressed as Receiver, can stop data transmission by not generating an acknowledge 
on the
last byte that has been sent from the Slave-Transmitter. In this event, the Slave-Transmitter must 
leave the
data line HIGH to enable the Master to generate a STOP condition.

13) Master sends out the STOP condition.

1      2      3      4      5  6      7       8      9      10        11     12  13


S  SLAVE ADDRESS

0 A  REGISTER ADDRESS  A  S

SLAVE ADDRESS  1 A

DATA    A

DATA     A  P


Repeated

START

Acknowledge from RV-3028-C7

Acknowledge from Master

No acknowledge from Master

5.9. READ OPERATION

Master reads data from slave RV-3028-C7 immediately after first byte:

1) Master sends out the START condition.

2) Master sends out Slave Address, A5h for the RV-3028-C7; the R/W bit is a 1 indicating a read 
operation.

3) Acknowledgement from RV-3028-C7.

At this point, the Master becomes a Receiver and the Slave becomes the Transmitter.

4) The RV-3028-C7sends out the Data from the last accessed Register Address incremented by 1.

5) Acknowledgement from Master.

6) Steps 4) and 5) can be repeated if necessary.

The address is automatically incremented in the RV-3028-C7.

7) The Master, addressed as Receiver, can stop data transmission by not generating an acknowledge 
on the
last byte that has been sent from the Slave-Transmitter. In this event, the Slave-Transmitter must 
leave the
data line HIGH to enable the Master to generate a STOP condition.

8) Master sends out the STOP condition.

1       2       3       4       5          6      7  8


S   SLAVE ADDRESS   1 A

DATA     A

DATA     A  P


Acknowledge from RV-3028-C7

Acknowledge from Master

No acknowledge from Master

November 2021                         94/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

5.10. I¬≤C-BUS IN SWITCHOVER CONDITION

To save power when the RV-3028-C7 is in VBACKUP Power state the bus I2C-bus interface is 
automatically disabled
(high impedance) and reset. Therefore the communication via I2C interface should be terminated 
before the supply
is switched from VDD to VBACKUP. If the bus communication could not be completed properly, the I¬≤C 
read/write data
integrity is no longer guaranteed.

Note: If the I2C communication has ended in an uncontrolled manner, the I2C-bus interface has to be 
re-initialized by
sending a STOP followed by a START after the device switched back from VBACKUP Power state to VDD 
Power
state.

November 2021                         95/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

6. ELECTRICAL SPECIFICATIONS

6.1. ABSOLUTE MAXIMUM RATINGS

The following Table lists the absolute maximum ratings.

Absolute Maximum Ratings according to IEC 60134:

SYMBOL       PARAMETER          CONDITIONS        MIN      TYP     MAX     UNIT

VDD       Power Supply Voltage                         -0.3             6.0      V

VI        Input voltage           Input Pin               -0.3            VDD +0.3     V

VO        Output voltage          Output Pin              -0.3            VDD +0.3     V

II         Input current                              -10             10      mA

IO        Output current                             -10             10      mA


VESD

ESD Voltage

HBM(1)

CDM(2)

¬±2000    V

¬±500    V


ILU
TOPR
TSTO
TPEAK

Latch-up Current
Operating Temperature
Storage Temperature
Maximum reflow condition

Jedec(3)

JEDEC J-STD-020C

-40

-55

¬±100    mA

85     ¬∞C

125    ¬∞C

265    ¬∞C

(1) HBM: Human Body Model, according to JS-001.

(2) CDM: Charged-Device Model, according to JEDEC JS-002-201X.

(3) Latch-up testing, according to JESD78., Class I (room temperature), level A (100 mA)

November 2021                         96/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

6.2. OPERATING PARAMETERS

For this Table, TA = -40 to +85¬∞C unless otherwise indicated. VDD = 1.2 to 5.5 V, TYP values at 
25¬∞C and 3.0 V.

Operating Parameters:

SYMBOL       PARAMETER          CONDITIONS        MIN      TYP     MAX     UNIT

Supplies


VDD

VBACKUP

IDD

IDD:I2C

IDD:DSM

IDD:LSM

IBACKUP:DSM
IBACKUP:LSM
ŒîIDD:CK32

Power Supply Voltage

Backup Supply Voltage

VDD supply current timekeeping
I¬≤C-bus inactive, CLKOUT
disabled, average current

VDD supply current during

I¬≤C burst read/write, CLKOUT
disabled

VDD supply current in Direct
Switching Mode

I¬≤C-bus inactive, CLKOUT
disabled

VDD supply current in Level
Switching Mode

I¬≤C-bus inactive, CLKOUT
disabled

VBACKUP supply current in Direct
Switching Mode

VBACKUP supply current in Level
Switching Mode

Time-keeping mode(1)
Minimum time-keeping
voltage(1)

I¬≤C-bus (100 kHz)

I¬≤C-bus (400 kHz)

VDD = 1.1 V(2), TA = 25¬∞C
VDD = 3.0 V(2), TA = 25¬∞C
VDD = 5.0 V(2), TA = 25¬∞C
VDD = 1.1 V(2),

TOPR = -40 to +85¬∞C

VDD = 3.0 V(2),

TOPR = -40 to +85¬∞C
VDD = 5.0 V(2),

TOPR = -40 to +85¬∞C

VDD = 1.2 V, SCL = 100 kHz(3)
VDD = 3.0 V, SCL = 400 kHz(3)
VDD = 5.0 V, SCL = 400 kHz(3)

VDD = 3.0 V, TA = 25¬∞C,
VBACKUP < VDD

VDD = 3.0 V, TA = 25¬∞C

VBACKUP = 3.0 V, TA = 25¬∞C,
VDD < VBACKUP

VBACKUP = 3.0 V, TA = 25¬∞C,
VDD < VTH:LSM (2.0 V)

VDD = 3.0 V, FCLKOUT = 32.768
kHz, CL = 10 pF

1.1

1.2

2.0

1.1

0.9

45

45

45

2

5

7

95

115

95

115

1

5.5

1.1     V

5.5

5.5

5.5     V

60

60

66

300    nA

330

400

15

40     ¬µA

60

150

180    nA

150

180

¬µA


ŒîIDD:CK1024

ŒîIDD:CK1

Additional VDD

supply current(4)

VDD = 3.0 V, FCLKOUT = 1024 Hz,
CL = 10 pF

VDD = 3.0 V, FCLKOUT = 1 Hz,
CL = 10 pF

30

nA

0.03

(1) Clocks operating and RAM registers retained.

(2) All inputs and outputs are at 0 V or VDD.

(3) 2.2 k‚Ñ¶ pull-up resistors on SCL/SDA, excluding external peripherals and pull-up resistor 
current. All other inputs (besides SDA and SCL)
are at 0 V or VDD. Test conditions: Continuous burst read/write, 55h data pattern, 25 Œºs between 
each data byte, 20 pF load on each bus
pin.

(4) When CLKOUT is enabled the additional VDD supply current ŒîIDD can be calculated as follows:
ŒîIDD = CL x VDD x fOUT, e.g. ŒîIDD = 10 pF x 3.0 V x 32‚Äô768 Hz = 980 nA ‚âà 1 ¬µA

November 2021                         97/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

For this Table, TA = -40 to +85¬∞C unless otherwise indicated. VDD = 1.2 to 5.5 V, TYP values at 
25¬∞C and 3.0 V.

Operating Parameters (continued):

SYMBOL       PARAMETER          CONDITIONS        MIN      TYP     MAX     UNIT

Inputs


VIH
VIL
IILEAK

CI

Outputs

VOH:CLK

VOL:CLK

VOL

IOLEAK
COUT

HIGH level input voltage
LOW level input voltage
Input leakage current

Input capacitance

HIGH level output voltage
CLKOUT

LOW level output voltage
CLKOUT

LOW level output voltage
Pins: SDA, IÃÖNÃÖÃÖÃÖTÃÖ

Output leakage current
Output capacitance

VDD = 1.1 V to 5.5 V
Pins: SCL, SDA, EVI

VSS ‚â§ VI ‚â§ VDD

VDD = 3.0 V, TA = 25¬∞C

f = 1 MHz

VDD = 1.1 V, IOH = -0.1 mA
VDD = 3.0 V, IOH = -1.0 mA
VDD = 5.0 V, IOH = -1.0 mA
VDD = 1.1 V, IOL = 0.1 mA
VDD = 3.0 V, IOL = 1.0 mA
VDD = 5.0 V, IOL = 1.0 mA
VDD = 1.2 V, IOL = 0.5 mA
VDD = 3.0 V, IOL = 3.0 mA
VDD = 5.0 V, IOL = 3.0 mA
VO = VDD or VSS

VDD = 3.0 V, TA = 25¬∞C

f = 1 MHz

0.8 VDD

-0.5

1.0

2.7

4.5

-0.5

V

0.2 VDD     V

0.5     ¬µA

7     pF

V

0.1

0.3     V

0.5

0.4

0.4     V

0.3

0.5     ¬µA

7     pF

Power On Reset

VPOR      POR detection threshold                        0.75      0.8      0.85      V

Trickle charger


TCR 3 k‚Ñ¶

TCR 5 k‚Ñ¶

TCR 9 k‚Ñ¶

TCR 15 k‚Ñ¶
VF

Switchover

VHYST:DSM
VTH:LSM

VHYST:LSM

Current limiting resistor

Schottky diode voltage drop

Switchover hysteresis in Direct
Switching Mode

Backup switchover threshold
voltage in Level Switching Mode

Switchover hysteresis in Level
Switching Mode

VDD = 5.0 V, VBACKUP = 3.0 V,

including internal schottky diode

VDD with respect to VBACKUP = 3.0
V, VDD slew rate = ¬±1 V/ms

TOPR = -40 to +85¬∞C

VDD falls below VTH:LSM

VDD with respect to VBACKUP = 3.0
V, VDD slew rate = ¬±1 V/ms

TOPR = -40 to +85¬∞C

2

4.5

7.5

12.5

1.8

3

5.5

9.3

15.5

0.25

60

2.0

100

4

6.25

11.6    k‚Ñ¶

17.4

V

mV

2.2     V

mV


EEPROM Characteristics

VDD:READ    VDD read voltage         V

1.1

Power state                                V


VDD:WRITE

VDD

write voltage         DD

1.5


tPREFR
tAREFR
tUPDATE
tREFR
tWRITE
tREAD

n

POR refresh time
Automatic refresh time
Update time

Refresh time

Write to one EEPROM byte time
Read one EEPROM byte time

Write cycle endurance(1)

At power up

Each 24 hours, EERD = 0
EECMD = 11h

EECMD = 12h
EECMD = 21h
EECMD = 22h

VDD = 3.0 V, TA = 25¬∞C

4

10‚Äô000

66

3.5

63

3.5

16

1.4

ms

30

cycles


CYCLE

VDD = 5.5 V, TA = 85¬∞C

100


tRET

Data retention time(1)

TA = 55¬∞C              10

years

(1) Guaranteed by indirect testing.

November 2021                         98/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

6.2.1.TYPICAL CHARACTERISTICS

Typical characteristics for Direct Switching Mode (DSM), Level Switching Mode (LSM) and switchover 
disabled:
For these diagrams, I2C-bus inactive, CLKOUT disabled.


IDD versus VDD, VBACKUP = 0 V, TA = 25¬∞C

IBACKUP versus VBACKUP, VDD = 0 V, TA = 25¬∞C

(after turning off VDD)

300                                300

250                                250


200

150

100

50

0

switchover

*

LSM
DSM

switchover

disabled

200

150

100

50

0

LSM

DSM

switchover
disabled


0    1    2    3    4    5    6

VDD [V]

0    1    2    3    4    5    6

VBACKUP [V]


IDD versus TA, VDD = 3 V, VBACKUP = 0 V

IBACKUP versus TA, VBACKUP = 3 V, VDD = 0 V

(after turning off VDD)

300                                300

250                                250

200                                200


150

100

50

0

LSM

DSM

switchover
disabled

150

100

50

0

LSM

DSM

switchover
disabled


-50   -25   0   25   50   75

TA [¬∞C]

100

-50   -25   0   25   50   75

TA [¬∞C]

100

November 2021                         99/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

6.3. OSCILLATOR PARAMETERS

For this Table, TA = -40 to +85¬∞C unless otherwise indicated. VDD = 1.2 to 5.5 V, TYP values at 
25¬∞C and 3.0 V.

Oscillator Parameters:

SYMBOL        PARAMETER          CONDITIONS       MIN     TYP    MAX    UNIT

Xtal General

F          Crystal Frequency                               32.768          kHz


tSTART

Oscillator start-up time at
VDD = 3.0 V

TA = 25¬∞C

0.2     1      s

3


VSTART

Œîf/V

Oscillator start-up voltage
Frequency vs. voltage
characteristics

VDD = 1.1 V to 5.5 V
TA = 25¬∞C

1.3

0.5

V

1    ppm/V


V          V  rising slew rate

VDD = 1.1 V to 3.6 V

2.5


DDR           DD

VDD = 3.6 V to 5.5 V

3.8

V/ms


VDDF
Œ¥CLKOUT

VDD falling slew rate
CLKOUT duty cycle

VDD = 5.5 V to 1.1 V
VDD = 1.1 V to 5.5 V
FCLKOUT = 32.768 kHz

50 ¬±10

2.2

%

Xtal Frequency Characteristics

ŒîF/F         Frequency accuracy       TA = 25¬∞C                          ¬±5     ppm


ŒîF/FTOPR

Frequency vs. temperature
characteristics

TOPR = -40 to +85¬∞C
VDD = 3.0 V

-0.035·µñ·µñ·µê/ ¬≤ (T -T )¬≤ ¬±10%

ppm


T0
ŒîF/F

Turnover temperature
Aging first year max.

TA = 25¬∞C, VDD = 3.0 V

+25 ¬±5

¬±3

¬∞C

ppm


Xtal Frequency Offset Correction

EEOffset correction:

+243.2/


Œît/t

Œît/t
Œît/t

Min. corr. step (LSB) and
Max. corr. range
EEOffset. Achievable time
accuracy.

EEOffset. Factory Calibrated
time accuracy.

TA = -40 to +85¬∞C

Calibrated at an initial
temperature and voltage
Calibrated at TA = 25¬∞C,
VDD = 3.0 V

¬±0.954

-0.48

¬±1

-244.1

+0.48

ppm

ppm
ppm

6.3.1.XTAL FREQUENCY VS. TEMPERATURE CHARACTERISTICS


20

0

-20

-40

-60

-80

-100

-120

-140

-160

-180

T‚ÇÄ = 25¬∞C (¬± 5¬∞C)

-0.035 * (T-T‚ÇÄ)¬≤ ppm (¬±10%)

-50  -40  -30  -20  -10   0   10  20  30  40  50  60  70  80  90

Temperature [¬∞C]

November 2021                         100/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

6.4. POWER ON AC ELECTRICAL CHARACTERISTICS

The following Figure describes the power on AC electrical characteristics for the CLKOUT pin. The 
clock output signal
on CLKOUT pin is primarily controlled by the CLKOE bit (EEPROM 35h), the CLKF flag and the FD field 
(EEPROM
35h). See also CLOCK OUTPUT SCHEME and USE OF THE CONFIGURATION REGISTERS.

Power On AC Electrical Characteristics:


VDD

VDDR1

POR

PORF     1            5

EEbusy            3


CLKOUT

tSTART

2   4

tREFR


State

POR

Operating

Write operation

¬π Flag PORF and the EEbusy status bit are set when VDD starting from below VPOR.

¬≤ Regardless of the settings in the EEPROM 35h, CLKOUT pin is driving always the frequency of 
32.768 kHz
during the first refreshment time tPREFR = ~66 ms.

¬≥ After tPREFR, EEbusy is cleared to 0 automatically. The typical start up time tSTART is 0.2 s.

‚Å¥ Depending of the settings of the CLKOE bit (EEPROM 35h) and/or the CLKF flag and the FD field 
(EEPROM
35h) the CLKOUT pin can drive the following signals:

‚Ä¢  Square wave of 32.768 kHz (default value on delivery), 8192 Hz, 1024 Hz, 64 Hz, 32 Hz or 1 
Hz,

‚Ä¢  Or the predefined periodic countdown timer interrupt (FD = 110). CLKOUT is immediately set 
to
HIGH level. The Periodic Countdown Timer itself has to be started by software.

‚Ä¢  When CLKOE bit and CLKF flag are 0 or when FD field is 111 or when the device goes to 
VBACKUP
Power state, the CLKOUT signal is set to LOW level.

‚Åµ The PORF flag remains 1 until it is cleared to 0 by software.

For this Table, TA = -40 to +85¬∞C and VDD = 1.2 to 5.5 V, TYP values at 25¬∞C and 3.0 V.
Power On AC Electrical Parameters:

SYMBOL        PARAMETER          CONDITIONS       MIN     TYP    MAX    UNIT


VDDR1

tSTART

VSTART
tPREFR

VDD rising slew rate at initial
power on reset (POR)

Oscillator start-up time at
VDD = 3.0 V

Oscillator start-up voltage
First refreshment time

TA = 25¬∞C

0.1

1.3

0.2

66

1    V/ms

1

3     s

V

ms

November 2021                         101/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

6.5. I¬≤C-BUS CHARACTERISTICS

The following Figure and Table describe the I2C AC electrical parameters.
I2C AC Parameter Definitions:


SDA

t BUF

t LOW

t HD:DAT

t SU:DAT


SCL

P

SDA

t HD:STA

S

t RISE

t SU:STA

t FALL

t HIGH

t SU:STO

Sr                      P

For the following Table, TA = -40 to +85¬∞C.


I2C AC Electrical Parameters:

SYMBOL         PARAMETER

VDD ‚â• 1.2 V          VDD ‚â• 2.0 V
MIN      MAX      MIN      MAX

UNIT


fSCL
tLOW
tHIGH
tRISE
tFALL
tHD:STA
tSU:STA
tSU:DAT
tHD:DAT
tSU:STO
tBUF

SCL input clock frequency
Low period of SCL clock
High period of SCL clock
Rise time of SDA and SCL
Fall time of SDA and SCL
START condition hold time
START condition setup time
SDA setup time

SDA hold time

STOP condition setup time

Bus free time before a new transmission

0

4.7

4.0

4.0

4.7

250

0

4.0

4.7

100

1000

300

0

1.3

0.6

0.6

0.6

100

0

0.6

1.3

400

300

300

kHz
¬µs
¬µs
ns
ns
¬µs
¬µs
ns
¬µs
¬µs
¬µs

S = Start condition, Sr = Repeated Start condition, P = Stop condition

Caution:

When accessing the RV-3028-C7, all communication from transmitting the Start condition to 
transmitting the Stop
condition after access should be completed within 950 ms.

If such communication requires 950 ms or longer, the I2C-bus interface is reset by the internal bus 
timeout function.

November 2021                         102/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

7. TYPICAL APPLICATION CIRCUITS

7.1. NO BACKUP SOURCE / EVENT INPUT NOT USED

Application Key Points:

‚óè  No VBACKUP source

‚óè  Lowest current consumption (45 nA typ.)

‚óè  CLKOUT settings stored in EEPROM for permanent configuration
Register Configuration:

0.  RTC with default configuration on delivery (bits in black)

1.  Register 35h     CLKOE                   FD     CLKOE ‚Üí CLKOUT to be set

X    1   0   0   0   X   X   X  FD ‚Üí Frequency to be selected

2.  CLKOUT settings (35h) to be stored in EEPROM using procedure of 4.6.3.


100 nF

2

VDD

4

VDD

VDD


RV-3028-C7

MCU


1

10 kŒ©

6

10 kŒ©   3

VBACKUP

EVI

INT

SDA

SCL

CLKOUT

SDA
SCL

5

VSS                            VSS

1

Backup Switchover functionality is disabled by default. Do not leave VBACKUP power supply pin 
floating.

Connection to VSS through a 10 k‚Ñ¶ resistor keeps functional test possible.

2 100 nF decoupling capacitor close to the device.

3 Interrupts are disabled by default.

ÃÖINÃÖÃÖÃÖTÃÖ pin is an open-drain output, which can be left open when not used.

4 I¬≤C lines SCL, SDA are open-drain and require pull-up resistors to VDD.

5  CLKOUT with a frequency of 32.768 kHz (*) is enabled by default (default value on delivery).

If not used, disable CLKOUT to minimize current consumption (CLKOE = 0 and CLKF = 0, or FD = 111).

6  External Events functionality is disabled by default. Do not leave EVI input pin floating.
Connection to VSS through a resistor keeps functional test possible.

(*) CLKOUT offers the selectable frequencies 32.768 kHz (default), 8192 Hz, 1024 Hz, 64 Hz, 32 Hz 
or 1 Hz,
or the predefined periodic countdown Timer Interrupt for application use.

November 2021                         103/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

7.2. NON-RECHARGEABLE BACKUP SOURCE / EVENT INPUT USED (ACTIVE HIGH)

Application Key Points:

‚óè  Trickle charger disabled to avoid dangerous charging current into the backup source

‚óè  LSM Backup Switchover Mode to avoid non-desired backup switching (VTH:LSM = 2.0 V)

‚óè  Power Management settings have to be stored in EEPROM for permanent configuration

‚óè  Rising edge or high-level voltage applied to the EVI input triggers an interrupt
Register Configuration:

0.  RTC with default configuration on delivery (bits in black)

1.  Register 10h      0   0   0   0   0   1   0   0   EIE ‚Üí Event interrupt enabled

Register 13h         EHL    ET                  EHL ‚Üí Event-high detection

0   1   X   X   0   0   0   0   ET ‚Üí Event filtering to be set

Register 37h             TCE       BSM          TCE ‚Üí Trickle charger disabled

0/1   0   0   1   1   1   0   0   BSM ‚Üí LSM switchover mode

2.  Switchover settings (37h) to be stored in EEPROM using procedure of 4.6.3.


6

VDD

100 nF

2

VBACKUP

3

4

VDD

VDD


VBACKUP

RV-3028-C7

MCU


1     2

100 nF

VBACKUP

EVI

INT
SDA
SCL

CLKOUT

INT
SDA
SCL

5


Primary
Battery

10 kŒ©

VSS

VSS

1

Insert a protection resistor of 100 ‚Äì 1000 Œ© to prevent damage in case of soldering issues causing 
short

between supply pins.

2

100 nF decoupling ceramic capacitor close to the device for VDD and VBACKUP.

3  The ÃÖINÃÖÃÖÃÖTÃÖ signal also works when the device operates on VBACKUP supply voltage.
In that case, it is possible to tie the ÃÖINÃÖÃÖÃÖTÃÖ signal pull-up resistor to VBACKUP.

4

I¬≤C lines SCL, SDA are open-drain and require pull-up resistors to VDD.

5

CLKOUT is disabled in VBACKUP Power state. If not used in VDD Power state, disable CLKOUT to 
minimize

current consumption (CLKOE = 0 and CLKF = 0, or FD = 111).

6 EVI input set to detect rising edge or high-level of tamper detection signal;
The EVI input is never floating thanks to the 10 k‚Ñ¶ to VSS.

November 2021                         104/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

7.3. RECHARGEABLE BACKUP SOURCE / EVENT INPUT USED (ACTIVE LOW)

Application Key Points:

‚óè  MLCC, Supercap or Rechargeable Battery as secondary VBACKUP source

‚óè  DSM Backup Switchover Mode for capacitors (or LSM for rechargeable battery)

‚óè  Backup source charged through the trickle charger

‚óè  Power Management settings have to be stored in EEPROM for permanent configuration
Register Configuration:

0.  RTC with default configuration on delivery (bits in black)

1.  Register 10h      0   0   0   0   0   1   0   0   EIE ‚Üí Event interrupt enabled

Register 13h         EHL    ET                  EHL ‚Üí Event-low detection

0   0   X   X   0   0   0   0   ET ‚Üí Event filtering to be set

TCE       BSM     TCR   TCE ‚Üí Trickle charger enabled


Register 37h

0/1  0   1

1   0   1

X   X  BSM ‚Üí DSM switchover mode

TCR ‚Üí Trickle resistor to be set

2.  Switchover settings (37h) to be stored in EEPROM using procedure of 4.6.3.


10 kŒ©

VDD

100 nF

2

VBACKUP

3

4

VDD

VDD


VBACKUP

RV-3028-C7

MCU


100 nF  2

1

VBACKUP

EVI

INT
SDA
SCL

CLKOUT

INT
SDA
SCL

5


Supercap or     6

Rechargeable
Battery

VSS

VSS

1  Low-cost MLCC (*) ceramic capacitor, supercapacitor (e.g. 1 farad) or secondary battery LMR
(respect manufacturer specifications for constant charging voltage).

When Lithium Battery is used, it is recommended to insert a protection resistor of 100 ‚Äì 1000 Œ©. to 
limit

battery current and to prevent damage in case of soldering issues causing short between supply 
pins.

2  100 nF decoupling ceramic capacitor close to the device for VDD and VBACKUP.

3  The ÃÖINÃÖÃÖÃÖTÃÖ signal also works when the device operates on VBACKUP supply voltage.
In that case, it is possible to tie the ÃÖINÃÖÃÖÃÖTÃÖ signal pull-up resistor to VBACKUP.

4  I¬≤C lines SCL, SDA are open-drain and require pull-up resistors to VDD.

5 CLKOUT is disabled in VBACKUP Power state. If not used in VDD Power state, disable CLKOUT to 
minimize
current consumption (CLKOE = 0 and CLKF = 0, or FD = 111).

6 EVI input set to detect falling edge or low-level of tamper detection signal;
The EVI input is never floating thanks to the 10 k‚Ñ¶ to VDD.

(*) Note, that low-cost MLCCs are normally used for short time keeping (minutes) and the more
expensive supercapacitors for a longer backup time (days - weeks).

November 2021                         105/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

7.4. NO BACKUP SOURCE / EVENT INPUT USED (‚ÄúWAKE-UP‚Äù& ‚ÄúPOWER SWITCH‚Äù)

Application Key Points:

‚óè  No VBACKUP source and lowest current consumption (45 nA typ.)

‚óè  External Event enabled allowing RTC to fire ‚Äúwake-up‚Äù interrupt acting on load switch

‚óè  MCU most of the time in idle mode is awaken by RTC‚Äôs interrupt through the upper load switch

‚óè  MCU holds supply voltage until its task is finished and cuts off its own supply voltage
Register Configuration:

0.  RTC with default configuration on delivery (bits in black)

1.  Register 10h      0   0   0   0   0   1   0   0   EIE ‚Üí Event interrupt enabled

Register 13h         EHL    ET                  EHL ‚Üí Event-high detection

0   1   X   X   0   0   0   0   ET ‚Üí Event filtering to be set


VDD

Wake up !

Power Switch

VIN      VOUT

ON      GND


100 nF

6

2     3

VIN      VOUT

Hold !     4


Application
Wake up !

10 kŒ©

VDD

RV-3028-C7

EVI      INT

SDA
SCL

GND

8

ON  HI

LO

GPIO
INT
SDA
SCL

VDD

MCU


VBACKUP

1

CLKOUT

7 User


10 kŒ©

VSS      5

Wake up !

VSS

1  Backup Switchover functionality is disabled by default. Do not leave VBACKUP power supply pin 
floating.
Connection to VSS through a 10 k‚Ñ¶ resistor keeps functional test possible.

2  100 nF decoupling capacitor close to the device.

3  ÃÖINÃÖÃÖÃÖTÃÖ pin is an open-drain output and requires a pull-up resistor.

4  I¬≤C lines SCL, SDA are open-drain and require pull-up resistors to VDD.

5  Disable CLKOUT to minimize current consumption (CLKOE = 0 and CLKF = 0, or FD = 111).

6  EVI input set to detect rising edge or high-level of tamper detection signal; can be used as an 
Application
Wake-Up signal. The EVI Input is never floating thanks to the 10 k‚Ñ¶ to VSS.

7 User or Manual Wake-Up, always available; e.g for initial system power-on to configure RTC and 
system.

8 MCU Power Retention via GPIO = High maintains MCU Power to complete I2C Interface communication
with the RTC. MCU cuts-off it‚Äôs own supply voltage by set GPIO = Low at the very end of its task.

November 2021                         106/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

8. PACKAGE

8.1. DIMENSIONS AND SOLDER PAD LAYOUT

RV-3028-C7 Package:

Package dimensions (bottom view):      Recommended solder pad layout:


3,2

0,9

0,9

0,9

0,9                                 0,5

1    2    3    4

8    7    6    5

0,4                            3,2

Metal lid is connected to VSS (pin #5)

Tolerances:  unless otherwise specified ¬±0.1mm
Drawing:   RV-3028-C7_Pack-drw_20180208

All dimensions in mm typical.

8.1.1.RECOMMENDED THERMAL RELIEF

When connecting a pad to a copper plane, thermal relief is recommended.


RV-C7 Package:

GOOD

ÔøΩ





BAD

üó¥















November 2021                         107/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

8.2. MARKING AND PIN #1 INDEX

Laser marking RV-3028-C7 Package: (top view)


#8             #5

M039A1

Product Date Code

M 0 3 9 A 1


3028

#1             #4

M

Micro Crystal

0

Year

39

Week

A1

Batch

Part Designation
Pin 1 Index

November 2021                         108/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

9. MATERIAL COMPOSITION DECLARATION & ENVIRONMENTAL INFORMATION

9.1. HOMOGENOUS MATERIAL COMPOSITION DECLARATION

Homogenous material information according to IPC-1752 standard

Material Composition RV-3028-C7:

4

5

2

1

8

3

6

7

(Symbolic drawing)


No.

1

2

3

Item
Component
Name

Resonator
Electrodes

Housing

Sub Item
Material
Name

Quartz Crystal
Cr+Au

Ceramic

Material
Weight

(mg)  (%)

0.13  100%

0.01   6%

94%

6.90  100%

Substance
Element

SiO2

Cr
Au
Al2O3

CAS

Number

14808-60-7

Cr:  7440-47-3

Au:  7440-57-5

1344-28-1

Comment


4  Metal Lid

Kovar Lid

2.67

95%

Fe53Ni29Co18

Fe:

Ni:

Co:

7439-89-6

7440-02-0

7440-48-4

Metal Lid (Kovar)


5  Seal

6  Terminations

7  Conductive
adhesive

8  CMOS IC

Ni-plating
Au-plating

Solder Preform

Internal and external
terminals

Silver filled Silicone
glue

Silicon

Gold bumps

Unit weight

0.54

0.38

0.09

0.64

11.4

4.95%

0.05%

80%

20%

80%

15%

5%

88%

12%

0%

90%

10%

Ni
Au

Au80 / Sn20

Mo
Ni

Au 0.5 micron
Ag

Siloxanes and
silicones

Distillates, petroleum
hydrotreated

Si
Au

Ni:  7440-02-0

Au:  7440-57-5

Au:  7440-57-5

Sn:  7440-31-5

Mo:  7439-98-7

Ni:  7440-02-0

Au:  7440-57-5

Ag:  7440-22-4

68083-19-2

64742-47-8

Si:  7440-21-3

Au:  7440-57-5

Nickel plating
Gold plating

Molybdenum
Nickel plating
Gold plating

di-Me, vinyl group-
terminated

Does not appear in
finished product

November 2021                         109/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

9.2. MATERIAL ANALYSIS & TEST RESULTS

Homogenous material information according to IPC-1752 standard


No.

Item
Component
Name

Sub Item
Material
Name

RoHS

Halogens

Phthalates


1  Resonator

Quartz Crystal

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd


2  Electrodes

Cr+Au

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd


3  Housing

Ceramic

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd


4  Metal Lid

Kovar Lid & Plating

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd


5  Seal

Solder Preform

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd  nd  nd


6  Terminations

Conductive
adhesive

8  CMOS IC

Int. & ext. terminals
Silver filled Silicone glue
Silicon & Gold bumps

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd

nd  nd


MDL [ppm]

Method Detection Limit

2     8    5        50          50


Test methods:

RoHS       Test method with reference to:

nd (not detected) = below ‚ÄúMethod Detection Limit‚Äù (MDL)

‚Ä¢  Pb, Cd       IEC 62321-5:2013                 MDL:  2 ppm

‚Ä¢  Hg         IEC 62321-4:2013 + AMD1:2017         MDL:  2 ppm

‚Ä¢  Cr(VI)       IEC 62321-7-2:2017                MDL:  8 ppm

‚Ä¢  PBB / PBDE    IEC 62321-6:2015                 MDL:  5 ppm

Halogens      Test method with reference to BS EN 14582:2016  MDL:  50 ppm

Phthalates     Test method with reference to IEC 62321-8:2017   MDL:  50 ppm

November 2021                         110/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

9.3. RECYCLING MATERIAL INFORMATION

Recycling material information according to IPC-1752 standard.

Element weight is accumulated and referenced to the unit weight of 11.4 mg.


Item
Material
Name

Quartz Crystal
Chromium
Ceramic

Gold

Tin
Nickel

Molybdenum

No.

1

2

3

2

4

5

6

8

5

4

6

6

Item
Component
Name

Resonator
Electrodes
Housing

Electrodes
Metal Lid
Seal
Terminations
CMOS     IC

Seal
Metal Lid

Terminations

Terminations

Material
Weight

(mg)  (%)

0.13   1.14

0.0006  0.005

6.90  60.74

0.53   4.63

0.11   0.95

0.19   1.67

0.3    2.68

Substance
Element

SiO2

Cr
Al2O3

Au

Sn

Ni
Mo

CAS

Number

14808-60-7

Cr:  7440-47-3

1344-28-1

Au:  7440-57-5

Sn:  7440-31-5

Ni:  7440-02-0

Mo: 7439-98-7

Comment


Kovar

4  Metal Lid

2.53

22.33

Fe53Ni29Co18

Fe:

Ni:

Co:

7439-89-6

7440-02-0

7440-48-4


Silver
Siloxanes and
silicones

Distillates

Silicon

7a  Conductive adhesive
7b  Conductive adhesive

7c  Conductive adhesive

8  CMOS IC

0.079

0.011

0

0.58

0.7

0.10

0

5.07

Ag

Siloxanes and
silicones

Distillates
Si

Ag:  7440-22-4

68083-19-2

64742-47-8

Si:  7440-21-3

di-Me, vinyl group-
terminated
hydrotreated

petroleum, does not

appear in finished
products


Unit weight (total)

11.4

100

November 2021                         111/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

9.4. ENVIRONMENTAL PROPERTIES & ABSOLUTE MAXIMUM RATINGS


Package

SON-8 (DFN-8) ceramic
package

Description

Small Outline Non-leaded (SON), hermetically sealed ceramic package with metal lid.


Parameter
Product weight (total)
Storage temperature

Moisture sensitivity level (MSL)
FIT / MTBF

Directive

IPC/JEDEC J-STD-020D

Conditions

Store as bare product

Value

11.4 mg

-55 to +125¬∞C
MSL1

available on request

Terminal finish:

Ceramic

Molybdenum
Nickel

Gold

November 2021                         112/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

10. SOLDERING INFORMATION

Maximum Reflow Conditions in accordance with IPC/JEDEC J-STD-020C ‚ÄúPb-free‚Äù


TP

TL

Tsmax

tP

Ramp-up

tL

Critical Zone

TL to TP


Tsmin

ts

Preheat

Ramp-down


25

t 25¬∞C to Peak

Time


Temperature Profile
Average ramp-up rate
Ramp down Rate

Time 25¬∞C to Peak Temperature

Preheat
Temperature min
Temperature max
Time  Tsmin to Tsmax

Soldering above liquidus
Temperature liquidus
Time above liquidus

Peak temperature

Peak Temperature

Time within 5¬∞C of peak temperature

Symbol
(Tsmax to TP)
Tcool

Tto-peak

Tsmin
Tsmax
ts

TL

tL

Tp
tp

Condition

3¬∞C / second max
6¬∞C / second max
8 minutes max

150

200

60 ‚Äì 180

217

60 ‚Äì 150

260

20 ‚Äì 40

Unit

¬∞C / s

¬∞C / s
min

¬∞C

¬∞C

sec

¬∞C

sec

¬∞C

sec

November 2021                         113/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

11. HANDLING PRECAUTIONS FOR MODULES WITH EMBEDDED CRYSTALS

The built-in tuning-fork crystal consists of pure Silicon Dioxide in crystalline form. The cavity 
inside the package is
evacuated and hermetically sealed in order for the crystal blank to function undisturbed from air 
molecules, humidity
and other influences.

Shock and vibration:

Keep the crystal / module from being exposed to excessive mechanical shock and vibration. Micro 
Crystal
guarantees that the crystal / module will bear a mechanical shock of 5000 g / 0.3 ms.

The following special situations may generate either shock or vibration:

Multiple PCB panels - Usually at the end of the pick & place process the single PCBs are cut out 
with a router.
These machines sometimes generate vibrations on the PCB that have a fundamental or harmonic 
frequency close
to 32.768 kHz. This might cause breakage of crystal blanks due to resonance. Router speed should be 
adjusted
to avoid resonant vibration.

Ultrasonic cleaning - Avoid cleaning processes using ultrasonic energy. These processes can damage 
the
crystals due to the mechanical resonance frequencies of the crystal blank.

Overheating, rework high temperature exposure:

Avoid overheating the package. The package is sealed with a seal ring consisting of 80% Gold and 
20% Tin. The
eutectic melting temperature of this alloy is at 280¬∞C. Heating the seal ring up to >280¬∞C will 
cause melting of the
metal seal which then, due to the vacuum, is sucked into the cavity forming an air duct. This 
happens when using
hot-air-gun set at temperatures >280¬∞C.

Use the following methods for rework:

‚Ä¢  Use a hot-air-gun set at 270¬∞C.

‚Ä¢  Use 2 temperature controlled soldering irons, set at 270¬∞C, with special-tips to contact all 
solder-joints from
both sides of the package at the same time, remove part with tweezers when pad solder is liquid.

November 2021                         114/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

12. PACKING & SHIPPING INFORMATION


Reel: 7‚Äù = 178 mm

√ò 13

min. 12.4

max. 17


Carrier Tape:

Material: Polycarbonate, conductive
Width: 12 mm

Tape Leader and Trailer: Minimum length 300 mm

4 ¬±0,1

2 ¬±0,05

0,315 ¬±0,05

0,254 ¬±0,015


4 ¬±0,1

1,73 ¬±0,05

0,061

Cover Tape

0,83 ¬±0,05


Cover Tape:

Direction of feed

All dimensions are in mm

RV-3028-C7_Tape-drw_20180208

Tape: Polypropylene, 3M‚Ñ¢ Universal Cover Tape (UCT)
Adhesive Type: Pressure sensitive, Synthetic Polymer
Thickness: 0.061 mm

Peel Method:

Medial section removal, both lateral stripes remain on carrier

November 2021                         115/116                             Rev. 1.4


             Micro                        Crystal                                     

Extreme Low Power Real-Time Clock Module                             RV-3028-C7

13. COMPLIANCE INFORMATION

Micro Crystal confirms that the standard product Real-Time Clock Module RV-3028-C7 is compliant 
with ‚ÄúEU RoHS
Directive‚Äù and ‚ÄúEU REACh Directives‚Äù.

Please find the actual Certificate of Conformance for Environmental Regulations on our website:
CoC_Environment_RV-Series.pdf

14. DOCUMENT REVISION HISTORY


Date

August 2018

August 2019

March 2021

September 2021

November 2021

Revision #

1.0

1.1

1.2

1.3

1.4

Revision Details

First release

Corrected typos and added sections

Corrected and added specifications and drawings
Added new disclaimer

Improved password description, 3.12., 3.15.3., 4.18.
Removed note about I¬≤C interface re-initialization, 4.2.
Added "to any RTC register", 4.5., 4.5.1. and 4.5.2.

Corrected "VBAT" to "VBACKUP", 4.6.8.

Clarified text about I¬≤C read/write data integrity and I¬≤C re-initialization, 5.10.
Removed EEOffset calibrated Œît/t MAX value (¬±2 ppm), 6.3.

Removed older application circuit, 7.1.

Added four new application circuits, 7.1., 7.2., 7.3. and 7.4.

Adapted limit values and methods in accordance with the latest standards, 9.2.
Corrected package designation to SON-8 (DFN-8), 9.4.

Corrected text to "hot-air-gun set at temperatures >280¬∞C.", 11.
Corrected location of designation "+ AMD1:2017", 9.2.

The information contained in this document is believed to be accurate and reliable. However, Micro 
Crystal
assumes no responsibility for any consequences resulting from the use of such information nor for 
any
infringement of patents or other rights of third parties, which may result from its use. In 
accordance with our
policy of continuous development and improvement, Micro Crystal reserves the right to modify
specifications mentioned in this publication without prior notice and as deemed necessary.

Any use of Products for the manufacture of arms is prohibited. Customer shall impose that same 
obligation
upon all third-party purchasers.

Without the express written approval of Micro Crystal, Products are not authorized for use as 
components
in safety and life supporting systems as well as in any implantable medical devices. The 
unauthorized use
of Products in such systems / applications / equipment is solely at the risk of the customer and 
such
customer agrees to defend and hold Micro Crystal harmless from and against any and all claims, 
suits,
damages, cost, and expenses resulting from any unauthorized use of Products.

No licenses to patents or other intellectual property rights of Micro Crystal are granted in 
connection with
the sale of Micro Crystal products, neither expressly nor implicitly. In respect of the intended 
use of Micro
Crystal products by customer, customer is solely responsible for observing existing patents and 
other
intellectual property rights of third parties and for obtaining, as the case may be, the necessary 
licenses.


Micro Crystal AG
Muehlestrasse 14
CH-2540 Grenchen
Switzerland

Phone +41 32 655 82 82

sales@microcrystal.com
www.microcrystal.com

November 2021                         116/116                             Rev. 1.4

